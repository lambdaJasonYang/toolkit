var Vi=Object.defineProperty;var Hi=(n,e,t)=>e in n?Vi(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var fr=(n,e,t)=>(Hi(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function t(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=t(o);fetch(o.href,r)}})();/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Mt=window,Yn=Mt.ShadowRoot&&(Mt.ShadyCSS===void 0||Mt.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,zn=Symbol(),lr=new WeakMap;let ri=class{constructor(e,t,i){if(this._$cssResult$=!0,i!==zn)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(Yn&&e===void 0){const i=t!==void 0&&t.length===1;i&&(e=lr.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&lr.set(t,e))}return e}toString(){return this.cssText}};const qi=n=>new ri(typeof n=="string"?n:n+"",void 0,zn),Gi=(n,...e)=>{const t=n.length===1?n[0]:e.reduce((i,o,r)=>i+(s=>{if(s._$cssResult$===!0)return s.cssText;if(typeof s=="number")return s;throw Error("Value passed to 'css' function must be a 'css' function result: "+s+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(o)+n[r+1],n[0]);return new ri(t,n,zn)},Wi=(n,e)=>{Yn?n.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet):e.forEach(t=>{const i=document.createElement("style"),o=Mt.litNonce;o!==void 0&&i.setAttribute("nonce",o),i.textContent=t.cssText,n.appendChild(i)})},hr=Yn?n=>n:n=>n instanceof CSSStyleSheet?(e=>{let t="";for(const i of e.cssRules)t+=i.cssText;return qi(t)})(n):n;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var cn;const $t=window,dr=$t.trustedTypes,Yi=dr?dr.emptyScript:"",gr=$t.reactiveElementPolyfillSupport,In={toAttribute(n,e){switch(e){case Boolean:n=n?Yi:null;break;case Object:case Array:n=n==null?n:JSON.stringify(n)}return n},fromAttribute(n,e){let t=n;switch(e){case Boolean:t=n!==null;break;case Number:t=n===null?null:Number(n);break;case Object:case Array:try{t=JSON.parse(n)}catch{t=null}}return t}},ii=(n,e)=>e!==n&&(e==e||n==n),fn={attribute:!0,type:String,converter:In,reflect:!1,hasChanged:ii},En="finalized";let ot=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(e){var t;this.finalize(),((t=this.h)!==null&&t!==void 0?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((t,i)=>{const o=this._$Ep(i,t);o!==void 0&&(this._$Ev.set(o,i),e.push(o))}),e}static createProperty(e,t=fn){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const i=typeof e=="symbol"?Symbol():"__"+e,o=this.getPropertyDescriptor(e,i,t);o!==void 0&&Object.defineProperty(this.prototype,e,o)}}static getPropertyDescriptor(e,t,i){return{get(){return this[t]},set(o){const r=this[e];this[t]=o,this.requestUpdate(e,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||fn}static finalize(){if(this.hasOwnProperty(En))return!1;this[En]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,i=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const o of i)this.createProperty(o,t[o])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const o of i)t.unshift(hr(o))}else e!==void 0&&t.push(hr(e));return t}static _$Ep(e,t){const i=t.attribute;return i===!1?void 0:typeof i=="string"?i:typeof e=="string"?e.toLowerCase():void 0}u(){var e;this._$E_=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(t=>t(this))}addController(e){var t,i;((t=this._$ES)!==null&&t!==void 0?t:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((i=e.hostConnected)===null||i===void 0||i.call(e))}removeController(e){var t;(t=this._$ES)===null||t===void 0||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])})}createRenderRoot(){var e;const t=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return Wi(t,this.constructor.elementStyles),t}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(t=>{var i;return(i=t.hostConnected)===null||i===void 0?void 0:i.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(t=>{var i;return(i=t.hostDisconnected)===null||i===void 0?void 0:i.call(t)})}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$EO(e,t,i=fn){var o;const r=this.constructor._$Ep(e,i);if(r!==void 0&&i.reflect===!0){const s=(((o=i.converter)===null||o===void 0?void 0:o.toAttribute)!==void 0?i.converter:In).toAttribute(t,i.type);this._$El=e,s==null?this.removeAttribute(r):this.setAttribute(r,s),this._$El=null}}_$AK(e,t){var i;const o=this.constructor,r=o._$Ev.get(e);if(r!==void 0&&this._$El!==r){const s=o.getPropertyOptions(r),u=typeof s.converter=="function"?{fromAttribute:s.converter}:((i=s.converter)===null||i===void 0?void 0:i.fromAttribute)!==void 0?s.converter:In;this._$El=r,this[r]=u.fromAttribute(t,s.type),this._$El=null}}requestUpdate(e,t,i){let o=!0;e!==void 0&&(((i=i||this.constructor.getPropertyOptions(e)).hasChanged||ii)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),i.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,i))):o=!1),!this.isUpdatePending&&o&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((o,r)=>this[r]=o),this._$Ei=void 0);let t=!1;const i=this._$AL;try{t=this.shouldUpdate(i),t?(this.willUpdate(i),(e=this._$ES)===null||e===void 0||e.forEach(o=>{var r;return(r=o.hostUpdate)===null||r===void 0?void 0:r.call(o)}),this.update(i)):this._$Ek()}catch(o){throw t=!1,this._$Ek(),o}t&&this._$AE(i)}willUpdate(e){}_$AE(e){var t;(t=this._$ES)===null||t===void 0||t.forEach(i=>{var o;return(o=i.hostUpdated)===null||o===void 0?void 0:o.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((t,i)=>this._$EO(i,this[i],t)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};ot[En]=!0,ot.elementProperties=new Map,ot.elementStyles=[],ot.shadowRootOptions={mode:"open"},gr==null||gr({ReactiveElement:ot}),((cn=$t.reactiveElementVersions)!==null&&cn!==void 0?cn:$t.reactiveElementVersions=[]).push("1.6.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var ln;const Bt=window,ct=Bt.trustedTypes,pr=ct?ct.createPolicy("lit-html",{createHTML:n=>n}):void 0,Tn="$lit$",Le=`lit$${(Math.random()+"").slice(9)}$`,oi="?"+Le,zi=`<${oi}>`,Xe=document,bt=()=>Xe.createComment(""),At=n=>n===null||typeof n!="object"&&typeof n!="function",si=Array.isArray,Ji=n=>si(n)||typeof(n==null?void 0:n[Symbol.iterator])=="function",hn=`[ 	
\f\r]`,pt=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,vr=/-->/g,yr=/>/g,Ve=RegExp(`>|${hn}(?:([^\\s"'>=/]+)(${hn}*=${hn}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),mr=/'/g,wr=/"/g,ai=/^(?:script|style|textarea|title)$/i,Zi=n=>(e,...t)=>({_$litType$:n,strings:e,values:t}),ui=Zi(1),ft=Symbol.for("lit-noChange"),ee=Symbol.for("lit-nothing"),_r=new WeakMap,Ye=Xe.createTreeWalker(Xe,129,null,!1);function ci(n,e){if(!Array.isArray(n)||!n.hasOwnProperty("raw"))throw Error("invalid template strings array");return pr!==void 0?pr.createHTML(e):e}const Xi=(n,e)=>{const t=n.length-1,i=[];let o,r=e===2?"<svg>":"",s=pt;for(let u=0;u<t;u++){const f=n[u];let a,c,d=-1,v=0;for(;v<f.length&&(s.lastIndex=v,c=s.exec(f),c!==null);)v=s.lastIndex,s===pt?c[1]==="!--"?s=vr:c[1]!==void 0?s=yr:c[2]!==void 0?(ai.test(c[2])&&(o=RegExp("</"+c[2],"g")),s=Ve):c[3]!==void 0&&(s=Ve):s===Ve?c[0]===">"?(s=o??pt,d=-1):c[1]===void 0?d=-2:(d=s.lastIndex-c[2].length,a=c[1],s=c[3]===void 0?Ve:c[3]==='"'?wr:mr):s===wr||s===mr?s=Ve:s===vr||s===yr?s=pt:(s=Ve,o=void 0);const y=s===Ve&&n[u+1].startsWith("/>")?" ":"";r+=s===pt?f+zi:d>=0?(i.push(a),f.slice(0,d)+Tn+f.slice(d)+Le+y):f+Le+(d===-2?(i.push(void 0),u):y)}return[ci(n,r+(n[t]||"<?>")+(e===2?"</svg>":"")),i]};class Ct{constructor({strings:e,_$litType$:t},i){let o;this.parts=[];let r=0,s=0;const u=e.length-1,f=this.parts,[a,c]=Xi(e,t);if(this.el=Ct.createElement(a,i),Ye.currentNode=this.el.content,t===2){const d=this.el.content,v=d.firstChild;v.remove(),d.append(...v.childNodes)}for(;(o=Ye.nextNode())!==null&&f.length<u;){if(o.nodeType===1){if(o.hasAttributes()){const d=[];for(const v of o.getAttributeNames())if(v.endsWith(Tn)||v.startsWith(Le)){const y=c[s++];if(d.push(v),y!==void 0){const m=o.getAttribute(y.toLowerCase()+Tn).split(Le),_=/([.?@])?(.*)/.exec(y);f.push({type:1,index:r,name:_[2],strings:m,ctor:_[1]==="."?eo:_[1]==="?"?no:_[1]==="@"?ro:zt})}else f.push({type:6,index:r})}for(const v of d)o.removeAttribute(v)}if(ai.test(o.tagName)){const d=o.textContent.split(Le),v=d.length-1;if(v>0){o.textContent=ct?ct.emptyScript:"";for(let y=0;y<v;y++)o.append(d[y],bt()),Ye.nextNode(),f.push({type:2,index:++r});o.append(d[v],bt())}}}else if(o.nodeType===8)if(o.data===oi)f.push({type:2,index:r});else{let d=-1;for(;(d=o.data.indexOf(Le,d+1))!==-1;)f.push({type:7,index:r}),d+=Le.length-1}r++}}static createElement(e,t){const i=Xe.createElement("template");return i.innerHTML=e,i}}function lt(n,e,t=n,i){var o,r,s,u;if(e===ft)return e;let f=i!==void 0?(o=t._$Co)===null||o===void 0?void 0:o[i]:t._$Cl;const a=At(e)?void 0:e._$litDirective$;return(f==null?void 0:f.constructor)!==a&&((r=f==null?void 0:f._$AO)===null||r===void 0||r.call(f,!1),a===void 0?f=void 0:(f=new a(n),f._$AT(n,t,i)),i!==void 0?((s=(u=t)._$Co)!==null&&s!==void 0?s:u._$Co=[])[i]=f:t._$Cl=f),f!==void 0&&(e=lt(n,f._$AS(n,e.values),f,i)),e}class Qi{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t;const{el:{content:i},parts:o}=this._$AD,r=((t=e==null?void 0:e.creationScope)!==null&&t!==void 0?t:Xe).importNode(i,!0);Ye.currentNode=r;let s=Ye.nextNode(),u=0,f=0,a=o[0];for(;a!==void 0;){if(u===a.index){let c;a.type===2?c=new xt(s,s.nextSibling,this,e):a.type===1?c=new a.ctor(s,a.name,a.strings,this,e):a.type===6&&(c=new io(s,this,e)),this._$AV.push(c),a=o[++f]}u!==(a==null?void 0:a.index)&&(s=Ye.nextNode(),u++)}return Ye.currentNode=Xe,r}v(e){let t=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class xt{constructor(e,t,i,o){var r;this.type=2,this._$AH=ee,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=o,this._$Cp=(r=o==null?void 0:o.isConnected)===null||r===void 0||r}get _$AU(){var e,t;return(t=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&t!==void 0?t:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=lt(this,e,t),At(e)?e===ee||e==null||e===""?(this._$AH!==ee&&this._$AR(),this._$AH=ee):e!==this._$AH&&e!==ft&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):Ji(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==ee&&At(this._$AH)?this._$AA.nextSibling.data=e:this.$(Xe.createTextNode(e)),this._$AH=e}g(e){var t;const{values:i,_$litType$:o}=e,r=typeof o=="number"?this._$AC(e):(o.el===void 0&&(o.el=Ct.createElement(ci(o.h,o.h[0]),this.options)),o);if(((t=this._$AH)===null||t===void 0?void 0:t._$AD)===r)this._$AH.v(i);else{const s=new Qi(r,this),u=s.u(this.options);s.v(i),this.$(u),this._$AH=s}}_$AC(e){let t=_r.get(e.strings);return t===void 0&&_r.set(e.strings,t=new Ct(e)),t}T(e){si(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,o=0;for(const r of e)o===t.length?t.push(i=new xt(this.k(bt()),this.k(bt()),this,this.options)):i=t[o],i._$AI(r),o++;o<t.length&&(this._$AR(i&&i._$AB.nextSibling,o),t.length=o)}_$AR(e=this._$AA.nextSibling,t){var i;for((i=this._$AP)===null||i===void 0||i.call(this,!1,!0,t);e&&e!==this._$AB;){const o=e.nextSibling;e.remove(),e=o}}setConnected(e){var t;this._$AM===void 0&&(this._$Cp=e,(t=this._$AP)===null||t===void 0||t.call(this,e))}}class zt{constructor(e,t,i,o,r){this.type=1,this._$AH=ee,this._$AN=void 0,this.element=e,this.name=t,this._$AM=o,this.options=r,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=ee}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,i,o){const r=this.strings;let s=!1;if(r===void 0)e=lt(this,e,t,0),s=!At(e)||e!==this._$AH&&e!==ft,s&&(this._$AH=e);else{const u=e;let f,a;for(e=r[0],f=0;f<r.length-1;f++)a=lt(this,u[i+f],t,f),a===ft&&(a=this._$AH[f]),s||(s=!At(a)||a!==this._$AH[f]),a===ee?e=ee:e!==ee&&(e+=(a??"")+r[f+1]),this._$AH[f]=a}s&&!o&&this.j(e)}j(e){e===ee?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class eo extends zt{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===ee?void 0:e}}const to=ct?ct.emptyScript:"";class no extends zt{constructor(){super(...arguments),this.type=4}j(e){e&&e!==ee?this.element.setAttribute(this.name,to):this.element.removeAttribute(this.name)}}class ro extends zt{constructor(e,t,i,o,r){super(e,t,i,o,r),this.type=5}_$AI(e,t=this){var i;if((e=(i=lt(this,e,t,0))!==null&&i!==void 0?i:ee)===ft)return;const o=this._$AH,r=e===ee&&o!==ee||e.capture!==o.capture||e.once!==o.once||e.passive!==o.passive,s=e!==ee&&(o===ee||r);r&&this.element.removeEventListener(this.name,this,o),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,i;typeof this._$AH=="function"?this._$AH.call((i=(t=this.options)===null||t===void 0?void 0:t.host)!==null&&i!==void 0?i:this.element,e):this._$AH.handleEvent(e)}}class io{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){lt(this,e)}}const Sr=Bt.litHtmlPolyfillSupport;Sr==null||Sr(Ct,xt),((ln=Bt.litHtmlVersions)!==null&&ln!==void 0?ln:Bt.litHtmlVersions=[]).push("2.7.5");const oo=(n,e,t)=>{var i,o;const r=(i=t==null?void 0:t.renderBefore)!==null&&i!==void 0?i:e;let s=r._$litPart$;if(s===void 0){const u=(o=t==null?void 0:t.renderBefore)!==null&&o!==void 0?o:null;r._$litPart$=s=new xt(e.insertBefore(bt(),u),u,void 0,t??{})}return s._$AI(n),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var dn,gn;class at extends ot{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const i=super.createRenderRoot();return(e=(t=this.renderOptions).renderBefore)!==null&&e!==void 0||(t.renderBefore=i.firstChild),i}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=oo(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return ft}}at.finalized=!0,at._$litElement$=!0,(dn=globalThis.litElementHydrateSupport)===null||dn===void 0||dn.call(globalThis,{LitElement:at});const br=globalThis.litElementPolyfillSupport;br==null||br({LitElement:at});((gn=globalThis.litElementVersions)!==null&&gn!==void 0?gn:globalThis.litElementVersions=[]).push("3.3.2");var so="Logging",ao=globalThis&&globalThis.__values||function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},et=globalThis&&globalThis.__read||function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),o,r=[],s;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(s)throw s.error}}return r},tt=globalThis&&globalThis.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var i=0,o=e.length,r;i<o;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return n.concat(r||Array.prototype.slice.call(e))},Ar={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5},Ie;(function(n){n.DEBUG="DEBUG",n.ERROR="ERROR",n.INFO="INFO",n.WARN="WARN",n.VERBOSE="VERBOSE"})(Ie||(Ie={}));var Ee=function(){function n(e,t){t===void 0&&(t=Ie.WARN),this.name=e,this.level=t,this._pluggables=[]}return n.prototype._padding=function(e){return e<10?"0"+e:""+e},n.prototype._ts=function(){var e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()},n.prototype.configure=function(e){return e?(this._config=e,this._config):this._config},n.prototype._log=function(e){for(var t,i,o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];var s=this.level;n.LOG_LEVEL&&(s=n.LOG_LEVEL),typeof window<"u"&&window.LOG_LEVEL&&(s=window.LOG_LEVEL);var u=Ar[s],f=Ar[e];if(f>=u){var a=console.log.bind(console);e===Ie.ERROR&&console.error&&(a=console.error.bind(console)),e===Ie.WARN&&console.warn&&(a=console.warn.bind(console));var c="[".concat(e,"] ").concat(this._ts()," ").concat(this.name),d="";if(o.length===1&&typeof o[0]=="string")d="".concat(c," - ").concat(o[0]),a(d);else if(o.length===1)d="".concat(c," ").concat(o[0]),a(c,o[0]);else if(typeof o[0]=="string"){var v=o.slice(1);v.length===1&&(v=v[0]),d="".concat(c," - ").concat(o[0]," ").concat(v),a("".concat(c," - ").concat(o[0]),v)}else d="".concat(c," ").concat(o),a(c,o);try{for(var y=ao(this._pluggables),m=y.next();!m.done;m=y.next()){var _=m.value,b={message:d,timestamp:Date.now()};_.pushLogs([b])}}catch(E){t={error:E}}finally{try{m&&!m.done&&(i=y.return)&&i.call(y)}finally{if(t)throw t.error}}}},n.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,tt([Ie.INFO],et(e),!1))},n.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,tt([Ie.INFO],et(e),!1))},n.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,tt([Ie.WARN],et(e),!1))},n.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,tt([Ie.ERROR],et(e),!1))},n.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,tt([Ie.DEBUG],et(e),!1))},n.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,tt([Ie.VERBOSE],et(e),!1))},n.prototype.addPluggable=function(e){e&&e.getCategoryName()===so&&(this._pluggables.push(e),e.configure(this._config))},n.prototype.listPluggables=function(){return this._pluggables},n.LOG_LEVEL=null,n}(),uo=globalThis&&globalThis.__read||function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),o,r=[],s;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(s)throw s.error}}return r},pn=new Ee("Amplify"),co=function(){function n(){this._components=[],this._config={},this._modules={},this.Auth=null,this.Analytics=null,this.API=null,this.Credentials=null,this.Storage=null,this.I18n=null,this.Cache=null,this.PubSub=null,this.Interactions=null,this.Pushnotification=null,this.UI=null,this.XR=null,this.Predictions=null,this.DataStore=null,this.Geo=null,this.Notifications=null,this.Logger=Ee,this.ServiceWorker=null}return n.prototype.register=function(e){pn.debug("component registered in amplify",e),this._components.push(e),typeof e.getModuleName=="function"?(this._modules[e.getModuleName()]=e,this[e.getModuleName()]=e):pn.debug("no getModuleName method for component",e),e.configure(this._config)},n.prototype.configure=function(e){var t=this;return e?(this._config=Object.assign(this._config,e),pn.debug("amplify config",this._config),Object.entries(this._modules).forEach(function(i){var o=uo(i,2);o[0];var r=o[1];Object.keys(r).forEach(function(s){t._modules[s]&&(r[s]=t._modules[s])})}),this._components.map(function(i){i.configure(t._config)}),this._config):this._config},n.prototype.addPluggable=function(e){e&&e.getCategory&&typeof e.getCategory=="function"&&this._components.map(function(t){t.addPluggable&&typeof t.addPluggable=="function"&&t.addPluggable(e)})},n}(),Jn=new co,J;(function(n){n.WebUnknown="0",n.React="1",n.NextJs="2",n.Angular="3",n.VueJs="4",n.Nuxt="5",n.Svelte="6",n.ServerSideUnknown="100",n.ReactSSR="101",n.NextJsSSR="102",n.AngularSSR="103",n.VueJsSSR="104",n.NuxtSSR="105",n.SvelteSSR="106",n.ReactNative="201",n.Expo="202"})(J||(J={}));var Un;(function(n){n.API="api",n.Auth="auth",n.Analytics="analytics",n.DataStore="datastore",n.Geo="geo",n.InAppMessaging="inappmessaging",n.Interactions="interactions",n.Predictions="predictions",n.PubSub="pubsub",n.PushNotification="pushnotification",n.Storage="storage"})(Un||(Un={}));var Cr;(function(n){n.Record="1",n.UpdateEndpoint="2"})(Cr||(Cr={}));var Ir;(function(n){n.GraphQl="1",n.Get="2",n.Post="3",n.Put="4",n.Patch="5",n.Del="6",n.Head="7"})(Ir||(Ir={}));var xn;(function(n){n.FederatedSignIn="30"})(xn||(xn={}));var Er;(function(n){n.Subscribe="1",n.GraphQl="2"})(Er||(Er={}));var Tr;(function(n){n.None="0"})(Tr||(Tr={}));var Ur;(function(n){n.None="0"})(Ur||(Ur={}));var xr;(function(n){n.None="0"})(xr||(xr={}));var Pr;(function(n){n.Convert="1",n.Identify="2",n.Interpret="3"})(Pr||(Pr={}));var Rr;(function(n){n.Subscribe="1"})(Rr||(Rr={}));var Dr;(function(n){n.None="0"})(Dr||(Dr={}));var Or;(function(n){n.Put="1",n.Get="2",n.List="3",n.Copy="4",n.Remove="5",n.GetProperties="6"})(Or||(Or={}));var fi="5.3.4",Jt=function(){return typeof global<"u"},ht=function(){return typeof window<"u"},li=function(){return typeof document<"u"},Zn=function(){return typeof process<"u"},It=function(n,e){return!!Object.keys(n).find(function(t){return t.startsWith(e)})};function fo(){var n=function(i){return i.startsWith("_react")||i.startsWith("__react")},e=function(i){return Object.keys(i).find(n)},t=function(){return Array.from(document.querySelectorAll("[id]"))};return li()&&t().some(e)}function lo(){return Zn()&&typeof process.env<"u"&&!!Object.keys(process.env).find(function(n){return n.includes("react")})}function ho(){return ht()&&It(window,"__VUE")}function go(){return Jt()&&It(global,"__VUE")}function po(){return ht()&&It(window,"__SVELTE")}function vo(){return Zn()&&typeof process.env<"u"&&!!Object.keys(process.env).find(function(n){return n.includes("svelte")})}function yo(){return ht()&&window.next&&typeof window.next=="object"}function mo(){return Jt()&&(It(global,"__next")||It(global,"__NEXT"))}function wo(){return ht()&&(window.__NUXT__!==void 0||window.$nuxt!==void 0)}function _o(){return Jt()&&typeof global.__NUXT_PATHS__<"u"}function So(){var n=!!(li()&&document.querySelector("[ng-version]")),e=!!(ht()&&typeof window.ng<"u");return n||e}function bo(){var n;return Zn()&&typeof process.env=="object"&&((n=process.env.npm_lifecycle_script)===null||n===void 0?void 0:n.startsWith("ng "))||!1}function Ao(){return typeof navigator<"u"&&typeof navigator.product<"u"&&navigator.product==="ReactNative"}function Co(){return Jt()&&typeof global.expo<"u"}function Io(){return ht()}var Eo=[{platform:J.Expo,detectionMethod:Co},{platform:J.ReactNative,detectionMethod:Ao},{platform:J.NextJs,detectionMethod:yo},{platform:J.Nuxt,detectionMethod:wo},{platform:J.Angular,detectionMethod:So},{platform:J.React,detectionMethod:fo},{platform:J.VueJs,detectionMethod:ho},{platform:J.Svelte,detectionMethod:po},{platform:J.WebUnknown,detectionMethod:Io},{platform:J.NextJsSSR,detectionMethod:mo},{platform:J.NuxtSSR,detectionMethod:_o},{platform:J.ReactSSR,detectionMethod:lo},{platform:J.VueJsSSR,detectionMethod:go},{platform:J.AngularSSR,detectionMethod:bo},{platform:J.SvelteSSR,detectionMethod:vo}];function To(){var n;return((n=Eo.find(function(e){return e.detectionMethod()}))===null||n===void 0?void 0:n.platform)||J.ServerSideUnknown}var mt,hi=[],Fr=!1,Uo=10,xo=10,Po=1e3,Xn=function(){return mt||(mt=To(),hi.forEach(function(n){return n()}),kr(J.ServerSideUnknown,Uo),kr(J.WebUnknown,xo)),mt},di=function(n){hi.push(n)};function Ro(){mt=void 0}function kr(n,e){mt===n&&!Fr&&setTimeout(function(){Ro(),Fr=!0,setTimeout(Xn,Po)},e)}var Do=globalThis&&globalThis.__read||function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),o,r=[],s;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(s)throw s.error}}return r},gi="aws-amplify",Oo=function(){function n(){this.userAgent="".concat(gi,"/").concat(fi)}return Object.defineProperty(n.prototype,"framework",{get:function(){return Xn()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isReactNative",{get:function(){return this.framework===J.ReactNative||this.framework===J.Expo},enumerable:!1,configurable:!0}),n.prototype.observeFrameworkChanges=function(e){di(e)},n}(),vn=new Oo,Fo=function(n){var e=n===void 0?{}:n,t=e.category,i=e.action;e.framework;var o=[[gi,fi]];return t&&o.push([t,i]),o.push(["framework",Xn()]),o},Qn=function(n){var e=Fo(n),t=e.map(function(i){var o=Do(i,2),r=o[0],s=o[1];return"".concat(r,"/").concat(s)}).join(" ");return t},wt=globalThis&&globalThis.__assign||function(){return wt=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},wt.apply(this,arguments)},yn=globalThis&&globalThis.__read||function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),o,r=[],s;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(s)throw s.error}}return r},Mr=globalThis&&globalThis.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var i=0,o=e.length,r;i<o;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return n.concat(r||Array.prototype.slice.call(e))},Pe=new Ee("Hub"),ko=typeof Symbol<"u"&&typeof Symbol.for=="function"?Symbol.for("amplify_default"):"@@amplify_default";function Mo(n){return n.onHubCapsule!==void 0}var No=function(){function n(e){this.listeners=[],this.patterns=[],this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=e}return n.prototype._remove=function(e,t){if(e instanceof RegExp){var i=this.patterns.find(function(r){var s=r.pattern;return s.source===e.source});if(!i){Pe.warn("No listeners for ".concat(e));return}this.patterns=Mr([],yn(this.patterns.filter(function(r){return r!==i})),!1)}else{var o=this.listeners[e];if(!o){Pe.warn("No listeners for ".concat(e));return}this.listeners[e]=Mr([],yn(o.filter(function(r){var s=r.callback;return s!==t})),!1)}},n.prototype.remove=function(e,t){this._remove(e,t)},n.prototype.dispatch=function(e,t,i,o){if(i===void 0&&(i=""),this.protectedChannels.indexOf(e)>-1){var r=o===ko;r||Pe.warn("WARNING: ".concat(e," is protected and dispatching on it can have unintended consequences"))}var s={channel:e,payload:wt({},t),source:i,patternInfo:[]};try{this._toListeners(s)}catch(u){Pe.error(u)}},n.prototype.listen=function(e,t,i){var o=this;i===void 0&&(i="noname");var r;if(Mo(t))Pe.warn("WARNING onHubCapsule is Deprecated. Please pass in a callback."),r=t.onHubCapsule.bind(t);else{if(typeof t!="function")throw new Error("No callback supplied to Hub");r=t}if(e instanceof RegExp)this.patterns.push({pattern:e,callback:r});else{var s=this.listeners[e];s||(s=[],this.listeners[e]=s),s.push({name:i,callback:r})}return function(){o._remove(e,r)}},n.prototype._toListeners=function(e){var t=e.channel,i=e.payload,o=this.listeners[t];if(o&&o.forEach(function(s){Pe.debug("Dispatching to ".concat(t," with "),i);try{s.callback(e)}catch(u){Pe.error(u)}}),this.patterns.length>0){if(!i.message){Pe.warn("Cannot perform pattern matching without a message key");return}var r=i.message;this.patterns.forEach(function(s){var u=r.match(s.pattern);if(u){var f=yn(u),a=f.slice(1),c=wt(wt({},e),{patternInfo:a});try{s.callback(c)}catch(d){Pe.error(d)}}})}},n}(),De=new No("__default__"),$o=function(n){if(n.isResolved)return n;var e=!0,t=!1,i=!1,o=n.then(function(r){return i=!0,e=!1,r},function(r){throw t=!0,e=!1,r});return o.isFullfilled=function(){return i},o.isPending=function(){return e},o.isRejected=function(){return t},o},ke=function(){var n=typeof window<"u"&&typeof window.document<"u",e=typeof process<"u"&&process.versions!=null&&process.versions.node!=null;return{isBrowser:n,isNode:e}},Bo=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(i[r]=o[r])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Nr=globalThis&&globalThis.__awaiter||function(n,e,t,i){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function u(c){try{a(i.next(c))}catch(d){s(d)}}function f(c){try{a(i.throw(c))}catch(d){s(d)}}function a(c){c.done?r(c.value):o(c.value).then(u,f)}a((i=i.apply(n,e||[])).next())})},mn=globalThis&&globalThis.__generator||function(n,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,o,r,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(t=0)),t;)try{if(i=1,o&&(r=a[0]&2?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){t.label=a[1];break}if(a[0]===6&&t.label<r[1]){t.label=r[1],r=a;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(a);break}r[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(n,t)}catch(c){a=[6,c],o=0}finally{i=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Lo=globalThis&&globalThis.__read||function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),o,r=[],s;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(s)throw s.error}}return r},jo=globalThis&&globalThis.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var i=0,o=e.length,r;i<o;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return n.concat(r||Array.prototype.slice.call(e))},Rt=new Ee("Util"),ze=function(n){Bo(e,n);function e(t){var i=n.call(this,t)||this;return i.nonRetryable=!0,i}return e}(Error),Ko=function(n){var e="nonRetryable";return n&&n[e]};function Vo(n,e,t,i){return Nr(this,void 0,void 0,function(){var o=this;return mn(this,function(r){if(typeof n!="function")throw Error("functionToRetry must be a function");return[2,new Promise(function(s,u){return Nr(o,void 0,void 0,function(){var f,a,c,d,v,y,m;return mn(this,function(_){switch(_.label){case 0:f=0,a=!1,d=function(){},i&&i.then(function(){a=!0,clearTimeout(c),d()}),y=function(){var b,E,S,T;return mn(this,function(x){switch(x.label){case 0:f++,Rt.debug("".concat(n.name," attempt #").concat(f," with this vars: ").concat(JSON.stringify(e))),x.label=1;case 1:return x.trys.push([1,3,,7]),b={},E=s,[4,n.apply(void 0,jo([],Lo(e),!1))];case 2:return[2,(b.value=E.apply(void 0,[x.sent()]),b)];case 3:return S=x.sent(),v=S,Rt.debug("error on ".concat(n.name),S),Ko(S)?(Rt.debug("".concat(n.name," non retryable error"),S),[2,{value:u(S)}]):(T=t(f,e,S),Rt.debug("".concat(n.name," retrying in ").concat(T," ms")),T===!1||a?[2,{value:u(S)}]:[3,4]);case 4:return[4,new Promise(function(D){d=D,c=setTimeout(d,T)})];case 5:x.sent(),x.label=6;case 6:return[3,7];case 7:return[2]}})},_.label=1;case 1:return a?[3,3]:[5,y()];case 2:return m=_.sent(),typeof m=="object"?[2,m.value]:[3,1];case 3:return u(v),[2]}})})})]})})}var pi=5*60*1e3;function vi(n){n===void 0&&(n=pi);var e=100,t=100;return function(i){var o=Math.pow(2,i)*e+t*Math.random();return o>n?!1:o}}var Ho=function(n,e,t,i){return t===void 0&&(t=pi),Vo(n,e,vi(t),i)},_t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function er(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var o=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:function(){return n[i]}})}),t}function qo(n){return n.split("").map(function(e){return e.charCodeAt(0).toString(16).padStart(2,"0")}).join("")}function Go(n){return n.match(/.{2}/g).map(function(e){return String.fromCharCode(parseInt(e,16))}).join("")}var Ze={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Pn=function(n,e){return Pn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])},Pn(n,e)};function Wo(n,e){Pn(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Rn=function(){return Rn=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Rn.apply(this,arguments)};function Yo(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function zo(n,e,t,i){var o=arguments.length,r=o<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var u=n.length-1;u>=0;u--)(s=n[u])&&(r=(o<3?s(r):o>3?s(e,t,r):s(e,t))||r);return o>3&&r&&Object.defineProperty(e,t,r),r}function Jo(n,e){return function(t,i){e(t,i,n)}}function Zo(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function Xo(n,e,t,i){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function u(c){try{a(i.next(c))}catch(d){s(d)}}function f(c){try{a(i.throw(c))}catch(d){s(d)}}function a(c){c.done?r(c.value):o(c.value).then(u,f)}a((i=i.apply(n,e||[])).next())})}function Qo(n,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,o,r,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,o&&(r=a[0]&2?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){t.label=a[1];break}if(a[0]===6&&t.label<r[1]){t.label=r[1],r=a;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(a);break}r[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(n,t)}catch(c){a=[6,c],o=0}finally{i=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function es(n,e,t,i){i===void 0&&(i=t),n[i]=e[t]}function ts(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function Dn(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function yi(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),o,r=[],s;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(s)throw s.error}}return r}function ns(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(yi(arguments[e]));return n}function rs(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var i=Array(n),o=0,e=0;e<t;e++)for(var r=arguments[e],s=0,u=r.length;s<u;s++,o++)i[o]=r[s];return i}function Et(n){return this instanceof Et?(this.v=n,this):new Et(n)}function is(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,r=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(v){i[v]&&(o[v]=function(y){return new Promise(function(m,_){r.push([v,y,m,_])>1||u(v,y)})})}function u(v,y){try{f(i[v](y))}catch(m){d(r[0][3],m)}}function f(v){v.value instanceof Et?Promise.resolve(v.value.v).then(a,c):d(r[0][2],v)}function a(v){u("next",v)}function c(v){u("throw",v)}function d(v,y){v(y),r.shift(),r.length&&u(r[0][0],r[0][1])}}function os(n){var e,t;return e={},i("next"),i("throw",function(o){throw o}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(o,r){e[o]=n[o]?function(s){return(t=!t)?{value:Et(n[o](s)),done:o==="return"}:r?r(s):s}:r}}function ss(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Dn=="function"?Dn(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=n[r]&&function(s){return new Promise(function(u,f){s=n[r](s),o(u,f,s.done,s.value)})}}function o(r,s,u,f){Promise.resolve(f).then(function(a){r({value:a,done:u})},s)}}function as(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function us(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function cs(n){return n&&n.__esModule?n:{default:n}}function fs(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function ls(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}const hs=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Rn},__asyncDelegator:os,__asyncGenerator:is,__asyncValues:ss,__await:Et,__awaiter:Xo,__classPrivateFieldGet:fs,__classPrivateFieldSet:ls,__createBinding:es,__decorate:zo,__exportStar:ts,__extends:Wo,__generator:Qo,__importDefault:cs,__importStar:us,__makeTemplateObject:as,__metadata:Zo,__param:Jo,__read:yi,__rest:Yo,__spread:ns,__spreadArrays:rs,__values:Dn},Symbol.toStringTag,{value:"Module"})),mi=er(hs);var Zt={},pe={};Object.defineProperty(pe,"__esModule",{value:!0});pe.MAX_HASHABLE_LENGTH=pe.INIT=pe.KEY=pe.DIGEST_LENGTH=pe.BLOCK_SIZE=void 0;pe.BLOCK_SIZE=64;pe.DIGEST_LENGTH=32;pe.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);pe.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];pe.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1;var Xt={};Object.defineProperty(Xt,"__esModule",{value:!0});Xt.RawSha256=void 0;var me=pe,ds=function(){function n(){this.state=Int32Array.from(me.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return n.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,i=e.byteLength;if(this.bytesHashed+=i,this.bytesHashed*8>me.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;i>0;)this.buffer[this.bufferLength++]=e[t++],i--,this.bufferLength===me.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},n.prototype.digest=function(){if(!this.finished){var e=this.bytesHashed*8,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),i=this.bufferLength;if(t.setUint8(this.bufferLength++,128),i%me.BLOCK_SIZE>=me.BLOCK_SIZE-8){for(var o=this.bufferLength;o<me.BLOCK_SIZE;o++)t.setUint8(o,0);this.hashBuffer(),this.bufferLength=0}for(var o=this.bufferLength;o<me.BLOCK_SIZE-8;o++)t.setUint8(o,0);t.setUint32(me.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(me.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}for(var r=new Uint8Array(me.DIGEST_LENGTH),o=0;o<8;o++)r[o*4]=this.state[o]>>>24&255,r[o*4+1]=this.state[o]>>>16&255,r[o*4+2]=this.state[o]>>>8&255,r[o*4+3]=this.state[o]>>>0&255;return r},n.prototype.hashBuffer=function(){for(var e=this,t=e.buffer,i=e.state,o=i[0],r=i[1],s=i[2],u=i[3],f=i[4],a=i[5],c=i[6],d=i[7],v=0;v<me.BLOCK_SIZE;v++){if(v<16)this.temp[v]=(t[v*4]&255)<<24|(t[v*4+1]&255)<<16|(t[v*4+2]&255)<<8|t[v*4+3]&255;else{var y=this.temp[v-2],m=(y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10;y=this.temp[v-15];var _=(y>>>7|y<<25)^(y>>>18|y<<14)^y>>>3;this.temp[v]=(m+this.temp[v-7]|0)+(_+this.temp[v-16]|0)}var b=(((f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(f&a^~f&c)|0)+(d+(me.KEY[v]+this.temp[v]|0)|0)|0,E=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&r^o&s^r&s)|0;d=c,c=a,a=f,f=u+b|0,u=s,s=r,r=o,o=b+E|0}i[0]+=o,i[1]+=r,i[2]+=s,i[3]+=u,i[4]+=f,i[5]+=a,i[6]+=c,i[7]+=d},n}();Xt.RawSha256=ds;var wi={},Qt={},gs=function(n){for(var e=[],t=0,i=n.length;t<i;t++){var o=n.charCodeAt(t);if(o<128)e.push(o);else if(o<2048)e.push(o>>6|192,o&63|128);else if(t+1<n.length&&(o&64512)===55296&&(n.charCodeAt(t+1)&64512)===56320){var r=65536+((o&1023)<<10)+(n.charCodeAt(++t)&1023);e.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else e.push(o>>12|224,o>>6&63|128,o&63|128)}return Uint8Array.from(e)},ps=function(n){for(var e="",t=0,i=n.length;t<i;t++){var o=n[t];if(o<128)e+=String.fromCharCode(o);else if(192<=o&&o<224){var r=n[++t];e+=String.fromCharCode((o&31)<<6|r&63)}else if(240<=o&&o<365){var s=[o,n[++t],n[++t],n[++t]],u="%"+s.map(function(f){return f.toString(16)}).join("%");e+=decodeURIComponent(u)}else e+=String.fromCharCode((o&15)<<12|(n[++t]&63)<<6|n[++t]&63)}return e};function vs(n){return new TextEncoder().encode(n)}function ys(n){return new TextDecoder("utf-8").decode(n)}var ms=function(n){return typeof TextEncoder=="function"?vs(n):gs(n)},ws=function(n){return typeof TextDecoder=="function"?ys(n):ps(n)};const _s=Object.freeze(Object.defineProperty({__proto__:null,fromUtf8:ms,toUtf8:ws},Symbol.toStringTag,{value:"Module"})),Ss=er(_s);Object.defineProperty(Qt,"__esModule",{value:!0});Qt.convertToBuffer=void 0;var bs=Ss,As=typeof Buffer<"u"&&Buffer.from?function(n){return Buffer.from(n,"utf8")}:bs.fromUtf8;function Cs(n){return n instanceof Uint8Array?n:typeof n=="string"?As(n):ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(n)}Qt.convertToBuffer=Cs;var en={};Object.defineProperty(en,"__esModule",{value:!0});en.isEmptyData=void 0;function Is(n){return typeof n=="string"?n.length===0:n.byteLength===0}en.isEmptyData=Is;var tn={};Object.defineProperty(tn,"__esModule",{value:!0});tn.numToUint8=void 0;function Es(n){return new Uint8Array([(n&4278190080)>>24,(n&16711680)>>16,(n&65280)>>8,n&255])}tn.numToUint8=Es;var nn={};Object.defineProperty(nn,"__esModule",{value:!0});nn.uint32ArrayFrom=void 0;function Ts(n){if(!Array.from){for(var e=new Uint32Array(n.length),t=0;t<n.length;)e[t]=n[t];return e}return Uint32Array.from(n)}nn.uint32ArrayFrom=Ts;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.uint32ArrayFrom=n.numToUint8=n.isEmptyData=n.convertToBuffer=void 0;var e=Qt;Object.defineProperty(n,"convertToBuffer",{enumerable:!0,get:function(){return e.convertToBuffer}});var t=en;Object.defineProperty(n,"isEmptyData",{enumerable:!0,get:function(){return t.isEmptyData}});var i=tn;Object.defineProperty(n,"numToUint8",{enumerable:!0,get:function(){return i.numToUint8}});var o=nn;Object.defineProperty(n,"uint32ArrayFrom",{enumerable:!0,get:function(){return o.uint32ArrayFrom}})})(wi);Object.defineProperty(Zt,"__esModule",{value:!0});Zt.Sha256=void 0;var $r=mi,Lt=pe,On=Xt,Fn=wi,Us=function(){function n(e){if(this.hash=new On.RawSha256,e){this.outer=new On.RawSha256;var t=xs(e),i=new Uint8Array(Lt.BLOCK_SIZE);i.set(t);for(var o=0;o<Lt.BLOCK_SIZE;o++)t[o]^=54,i[o]^=92;this.hash.update(t),this.outer.update(i);for(var o=0;o<t.byteLength;o++)t[o]=0}}return n.prototype.update=function(e){if(!((0,Fn.isEmptyData)(e)||this.error))try{this.hash.update((0,Fn.convertToBuffer)(e))}catch(t){this.error=t}},n.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},n.prototype.digest=function(){return(0,$r.__awaiter)(this,void 0,void 0,function(){return(0,$r.__generator)(this,function(e){return[2,this.digestSync()]})})},n}();Zt.Sha256=Us;function xs(n){var e=(0,Fn.convertToBuffer)(n);if(e.byteLength>Lt.BLOCK_SIZE){var t=new On.RawSha256;t.update(e),e=t.digest()}var i=new Uint8Array(Lt.BLOCK_SIZE);return i.set(e),i}(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=mi;(0,e.__exportStar)(Zt,n)})(Ze);var jt=globalThis&&globalThis.__assign||function(){return jt=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},jt.apply(this,arguments)},Ps=new Ee("Parser"),_i=function(n){var e={};if(n.aws_mobile_analytics_app_id){var t={AWSPinpoint:{appId:n.aws_mobile_analytics_app_id,region:n.aws_mobile_analytics_app_region}};e.Analytics=t}(n.aws_cognito_identity_pool_id||n.aws_user_pools_id)&&(e.Auth={userPoolId:n.aws_user_pools_id,userPoolWebClientId:n.aws_user_pools_web_client_id,region:n.aws_cognito_region,identityPoolId:n.aws_cognito_identity_pool_id,identityPoolRegion:n.aws_cognito_region,mandatorySignIn:n.aws_mandatory_sign_in==="enable",signUpVerificationMethod:n.aws_cognito_sign_up_verification_method||"code"});var i;return n.aws_user_files_s3_bucket?i={AWSS3:{bucket:n.aws_user_files_s3_bucket,region:n.aws_user_files_s3_bucket_region,dangerouslyConnectToHttpEndpointForTesting:n.aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing}}:i=n?n.Storage||n:{},n.Logging&&(e.Logging=jt(jt({},n.Logging),{region:n.aws_project_region})),n.geo&&(e.Geo=Object.assign({},n.geo),n.geo.amazon_location_service&&(e.Geo={AmazonLocationService:n.geo.amazon_location_service})),e.Analytics=Object.assign({},e.Analytics,n.Analytics),e.Auth=Object.assign({},e.Auth,n.Auth),e.Storage=Object.assign({},i),e.Logging=Object.assign({},e.Logging,n.Logging),Ps.debug("parse config",n,"to amplifyconfig",e),e},Rs=globalThis&&globalThis.__awaiter||function(n,e,t,i){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function u(c){try{a(i.next(c))}catch(d){s(d)}}function f(c){try{a(i.throw(c))}catch(d){s(d)}}function a(c){c.done?r(c.value):o(c.value).then(u,f)}a((i=i.apply(n,e||[])).next())})},Ds=globalThis&&globalThis.__generator||function(n,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,o,r,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(t=0)),t;)try{if(i=1,o&&(r=a[0]&2?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){t.label=a[1];break}if(a[0]===6&&t.label<r[1]){t.label=r[1],r=a;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(a);break}r[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(n,t)}catch(c){a=[6,c],o=0}finally{i=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},$e=new Ee("CognitoCredentials"),Os=new Promise(function(n,e){if(!ke().isBrowser)return $e.debug("not in the browser, directly resolved"),n();var t=window.gapi&&window.gapi.auth2?window.gapi.auth2:null;if(t)return $e.debug("google api already loaded"),n();setTimeout(function(){return n()},2e3)}),Fs=function(){function n(){this.initialized=!1,this.refreshGoogleToken=this.refreshGoogleToken.bind(this),this._refreshGoogleTokenImpl=this._refreshGoogleTokenImpl.bind(this)}return n.prototype.refreshGoogleToken=function(){return Rs(this,void 0,void 0,function(){return Ds(this,function(e){switch(e.label){case 0:return this.initialized?[3,2]:($e.debug("need to wait for the Google SDK loaded"),[4,Os]);case 1:e.sent(),this.initialized=!0,$e.debug("finish waiting"),e.label=2;case 2:return[2,this._refreshGoogleTokenImpl()]}})})},n.prototype._refreshGoogleTokenImpl=function(){var e=null;return ke().isBrowser&&(e=window.gapi&&window.gapi.auth2?window.gapi.auth2:null),e?new Promise(function(t,i){e.getAuthInstance().then(function(o){o||($e.debug("google Auth undefined"),i(new ze("google Auth undefined")));var r=o.currentUser.get();r.isSignedIn()?($e.debug("refreshing the google access token"),r.reloadAuthResponse().then(function(s){var u=s.id_token,f=s.expires_at;t({token:u,expires_at:f})}).catch(function(s){s&&s.error==="network_error"?i("Network error reloading google auth response"):i(new ze("Failed to reload google auth response"))})):i(new ze("User is not signed in with Google"))}).catch(function(o){$e.debug("Failed to refresh google token",o),i(new ze("Failed to refresh google token"))})}):($e.debug("no gapi auth2 available"),Promise.reject("no gapi auth2 available"))},n}(),ks=globalThis&&globalThis.__awaiter||function(n,e,t,i){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function u(c){try{a(i.next(c))}catch(d){s(d)}}function f(c){try{a(i.throw(c))}catch(d){s(d)}}function a(c){c.done?r(c.value):o(c.value).then(u,f)}a((i=i.apply(n,e||[])).next())})},Ms=globalThis&&globalThis.__generator||function(n,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,o,r,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(t=0)),t;)try{if(i=1,o&&(r=a[0]&2?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){t.label=a[1];break}if(a[0]===6&&t.label<r[1]){t.label=r[1],r=a;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(a);break}r[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(n,t)}catch(c){a=[6,c],o=0}finally{i=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Ge=new Ee("CognitoCredentials"),Ns=new Promise(function(n,e){if(!ke().isBrowser)return Ge.debug("not in the browser, directly resolved"),n();var t=window.FB;if(t)return Ge.debug("FB SDK already loaded"),n();setTimeout(function(){return n()},2e3)}),$s=function(){function n(){this.initialized=!1,this.refreshFacebookToken=this.refreshFacebookToken.bind(this),this._refreshFacebookTokenImpl=this._refreshFacebookTokenImpl.bind(this)}return n.prototype.refreshFacebookToken=function(){return ks(this,void 0,void 0,function(){return Ms(this,function(e){switch(e.label){case 0:return this.initialized?[3,2]:(Ge.debug("need to wait for the Facebook SDK loaded"),[4,Ns]);case 1:e.sent(),this.initialized=!0,Ge.debug("finish waiting"),e.label=2;case 2:return[2,this._refreshFacebookTokenImpl()]}})})},n.prototype._refreshFacebookTokenImpl=function(){var e=null;if(ke().isBrowser&&(e=window.FB),!e){var t="no fb sdk available";return Ge.debug(t),Promise.reject(new ze(t))}return new Promise(function(i,o){e.getLoginStatus(function(r){if(!r||!r.authResponse){var s="no response from facebook when refreshing the jwt token";Ge.debug(s),o(new ze(s))}else{var u=r.authResponse,f=u.accessToken,a=u.expiresIn,c=new Date,d=a*1e3+c.getTime();if(!f){var s="the jwtToken is undefined";Ge.debug(s),o(new ze(s))}i({token:f,expires_at:d})}},{scope:"public_profile,email"})})},n}(),Bs=new Fs,Ls=new $s,He={},js=function(){function n(){}return n.setItem=function(e,t){return He[e]=t,He[e]},n.getItem=function(e){return Object.prototype.hasOwnProperty.call(He,e)?He[e]:void 0},n.removeItem=function(e){return delete He[e]},n.clear=function(){return He={},He},n}(),Si=function(){function n(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.amplify.test-ls",1),this.storageWindow.removeItem("aws.amplify.test-ls")}catch{this.storageWindow=js}}return n.prototype.getStorage=function(){return this.storageWindow},n}(),bi={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},Ks={partitions:[bi,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]},Vs=globalThis&&globalThis.__values||function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hs=function(n){var e,t,i=Ks.partitions;try{for(var o=Vs(i),r=o.next();!r.done;r=o.next()){var s=r.value,u=s.regions,f=s.outputs,a=s.regionRegex,c=new RegExp(a);if(u.includes(n)||c.test(n))return f.dnsSuffix}}catch(d){e={error:d}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return bi.outputs.dnsSuffix};function qs(n,e){return e=e||{},new Promise(function(t,i){var o=new XMLHttpRequest,r=[],s=[],u={},f=function(){return{ok:(o.status/100|0)==2,statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:f,headers:{keys:function(){return r},entries:function(){return s},get:function(c){return u[c.toLowerCase()]},has:function(c){return c.toLowerCase()in u}}}};for(var a in o.open(e.method||"get",n,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(c,d,v){r.push(d=d.toLowerCase()),s.push([d,v]),u[d]=u[d]?u[d]+","+v:v}),t(f())},o.onerror=i,o.withCredentials=e.credentials=="include",e.headers)o.setRequestHeader(a,e.headers[a]);o.send(e.body||null)})}const Gs=Object.freeze(Object.defineProperty({__proto__:null,default:qs},Symbol.toStringTag,{value:"Module"})),Br=er(Gs);self.fetch||(self.fetch=Br.default||Br);var wn=function(n){var e;return function(){return e||(e=n()),e}},Kt=globalThis&&globalThis.__assign||function(){return Kt=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Kt.apply(this,arguments)},Ws=globalThis&&globalThis.__awaiter||function(n,e,t,i){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function u(c){try{a(i.next(c))}catch(d){s(d)}}function f(c){try{a(i.throw(c))}catch(d){s(d)}}function a(c){c.done?r(c.value):o(c.value).then(u,f)}a((i=i.apply(n,e||[])).next())})},Ys=globalThis&&globalThis.__generator||function(n,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,o,r,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(t=0)),t;)try{if(i=1,o&&(r=a[0]&2?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){t.label=a[1];break}if(a[0]===6&&t.label<r[1]){t.label=r[1],r=a;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(a);break}r[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(n,t)}catch(c){a=[6,c],o=0}finally{i=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},zs=function(n){return!["HEAD","GET","DELETE"].includes(n.toUpperCase())},Js=function(n,e){var t=n.url,i=n.method,o=n.headers,r=n.body,s=e.abortSignal;return Ws(void 0,void 0,void 0,function(){var u,f,a,c,d,v,y;return Ys(this,function(m){switch(m.label){case 0:return m.trys.push([0,2,,3]),[4,fetch(t,{method:i,headers:o,body:zs(i)?r:void 0,signal:s})];case 1:return u=m.sent(),[3,3];case 2:throw f=m.sent(),f instanceof TypeError?new Error("Network error"):f;case 3:return a={},(v=u.headers)===null||v===void 0||v.forEach(function(_,b){a[b.toLowerCase()]=_}),c={statusCode:u.status,headers:a,body:null},d=Object.assign((y=u.body)!==null&&y!==void 0?y:{},{text:wn(function(){return u.text()}),blob:wn(function(){return u.blob()}),json:wn(function(){return u.json()})}),[2,Kt(Kt({},c),{body:d})]}})})},Vt=globalThis&&globalThis.__assign||function(){return Vt=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Vt.apply(this,arguments)},Zs=globalThis&&globalThis.__awaiter||function(n,e,t,i){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function u(c){try{a(i.next(c))}catch(d){s(d)}}function f(c){try{a(i.throw(c))}catch(d){s(d)}}function a(c){c.done?r(c.value):o(c.value).then(u,f)}a((i=i.apply(n,e||[])).next())})},Xs=globalThis&&globalThis.__generator||function(n,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,o,r,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(t=0)),t;)try{if(i=1,o&&(r=a[0]&2?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){t.label=a[1];break}if(a[0]===6&&t.label<r[1]){t.label=r[1],r=a;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(a);break}r[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(n,t)}catch(c){a=[6,c],o=0}finally{i=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Qs=3,ea=function(n){var e=n.maxAttempts,t=e===void 0?Qs:e,i=n.retryDecider,o=n.computeDelay,r=n.abortSignal;if(t<1)throw new Error("maxAttempts must be greater than 0");return function(s,u){return function(a){var c;return Zs(this,void 0,void 0,function(){var d,v,y,m,_,b;return Xs(this,function(E){switch(E.label){case 0:v=(c=u.attemptsCount)!==null&&c!==void 0?c:0,m=function(){if(y)return Lr(y,v),y;throw Lr(d,v),d},E.label=1;case 1:if(!(!(r!=null&&r.aborted)&&v<t))return[3,11];E.label=2;case 2:return E.trys.push([2,4,,5]),[4,s(a)];case 3:return y=E.sent(),d=void 0,[3,5];case 4:return _=E.sent(),d=_,y=void 0,[3,5];case 5:return v=u.attemptsCount>v?u.attemptsCount:v+1,u.attemptsCount=v,[4,i(y,d)];case 6:return E.sent()?!(r!=null&&r.aborted)&&v<t?(b=o(v),[4,ta(b,r)]):[3,8]:[3,9];case 7:E.sent(),E.label=8;case 8:return[3,1];case 9:return[2,m()];case 10:return[3,1];case 11:if(r!=null&&r.aborted)throw new Error("Request aborted.");return[2,m()]}})})}}},ta=function(n,e){if(e!=null&&e.aborted)return Promise.resolve();var t,i,o=new Promise(function(r){i=r,t=setTimeout(r,n)});return e==null||e.addEventListener("abort",function r(s){clearTimeout(t),e==null||e.removeEventListener("abort",r),i()}),o},Lr=function(n,e){var t;Object.prototype.toString.call(n)==="[object Object]"&&(n.$metadata=Vt(Vt({},(t=n.$metadata)!==null&&t!==void 0?t:{}),{attempts:e}))},jr=5*60*1e3,na=function(n){var e=vi(jr),t=e(n);return t===!1?jr:t},ra=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],ia=function(n){return ra.includes(n)},oa=globalThis&&globalThis.__awaiter||function(n,e,t,i){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function u(c){try{a(i.next(c))}catch(d){s(d)}}function f(c){try{a(i.throw(c))}catch(d){s(d)}}function a(c){c.done?r(c.value):o(c.value).then(u,f)}a((i=i.apply(n,e||[])).next())})},sa=globalThis&&globalThis.__generator||function(n,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,o,r,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(t=0)),t;)try{if(i=1,o&&(r=a[0]&2?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){t.label=a[1];break}if(a[0]===6&&t.label<r[1]){t.label=r[1],r=a;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(a);break}r[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(n,t)}catch(c){a=[6,c],o=0}finally{i=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},aa=function(n){return function(e,t){return oa(void 0,void 0,void 0,function(){var i,o,r,s;return sa(this,function(u){switch(u.label){case 0:return t==null?[3,1]:(o=t,[3,3]);case 1:return[4,n(e)];case 2:o=u.sent(),u.label=3;case 3:return i=((s=o)!==null&&s!==void 0?s:{}).name,r=e==null?void 0:e.statusCode,[2,la(t)||fa(r,i)||ia(i)||ha(r,i)]}})})}},ua=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],ca=["TimeoutError","RequestTimeout","RequestTimeoutException"],fa=function(n,e){return n===429||ua.includes(e)},la=function(n){return(n==null?void 0:n.name)==="Network error"},ha=function(n,e){return[500,502,503,504].includes(n)||ca.includes(e)},da=globalThis&&globalThis.__awaiter||function(n,e,t,i){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function u(c){try{a(i.next(c))}catch(d){s(d)}}function f(c){try{a(i.throw(c))}catch(d){s(d)}}function a(c){c.done?r(c.value):o(c.value).then(u,f)}a((i=i.apply(n,e||[])).next())})},ga=globalThis&&globalThis.__generator||function(n,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,o,r,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(t=0)),t;)try{if(i=1,o&&(r=a[0]&2?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){t.label=a[1];break}if(a[0]===6&&t.label<r[1]){t.label=r[1],r=a;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(a);break}r[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(n,t)}catch(c){a=[6,c],o=0}finally{i=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},pa=function(n){var e=n.userAgentHeader,t=e===void 0?"x-amz-user-agent":e,i=n.userAgentValue,o=i===void 0?"":i;return function(r){return function(u){return da(this,void 0,void 0,function(){var f,a,c;return ga(this,function(d){switch(d.label){case 0:return o.trim().length!==0?[3,2]:[4,r(u)];case 1:return f=d.sent(),[2,f];case 2:return a=t.toLowerCase(),u.headers[a]=u.headers[a]?"".concat(u.headers[a]," ").concat(o):o,[4,r(u)];case 3:return c=d.sent(),[2,c]}})})}}},Ai=function(n,e){return function(t,i){for(var o={},r=function(a){return n(a,i)},s=e.length-1;s>=0;s--){var u=e[s],f=u(i);r=f(r,o)}return r(t)}},va=Ai(Js,[pa,ea]),Ht=globalThis&&globalThis.__assign||function(){return Ht=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Ht.apply(this,arguments)},rn=function(n){var e,t,i=n.headers,o=n.statusCode;return Ht(Ht({},ya(n)?n.$metadata:{}),{httpStatusCode:o,requestId:(t=(e=i["x-amzn-requestid"])!==null&&e!==void 0?e:i["x-amzn-request-id"])!==null&&t!==void 0?t:i["x-amz-request-id"],extendedRequestId:i["x-amz-id-2"],cfId:i["x-amz-cf-id"]})},ya=function(n){return typeof(n==null?void 0:n.$metadata)=="object"},Ci=globalThis&&globalThis.__awaiter||function(n,e,t,i){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function u(c){try{a(i.next(c))}catch(d){s(d)}}function f(c){try{a(i.throw(c))}catch(d){s(d)}}function a(c){c.done?r(c.value):o(c.value).then(u,f)}a((i=i.apply(n,e||[])).next())})},Ii=globalThis&&globalThis.__generator||function(n,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,o,r,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(t=0)),t;)try{if(i=1,o&&(r=a[0]&2?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){t.label=a[1];break}if(a[0]===6&&t.label<r[1]){t.label=r[1],r=a;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(a);break}r[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(n,t)}catch(c){a=[6,c],o=0}finally{i=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},ma=globalThis&&globalThis.__read||function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),o,r=[],s;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(s)throw s.error}}return r},tr=function(n){return Ci(void 0,void 0,void 0,function(){var e,t,i,o,r,s,u,f,a,c;return Ii(this,function(d){switch(d.label){case 0:return!n||n.statusCode<300?[2]:[4,nr(n)];case 1:return e=d.sent(),t=function(v){var y=ma(v.toString().split(/[\,\:]+/),1),m=y[0];return m.includes("#")?m.split("#")[1]:m},i=t((f=(u=(s=n.headers["x-amzn-errortype"])!==null&&s!==void 0?s:e.code)!==null&&u!==void 0?u:e.__type)!==null&&f!==void 0?f:"UnknownError"),o=(c=(a=e.message)!==null&&a!==void 0?a:e.Message)!==null&&c!==void 0?c:"Unknown error",r=new Error(o),[2,Object.assign(r,{name:i,$metadata:rn(n)})]}})})},nr=function(n){return Ci(void 0,void 0,void 0,function(){var e;return Ii(this,function(t){switch(t.label){case 0:if(!n.body)throw new Error("Missing response payload");return[4,n.body.json()];case 1:return e=t.sent(),[2,Object.assign(e,{$metadata:rn(n)})]}})})},wa=globalThis&&globalThis.__awaiter||function(n,e,t,i){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function u(c){try{a(i.next(c))}catch(d){s(d)}}function f(c){try{a(i.throw(c))}catch(d){s(d)}}function a(c){c.done?r(c.value):o(c.value).then(u,f)}a((i=i.apply(n,e||[])).next())})},_a=globalThis&&globalThis.__generator||function(n,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,o,r,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(t=0)),t;)try{if(i=1,o&&(r=a[0]&2?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){t.label=a[1];break}if(a[0]===6&&t.label<r[1]){t.label=r[1],r=a;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(a);break}r[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(n,t)}catch(c){a=[6,c],o=0}finally{i=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Sa="cognito-identity",ba=function(n){var e=n.region;return{url:new URL("https://cognito-identity.".concat(e,".").concat(Hs(e)))}},Aa=function(){return function(n,e){return function(i){return wa(this,void 0,void 0,function(){return _a(this,function(o){return i.headers["cache-control"]="no-store",[2,n(i)]})})}}},Ei=Ai(va,[Aa]),rr={service:Sa,endpointResolver:ba,retryDecider:aa(tr),computeDelay:na,userAgentValue:Qn()};di(function(){rr.userAgentValue=Qn()});var Ti=function(n){return{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.".concat(n)}},Ui=function(n,e,t){var i=n.url;return{headers:e,url:i,body:t,method:"POST"}},St=globalThis&&globalThis.__assign||function(){return St=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},St.apply(this,arguments)},Ca=globalThis&&globalThis.__awaiter||function(n,e,t,i){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function u(c){try{a(i.next(c))}catch(d){s(d)}}function f(c){try{a(i.throw(c))}catch(d){s(d)}}function a(c){c.done?r(c.value):o(c.value).then(u,f)}a((i=i.apply(n,e||[])).next())})},Ia=globalThis&&globalThis.__generator||function(n,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,o,r,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(t=0)),t;)try{if(i=1,o&&(r=a[0]&2?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){t.label=a[1];break}if(a[0]===6&&t.label<r[1]){t.label=r[1],r=a;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(a);break}r[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(n,t)}catch(c){a=[6,c],o=0}finally{i=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},xi=function(n,e,t,i){return function(o,r){return Ca(void 0,void 0,void 0,function(){var s,u,f,a;return Ia(this,function(c){switch(c.label){case 0:return s=St(St({},i),o),[4,s.endpointResolver(s,r)];case 1:return u=c.sent(),[4,e(r,u)];case 2:return f=c.sent(),[4,n(f,St({},s))];case 3:return a=c.sent(),[4,t(a)];case 4:return[2,c.sent()]}})})}},Ea=globalThis&&globalThis.__awaiter||function(n,e,t,i){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function u(c){try{a(i.next(c))}catch(d){s(d)}}function f(c){try{a(i.throw(c))}catch(d){s(d)}}function a(c){c.done?r(c.value):o(c.value).then(u,f)}a((i=i.apply(n,e||[])).next())})},Ta=globalThis&&globalThis.__generator||function(n,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,o,r,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(t=0)),t;)try{if(i=1,o&&(r=a[0]&2?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){t.label=a[1];break}if(a[0]===6&&t.label<r[1]){t.label=r[1],r=a;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(a);break}r[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(n,t)}catch(c){a=[6,c],o=0}finally{i=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Ua=function(n,e){var t=Ti("GetId"),i=JSON.stringify(n);return Ui(e,t,i)},xa=function(n){return Ea(void 0,void 0,void 0,function(){var e,t;return Ta(this,function(i){switch(i.label){case 0:return n.statusCode>=300?[4,tr(n)]:[3,2];case 1:throw e=i.sent(),e;case 2:return[4,nr(n)];case 3:return t=i.sent(),[2,{IdentityId:t.IdentityId,$metadata:rn(n)}]}})})},Dt=xi(Ei,Ua,xa,rr),Pa=globalThis&&globalThis.__awaiter||function(n,e,t,i){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function u(c){try{a(i.next(c))}catch(d){s(d)}}function f(c){try{a(i.throw(c))}catch(d){s(d)}}function a(c){c.done?r(c.value):o(c.value).then(u,f)}a((i=i.apply(n,e||[])).next())})},Ra=globalThis&&globalThis.__generator||function(n,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,o,r,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(t=0)),t;)try{if(i=1,o&&(r=a[0]&2?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){t.label=a[1];break}if(a[0]===6&&t.label<r[1]){t.label=r[1],r=a;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(a);break}r[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(n,t)}catch(c){a=[6,c],o=0}finally{i=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Da=function(n,e){var t=Ti("GetCredentialsForIdentity"),i=JSON.stringify(n);return Ui(e,t,i)},Oa=function(n){return Pa(void 0,void 0,void 0,function(){var e,t;return Ra(this,function(i){switch(i.label){case 0:return n.statusCode>=300?[4,tr(n)]:[3,2];case 1:throw e=i.sent(),e;case 2:return[4,nr(n)];case 3:return t=i.sent(),[2,{IdentityId:t.IdentityId,Credentials:Fa(t.Credentials),$metadata:rn(n)}]}})})},Fa=function(n){return n===void 0&&(n={}),{AccessKeyId:n.AccessKeyId,SecretKey:n.SecretKey,SessionToken:n.SessionToken,Expiration:new Date(n.Expiration*1e3)}},Ot=xi(Ei,Da,Oa,rr),qt=globalThis&&globalThis.__assign||function(){return qt=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},qt.apply(this,arguments)},ae=globalThis&&globalThis.__awaiter||function(n,e,t,i){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function u(c){try{a(i.next(c))}catch(d){s(d)}}function f(c){try{a(i.throw(c))}catch(d){s(d)}}function a(c){c.done?r(c.value):o(c.value).then(u,f)}a((i=i.apply(n,e||[])).next())})},ue=globalThis&&globalThis.__generator||function(n,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,o,r,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(t=0)),t;)try{if(i=1,o&&(r=a[0]&2?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){t.label=a[1];break}if(a[0]===6&&t.label<r[1]){t.label=r[1],r=a;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(a);break}r[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(n,t)}catch(c){a=[6,c],o=0}finally{i=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},k=new Ee("Credentials"),ka=50*60*1e3,Ma="CognitoIdentityId-",Na=typeof Symbol<"u"&&typeof Symbol.for=="function"?Symbol.for("amplify_default"):"@@amplify_default",$a=function(n,e,t){De.dispatch("core",{event:n,data:e,message:t},"Credentials",Na)},Ba=function(){function n(e){this._gettingCredPromise=null,this._refreshHandlers={},this.Auth=void 0,this.configure(e),this._refreshHandlers.google=Bs.refreshGoogleToken,this._refreshHandlers.facebook=Ls.refreshFacebookToken}return n.prototype.getModuleName=function(){return"Credentials"},n.prototype.getCredSource=function(){return this._credentials_source},n.prototype.configure=function(e){if(!e)return this._config||{};this._config=Object.assign({},this._config,e);var t=this._config.refreshHandlers;return t&&(this._refreshHandlers=qt(qt({},this._refreshHandlers),t)),this._storage=this._config.storage,this._storage||(this._storage=new Si().getStorage()),this._storageSync=Promise.resolve(),typeof this._storage.sync=="function"&&(this._storageSync=this._storage.sync()),$a("credentials_configured",null,"Credentials has been configured successfully"),this._config},n.prototype.get=function(){return k.debug("getting credentials"),this._pickupCredentials()},n.prototype._getCognitoIdentityIdStorageKey=function(e){return"".concat(Ma).concat(e)},n.prototype._pickupCredentials=function(){return k.debug("picking up credentials"),!this._gettingCredPromise||!this._gettingCredPromise.isPending()?(k.debug("getting new cred promise"),this._gettingCredPromise=$o(this._keepAlive())):k.debug("getting old cred promise"),this._gettingCredPromise},n.prototype._keepAlive=function(){return ae(this,void 0,void 0,function(){var e,t,i,o,r,s,u,f;return ue(this,function(a){switch(a.label){case 0:if(k.debug("checking if credentials exists and not expired"),e=this._credentials,e&&!this._isExpired(e)&&!this._isPastTTL())return k.debug("credentials not changed and not expired, directly return"),[2,Promise.resolve(e)];if(k.debug("need to get a new credential or refresh the existing one"),t=this.Auth,i=t===void 0?Jn.Auth:t,!i||typeof i.currentUserCredentials!="function")return[2,this._setCredentialsForGuest()];if(!(!this._isExpired(e)&&this._isPastTTL()))return[3,6];k.debug("ttl has passed but token is not yet expired"),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,i.currentUserPoolUser()];case 2:return o=a.sent(),[4,i.currentSession()];case 3:return r=a.sent(),s=r.refreshToken,u=new Promise(function(c,d){o.refreshSession(s,function(v,y){return v?d(v):c(y)})}),[4,u];case 4:return a.sent(),[3,6];case 5:return f=a.sent(),k.debug("Error attempting to refreshing the session",f),[3,6];case 6:return[2,i.currentUserCredentials()]}})})},n.prototype.refreshFederatedToken=function(e){k.debug("Getting federated credentials");var t=e.provider,i=e.user,o=e.token,r=e.identity_id,s=e.expires_at;s=new Date(s).getFullYear()===1970?s*1e3:s;var u=this;return k.debug("checking if federated jwt token expired"),s>new Date().getTime()?(k.debug("token not expired"),this._setCredentialsFromFederation({provider:t,token:o,user:i,identity_id:r,expires_at:s})):u._refreshHandlers[t]&&typeof u._refreshHandlers[t]=="function"?(k.debug("getting refreshed jwt token from federation provider"),this._providerRefreshWithRetry({refreshHandler:u._refreshHandlers[t],provider:t,user:i})):(k.debug("no refresh handler for provider:",t),this.clear(),Promise.reject("no refresh handler for provider"))},n.prototype._providerRefreshWithRetry=function(e){var t=this,i=e.refreshHandler,o=e.provider,r=e.user,s=10*1e3;return Ho(i,[],s).then(function(u){return k.debug("refresh federated token sucessfully",u),t._setCredentialsFromFederation({provider:o,token:u.token,user:r,identity_id:u.identity_id,expires_at:u.expires_at})}).catch(function(u){var f=typeof u=="string"&&u.toLowerCase().lastIndexOf("network error",u.length)===0;return f||t.clear(),k.debug("refresh federated token failed",u),Promise.reject("refreshing federation token failed: "+u)})},n.prototype._isExpired=function(e){if(!e)return k.debug("no credentials for expiration check"),!0;k.debug("are these credentials expired?",e);var t=Date.now(),i=e.expiration;return i.getTime()<=t},n.prototype._isPastTTL=function(){return this._nextCredentialsRefresh<=Date.now()},n.prototype._setCredentialsForGuest=function(){var e;return ae(this,void 0,void 0,function(){var t,i,o,r,s,u,f,a,c,d,v=this;return ue(this,function(y){switch(y.label){case 0:return k.debug("setting credentials for guest"),!((e=this._config)===null||e===void 0)&&e.identityPoolId||(this._config=Object.assign({},this._config,_i(this._config||{}).Auth)),t=this._config,i=t.identityPoolId,o=t.region,r=t.mandatorySignIn,s=t.identityPoolRegion,r?[2,Promise.reject("cannot get guest credentials when mandatory signin enabled")]:i?!s&&!o?(k.debug("region is not configured for getting the credentials"),[2,Promise.reject("region is not configured for getting the credentials")]):(f=this,[4,this._getGuestIdentityId()]):(k.debug("No Cognito Identity pool provided for unauthenticated access"),[2,Promise.reject("No Cognito Identity pool provided for unauthenticated access")]);case 1:return u=f._identityId=y.sent(),a={region:s??o},c=function(){return ae(v,void 0,void 0,function(){var m,_;return ue(this,function(b){switch(b.label){case 0:return u?[3,2]:[4,Dt(a,{IdentityPoolId:i})];case 1:m=b.sent().IdentityId,this._identityId=m,b.label=2;case 2:return[4,Ot(a,{IdentityId:this._identityId})];case 3:return _=b.sent().Credentials,[2,{identityId:this._identityId,accessKeyId:_.AccessKeyId,secretAccessKey:_.SecretKey,sessionToken:_.SessionToken,expiration:_.Expiration}]}})})},d=c().catch(function(m){return ae(v,void 0,void 0,function(){return ue(this,function(_){throw m})})}),[2,this._loadCredentials(d,"guest",!1,null).then(function(m){return m}).catch(function(m){return ae(v,void 0,void 0,function(){var _,b=this;return ue(this,function(E){switch(E.label){case 0:return m.name==="ResourceNotFoundException"&&m.message==="Identity '".concat(u,"' not found.")?(k.debug("Failed to load guest credentials"),[4,this._removeGuestIdentityId()]):[3,2];case 1:return E.sent(),_=function(){return ae(b,void 0,void 0,function(){var S,T;return ue(this,function(x){switch(x.label){case 0:return[4,Dt(a,{IdentityPoolId:i})];case 1:return S=x.sent().IdentityId,this._identityId=S,[4,Ot(a,{IdentityId:S})];case 2:return T=x.sent().Credentials,[2,{identityId:S,accessKeyId:T.AccessKeyId,secretAccessKey:T.SecretKey,sessionToken:T.SessionToken,expiration:T.Expiration}]}})})},d=_().catch(function(S){return ae(b,void 0,void 0,function(){return ue(this,function(T){throw S})})}),[2,this._loadCredentials(d,"guest",!1,null)];case 2:return[2,m]}})})})]}})})},n.prototype._setCredentialsFromFederation=function(e){var t=this,i=e.provider,o=e.token,r=e.identity_id,s={google:"accounts.google.com",facebook:"graph.facebook.com",amazon:"www.amazon.com",developer:"cognito-identity.amazonaws.com"},u=s[i]||i;if(!u)return Promise.reject("You must specify a federated provider");var f={};f[u]=o;var a=this._config,c=a.identityPoolId,d=a.region,v=a.identityPoolRegion;if(!c)return k.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!v&&!d)return k.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var y={region:v??d},m=function(){return ae(t,void 0,void 0,function(){var b,E;return ue(this,function(S){switch(S.label){case 0:return r?[3,2]:[4,Dt(y,{IdentityPoolId:c,Logins:f})];case 1:b=S.sent().IdentityId,r=b,S.label=2;case 2:return[4,Ot(y,{IdentityId:r,Logins:f})];case 3:return E=S.sent().Credentials,[2,{identityId:r,accessKeyId:E.AccessKeyId,secretAccessKey:E.SecretKey,sessionToken:E.SessionToken,expiration:E.Expiration}]}})})},_=m().catch(function(b){return ae(t,void 0,void 0,function(){return ue(this,function(E){throw b})})});return this._loadCredentials(_,"federated",!0,e)},n.prototype._setCredentialsFromSession=function(e){var t=this;k.debug("set credentials from session");var i=e.getIdToken().getJwtToken(),o=this._config,r=o.region,s=o.userPoolId,u=o.identityPoolId,f=o.identityPoolRegion;if(!u)return k.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!f&&!r)return k.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var a="cognito-idp."+r+".amazonaws.com/"+s,c={};c[a]=i;var d={region:f??r},v=function(){return ae(t,void 0,void 0,function(){var m,_,b,E,S,T,x,D,F,N;return ue(this,function(M){switch(M.label){case 0:return[4,this._getGuestIdentityId()];case 1:return m=M.sent(),m?[3,3]:[4,Dt(d,{IdentityPoolId:u,Logins:c})];case 2:b=M.sent().IdentityId,_=b,M.label=3;case 3:return[4,Ot(d,{IdentityId:m||_,Logins:c})];case 4:return E=M.sent(),S=E.Credentials,T=S.AccessKeyId,x=S.Expiration,D=S.SecretKey,F=S.SessionToken,N=E.IdentityId,this._identityId=N,m?(k.debug("The guest identity ".concat(m," has been successfully linked to the logins")),m===N&&k.debug("The guest identity ".concat(m," has become the primary identity")),[4,this._removeGuestIdentityId()]):[3,6];case 5:M.sent(),M.label=6;case 6:return[2,{accessKeyId:T,secretAccessKey:D,sessionToken:F,expiration:x,identityId:N}]}})})},y=v().catch(function(m){return ae(t,void 0,void 0,function(){return ue(this,function(_){throw m})})});return this._loadCredentials(y,"userPool",!0,null)},n.prototype._loadCredentials=function(e,t,i,o){var r=this,s=this;return new Promise(function(u,f){e.then(function(a){return ae(r,void 0,void 0,function(){var c,d,v,y,m;return ue(this,function(_){switch(_.label){case 0:if(k.debug("Load credentials successfully",a),this._identityId&&!a.identityId&&(a.identityId=this._identityId),s._credentials=a,s._credentials.authenticated=i,s._credentials_source=t,s._nextCredentialsRefresh=new Date().getTime()+ka,t==="federated"){c=Object.assign({id:this._credentials.identityId},o.user),d=o.provider,v=o.token,y=o.expires_at,m=o.identity_id;try{this._storage.setItem("aws-amplify-federatedInfo",JSON.stringify({provider:d,token:v,user:c,expires_at:y,identity_id:m}))}catch(b){k.debug("Failed to put federated info into auth storage",b)}}return t!=="guest"?[3,2]:[4,this._setGuestIdentityId(a.identityId)];case 1:_.sent(),_.label=2;case 2:return u(s._credentials),[2]}})})}).catch(function(a){if(a){k.debug("Failed to load credentials",e),k.debug("Error loading credentials",a),f(a);return}})})},n.prototype.set=function(e,t){return t==="session"?this._setCredentialsFromSession(e):t==="federation"?this._setCredentialsFromFederation(e):t==="guest"?this._setCredentialsForGuest():(k.debug("no source specified for setting credentials"),Promise.reject("invalid source"))},n.prototype.clear=function(){return ae(this,void 0,void 0,function(){return ue(this,function(e){return this._credentials=null,this._credentials_source=null,k.debug("removing aws-amplify-federatedInfo from storage"),this._storage.removeItem("aws-amplify-federatedInfo"),[2]})})},n.prototype._getGuestIdentityId=function(){return ae(this,void 0,void 0,function(){var e,t;return ue(this,function(i){switch(i.label){case 0:e=this._config.identityPoolId,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._storageSync];case 2:return i.sent(),[2,this._storage.getItem(this._getCognitoIdentityIdStorageKey(e))];case 3:return t=i.sent(),k.debug("Failed to get the cached guest identityId",t),[3,4];case 4:return[2]}})})},n.prototype._setGuestIdentityId=function(e){return ae(this,void 0,void 0,function(){var t,i;return ue(this,function(o){switch(o.label){case 0:t=this._config.identityPoolId,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this._storageSync];case 2:return o.sent(),this._storage.setItem(this._getCognitoIdentityIdStorageKey(t),e),[3,4];case 3:return i=o.sent(),k.debug("Failed to cache guest identityId",i),[3,4];case 4:return[2]}})})},n.prototype._removeGuestIdentityId=function(){return ae(this,void 0,void 0,function(){var e;return ue(this,function(t){return e=this._config.identityPoolId,k.debug("removing ".concat(this._getCognitoIdentityIdStorageKey(e)," from storage")),this._storage.removeItem(this._getCognitoIdentityIdStorageKey(e)),[2]})})},n.prototype.shear=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},n}(),Pi=new Ba(null);Jn.register(Pi);/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var Ri=Ka,Kr=Va,La=decodeURIComponent,ja=encodeURIComponent,Ft=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Ka(n,e){if(typeof n!="string")throw new TypeError("argument str must be a string");for(var t={},i=e||{},o=n.split(";"),r=i.decode||La,s=0;s<o.length;s++){var u=o[s],f=u.indexOf("=");if(!(f<0)){var a=u.substring(0,f).trim();if(t[a]==null){var c=u.substring(f+1,u.length).trim();c[0]==='"'&&(c=c.slice(1,-1)),t[a]=Ha(c,r)}}}return t}function Va(n,e,t){var i=t||{},o=i.encode||ja;if(typeof o!="function")throw new TypeError("option encode is invalid");if(!Ft.test(n))throw new TypeError("argument name is invalid");var r=o(e);if(r&&!Ft.test(r))throw new TypeError("argument val is invalid");var s=n+"="+r;if(i.maxAge!=null){var u=i.maxAge-0;if(isNaN(u)||!isFinite(u))throw new TypeError("option maxAge is invalid");s+="; Max-Age="+Math.floor(u)}if(i.domain){if(!Ft.test(i.domain))throw new TypeError("option domain is invalid");s+="; Domain="+i.domain}if(i.path){if(!Ft.test(i.path))throw new TypeError("option path is invalid");s+="; Path="+i.path}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(s+="; HttpOnly"),i.secure&&(s+="; Secure"),i.sameSite){var f=typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite;switch(f){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return s}function Ha(n,e){try{return e(n)}catch{return n}}function qa(){return typeof document=="object"&&typeof document.cookie=="string"}function Ga(n,e){return typeof n=="string"?Ri(n,e):typeof n=="object"&&n!==null?n:{}}function Wa(n,e){return typeof e>"u"&&(e=!n||n[0]!=="{"&&n[0]!=="["&&n[0]!=='"'),!e}function Vr(n,e){e===void 0&&(e={});var t=Ya(n);if(Wa(t,e.doNotParse))try{return JSON.parse(t)}catch{}return n}function Ya(n){return n&&n[0]==="j"&&n[1]===":"?n.substr(2):n}var We=globalThis&&globalThis.__assign||function(){return We=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},We.apply(this,arguments)},za=function(){function n(e,t){var i=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=Ga(e,t),new Promise(function(){i.HAS_DOCUMENT_COOKIE=qa()}).catch(function(){})}return n.prototype._updateBrowserValues=function(e){this.HAS_DOCUMENT_COOKIE&&(this.cookies=Ri(document.cookie,e))},n.prototype._emitChange=function(e){for(var t=0;t<this.changeListeners.length;++t)this.changeListeners[t](e)},n.prototype.get=function(e,t,i){return t===void 0&&(t={}),this._updateBrowserValues(i),Vr(this.cookies[e],t)},n.prototype.getAll=function(e,t){e===void 0&&(e={}),this._updateBrowserValues(t);var i={};for(var o in this.cookies)i[o]=Vr(this.cookies[o],e);return i},n.prototype.set=function(e,t,i){var o;typeof t=="object"&&(t=JSON.stringify(t)),this.cookies=We(We({},this.cookies),(o={},o[e]=t,o)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=Kr(e,t,i)),this._emitChange({name:e,value:t,options:i})},n.prototype.remove=function(e,t){var i=t=We(We({},t),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=We({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=Kr(e,"",i)),this._emitChange({name:e,value:void 0,options:t})},n.prototype.addChangeListener=function(e){this.changeListeners.push(e)},n.prototype.removeChangeListener=function(e){var t=this.changeListeners.indexOf(e);t>=0&&this.changeListeners.splice(t,1)},n}();const _n=za;var Gt=globalThis&&globalThis.__assign||function(){return Gt=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Gt.apply(this,arguments)},Hr=ke().isBrowser,Ja=365*24*60*60*1e3,Za=function(){function n(e){e===void 0&&(e={}),this.cookies=new _n,this.store=Hr?window.localStorage:Object.create(null),this.cookies=e.req?new _n(e.req.headers.cookie):new _n,Object.assign(this.store,this.cookies.getAll())}return Object.defineProperty(n.prototype,"length",{get:function(){return Object.entries(this.store).length},enumerable:!1,configurable:!0}),n.prototype.clear=function(){var e=this;Array.from(new Array(this.length)).map(function(t,i){return e.key(i)}).forEach(function(t){return e.removeItem(t)})},n.prototype.getItem=function(e){return this.getLocalItem(e)},n.prototype.getLocalItem=function(e){return Object.prototype.hasOwnProperty.call(this.store,e)?this.store[e]:null},n.prototype.getUniversalItem=function(e){return this.cookies.get(e)},n.prototype.key=function(e){return Object.keys(this.store)[e]},n.prototype.removeItem=function(e){this.removeLocalItem(e),this.removeUniversalItem(e)},n.prototype.removeLocalItem=function(e){delete this.store[e]},n.prototype.removeUniversalItem=function(e){this.cookies.remove(e,{path:"/"})},n.prototype.setItem=function(e,t){this.setLocalItem(e,t);var i=e.split(".").pop(),o=["LastAuthUser","accessToken","refreshToken","idToken"];o.includes(i??"")&&this.setUniversalItem(e,t,{expires:new Date(Date.now()+Ja)})},n.prototype.setLocalItem=function(e,t){this.store[e]=t},n.prototype.setUniversalItem=function(e,t,i){i===void 0&&(i={}),this.cookies.set(e,t,Gt(Gt({},i),{path:"/",sameSite:!0,secure:!(Hr&&window.location.hostname==="localhost")}))},n}(),Xa="x-amz-user-agent";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var kn=function(n,e){return kn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])},kn(n,e)};function Di(n,e){kn(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var re=function(){return re=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},re.apply(this,arguments)};function L(n,e,t,i){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function u(c){try{a(i.next(c))}catch(d){s(d)}}function f(c){try{a(i.throw(c))}catch(d){s(d)}}function a(c){c.done?r(c.value):o(c.value).then(u,f)}a((i=i.apply(n,e||[])).next())})}function j(n,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,o,r,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,o&&(r=a[0]&2?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){t.label=a[1];break}if(a[0]===6&&t.label<r[1]){t.label=r[1],r=a;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(a);break}r[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(n,t)}catch(c){a=[6,c],o=0}finally{i=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function Re(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),o,r=[],s;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(s)throw s.error}}return r}var Wt;(function(n){n.Cognito="COGNITO",n.Google="Google",n.Facebook="Facebook",n.Amazon="LoginWithAmazon",n.Apple="SignInWithApple"})(Wt||(Wt={}));function Sn(n){var e=["provider"];return n&&!!e.find(function(t){return n.hasOwnProperty(t)})}function Qa(n){var e=["customProvider"];return n&&!!e.find(function(t){return n.hasOwnProperty(t)})}function eu(n){var e=["customState"];return n&&!!e.find(function(t){return n.hasOwnProperty(t)})}function Je(n){return n.redirectSignIn!==void 0}var K;(function(n){n.NoConfig="noConfig",n.MissingAuthConfig="missingAuthConfig",n.EmptyUsername="emptyUsername",n.InvalidUsername="invalidUsername",n.EmptyPassword="emptyPassword",n.EmptyCode="emptyCode",n.SignUpError="signUpError",n.NoMFA="noMFA",n.InvalidMFA="invalidMFA",n.EmptyChallengeResponse="emptyChallengeResponse",n.NoUserSession="noUserSession",n.Default="default",n.DeviceConfig="deviceConfig",n.NetworkError="networkError",n.AutoSignInError="autoSignInError"})(K||(K={}));function tu(n){return!!n.username}var qr;(function(n){n.API_KEY="API_KEY",n.AWS_IAM="AWS_IAM",n.OPENID_CONNECT="OPENID_CONNECT",n.AMAZON_COGNITO_USER_POOLS="AMAZON_COGNITO_USER_POOLS",n.AWS_LAMBDA="AWS_LAMBDA"})(qr||(qr={}));/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var Gr=function(){function n(t){var i=t||{},o=i.ValidationData,r=i.Username,s=i.Password,u=i.AuthParameters,f=i.ClientMetadata;this.validationData=o||{},this.authParameters=u||{},this.clientMetadata=f||{},this.username=r,this.password=s}var e=n.prototype;return e.getUsername=function(){return this.username},e.getPassword=function(){return this.password},e.getValidationData=function(){return this.validationData},e.getAuthParameters=function(){return this.authParameters},e.getClientMetadata=function(){return this.clientMetadata},n}(),q={},on={};on.byteLength=iu;on.toByteArray=su;on.fromByteArray=cu;var xe=[],we=[],nu=typeof Uint8Array<"u"?Uint8Array:Array,bn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var nt=0,ru=bn.length;nt<ru;++nt)xe[nt]=bn[nt],we[bn.charCodeAt(nt)]=nt;we["-".charCodeAt(0)]=62;we["_".charCodeAt(0)]=63;function Oi(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var i=t===e?0:4-t%4;return[t,i]}function iu(n){var e=Oi(n),t=e[0],i=e[1];return(t+i)*3/4-i}function ou(n,e,t){return(e+t)*3/4-t}function su(n){var e,t=Oi(n),i=t[0],o=t[1],r=new nu(ou(n,i,o)),s=0,u=o>0?i-4:i,f;for(f=0;f<u;f+=4)e=we[n.charCodeAt(f)]<<18|we[n.charCodeAt(f+1)]<<12|we[n.charCodeAt(f+2)]<<6|we[n.charCodeAt(f+3)],r[s++]=e>>16&255,r[s++]=e>>8&255,r[s++]=e&255;return o===2&&(e=we[n.charCodeAt(f)]<<2|we[n.charCodeAt(f+1)]>>4,r[s++]=e&255),o===1&&(e=we[n.charCodeAt(f)]<<10|we[n.charCodeAt(f+1)]<<4|we[n.charCodeAt(f+2)]>>2,r[s++]=e>>8&255,r[s++]=e&255),r}function au(n){return xe[n>>18&63]+xe[n>>12&63]+xe[n>>6&63]+xe[n&63]}function uu(n,e,t){for(var i,o=[],r=e;r<t;r+=3)i=(n[r]<<16&16711680)+(n[r+1]<<8&65280)+(n[r+2]&255),o.push(au(i));return o.join("")}function cu(n){for(var e,t=n.length,i=t%3,o=[],r=16383,s=0,u=t-i;s<u;s+=r)o.push(uu(n,s,s+r>u?u:s+r));return i===1?(e=n[t-1],o.push(xe[e>>2]+xe[e<<4&63]+"==")):i===2&&(e=(n[t-2]<<8)+n[t-1],o.push(xe[e>>10]+xe[e>>4&63]+xe[e<<2&63]+"=")),o.join("")}var ir={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ir.read=function(n,e,t,i,o){var r,s,u=o*8-i-1,f=(1<<u)-1,a=f>>1,c=-7,d=t?o-1:0,v=t?-1:1,y=n[e+d];for(d+=v,r=y&(1<<-c)-1,y>>=-c,c+=u;c>0;r=r*256+n[e+d],d+=v,c-=8);for(s=r&(1<<-c)-1,r>>=-c,c+=i;c>0;s=s*256+n[e+d],d+=v,c-=8);if(r===0)r=1-a;else{if(r===f)return s?NaN:(y?-1:1)*(1/0);s=s+Math.pow(2,i),r=r-a}return(y?-1:1)*s*Math.pow(2,r-i)};ir.write=function(n,e,t,i,o,r){var s,u,f,a=r*8-o-1,c=(1<<a)-1,d=c>>1,v=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=i?0:r-1,m=i?1:-1,_=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-s))<1&&(s--,f*=2),s+d>=1?e+=v/f:e+=v*Math.pow(2,1-d),e*f>=2&&(s++,f/=2),s+d>=c?(u=0,s=c):s+d>=1?(u=(e*f-1)*Math.pow(2,o),s=s+d):(u=e*Math.pow(2,d-1)*Math.pow(2,o),s=0));o>=8;n[t+y]=u&255,y+=m,u/=256,o-=8);for(s=s<<o|u,a+=o;a>0;n[t+y]=s&255,y+=m,s/=256,a-=8);n[t+y-m]|=_*128};var fu={}.toString,lu=Array.isArray||function(n){return fu.call(n)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */(function(n){var e=on,t=ir,i=lu;n.Buffer=u,n.SlowBuffer=E,n.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=_t.TYPED_ARRAY_SUPPORT!==void 0?_t.TYPED_ARRAY_SUPPORT:o(),n.kMaxLength=r();function o(){try{var g=new Uint8Array(1);return g.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},g.foo()===42&&typeof g.subarray=="function"&&g.subarray(1,1).byteLength===0}catch{return!1}}function r(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(g,l){if(r()<l)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(g=new Uint8Array(l),g.__proto__=u.prototype):(g===null&&(g=new u(l)),g.length=l),g}function u(g,l,h){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(g,l,h);if(typeof g=="number"){if(typeof l=="string")throw new Error("If encoding is specified then the first argument must be a string");return d(this,g)}return f(this,g,l,h)}u.poolSize=8192,u._augment=function(g){return g.__proto__=u.prototype,g};function f(g,l,h,p){if(typeof l=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&l instanceof ArrayBuffer?m(g,l,h,p):typeof l=="string"?v(g,l,h):_(g,l)}u.from=function(g,l,h){return f(null,g,l,h)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0}));function a(g){if(typeof g!="number")throw new TypeError('"size" argument must be a number');if(g<0)throw new RangeError('"size" argument must not be negative')}function c(g,l,h,p){return a(l),l<=0?s(g,l):h!==void 0?typeof p=="string"?s(g,l).fill(h,p):s(g,l).fill(h):s(g,l)}u.alloc=function(g,l,h){return c(null,g,l,h)};function d(g,l){if(a(l),g=s(g,l<0?0:b(l)|0),!u.TYPED_ARRAY_SUPPORT)for(var h=0;h<l;++h)g[h]=0;return g}u.allocUnsafe=function(g){return d(null,g)},u.allocUnsafeSlow=function(g){return d(null,g)};function v(g,l,h){if((typeof h!="string"||h==="")&&(h="utf8"),!u.isEncoding(h))throw new TypeError('"encoding" must be a valid string encoding');var p=S(l,h)|0;g=s(g,p);var w=g.write(l,h);return w!==p&&(g=g.slice(0,w)),g}function y(g,l){var h=l.length<0?0:b(l.length)|0;g=s(g,h);for(var p=0;p<h;p+=1)g[p]=l[p]&255;return g}function m(g,l,h,p){if(l.byteLength,h<0||l.byteLength<h)throw new RangeError("'offset' is out of bounds");if(l.byteLength<h+(p||0))throw new RangeError("'length' is out of bounds");return h===void 0&&p===void 0?l=new Uint8Array(l):p===void 0?l=new Uint8Array(l,h):l=new Uint8Array(l,h,p),u.TYPED_ARRAY_SUPPORT?(g=l,g.__proto__=u.prototype):g=y(g,l),g}function _(g,l){if(u.isBuffer(l)){var h=b(l.length)|0;return g=s(g,h),g.length===0||l.copy(g,0,0,h),g}if(l){if(typeof ArrayBuffer<"u"&&l.buffer instanceof ArrayBuffer||"length"in l)return typeof l.length!="number"||Ki(l.length)?s(g,0):y(g,l);if(l.type==="Buffer"&&i(l.data))return y(g,l.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function b(g){if(g>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return g|0}function E(g){return+g!=g&&(g=0),u.alloc(+g)}u.isBuffer=function(l){return!!(l!=null&&l._isBuffer)},u.compare=function(l,h){if(!u.isBuffer(l)||!u.isBuffer(h))throw new TypeError("Arguments must be Buffers");if(l===h)return 0;for(var p=l.length,w=h.length,A=0,I=Math.min(p,w);A<I;++A)if(l[A]!==h[A]){p=l[A],w=h[A];break}return p<w?-1:w<p?1:0},u.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(l,h){if(!i(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return u.alloc(0);var p;if(h===void 0)for(h=0,p=0;p<l.length;++p)h+=l[p].length;var w=u.allocUnsafe(h),A=0;for(p=0;p<l.length;++p){var I=l[p];if(!u.isBuffer(I))throw new TypeError('"list" argument must be an Array of Buffers');I.copy(w,A),A+=I.length}return w};function S(g,l){if(u.isBuffer(g))return g.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(g)||g instanceof ArrayBuffer))return g.byteLength;typeof g!="string"&&(g=""+g);var h=g.length;if(h===0)return 0;for(var p=!1;;)switch(l){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":case void 0:return te(g).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h*2;case"hex":return h>>>1;case"base64":return Ue(g).length;default:if(p)return te(g).length;l=(""+l).toLowerCase(),p=!0}}u.byteLength=S;function T(g,l,h){var p=!1;if((l===void 0||l<0)&&(l=0),l>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0,l>>>=0,h<=l))return"";for(g||(g="utf8");;)switch(g){case"hex":return un(this,l,h);case"utf8":case"utf-8":return ve(this,l,h);case"ascii":return Qe(this,l,h);case"latin1":case"binary":return an(this,l,h);case"base64":return fe(this,l,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,l,h);default:if(p)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase(),p=!0}}u.prototype._isBuffer=!0;function x(g,l,h){var p=g[l];g[l]=g[h],g[h]=p}u.prototype.swap16=function(){var l=this.length;if(l%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var h=0;h<l;h+=2)x(this,h,h+1);return this},u.prototype.swap32=function(){var l=this.length;if(l%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var h=0;h<l;h+=4)x(this,h,h+3),x(this,h+1,h+2);return this},u.prototype.swap64=function(){var l=this.length;if(l%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var h=0;h<l;h+=8)x(this,h,h+7),x(this,h+1,h+6),x(this,h+2,h+5),x(this,h+3,h+4);return this},u.prototype.toString=function(){var l=this.length|0;return l===0?"":arguments.length===0?ve(this,0,l):T.apply(this,arguments)},u.prototype.equals=function(l){if(!u.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l?!0:u.compare(this,l)===0},u.prototype.inspect=function(){var l="",h=n.INSPECT_MAX_BYTES;return this.length>0&&(l=this.toString("hex",0,h).match(/.{2}/g).join(" "),this.length>h&&(l+=" ... ")),"<Buffer "+l+">"},u.prototype.compare=function(l,h,p,w,A){if(!u.isBuffer(l))throw new TypeError("Argument must be a Buffer");if(h===void 0&&(h=0),p===void 0&&(p=l?l.length:0),w===void 0&&(w=0),A===void 0&&(A=this.length),h<0||p>l.length||w<0||A>this.length)throw new RangeError("out of range index");if(w>=A&&h>=p)return 0;if(w>=A)return-1;if(h>=p)return 1;if(h>>>=0,p>>>=0,w>>>=0,A>>>=0,this===l)return 0;for(var I=A-w,B=p-h,W=Math.min(I,B),Y=this.slice(w,A),se=l.slice(h,p),z=0;z<W;++z)if(Y[z]!==se[z]){I=Y[z],B=se[z];break}return I<B?-1:B<I?1:0};function D(g,l,h,p,w){if(g.length===0)return-1;if(typeof h=="string"?(p=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),h=+h,isNaN(h)&&(h=w?0:g.length-1),h<0&&(h=g.length+h),h>=g.length){if(w)return-1;h=g.length-1}else if(h<0)if(w)h=0;else return-1;if(typeof l=="string"&&(l=u.from(l,p)),u.isBuffer(l))return l.length===0?-1:F(g,l,h,p,w);if(typeof l=="number")return l=l&255,u.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?w?Uint8Array.prototype.indexOf.call(g,l,h):Uint8Array.prototype.lastIndexOf.call(g,l,h):F(g,[l],h,p,w);throw new TypeError("val must be string, number or Buffer")}function F(g,l,h,p,w){var A=1,I=g.length,B=l.length;if(p!==void 0&&(p=String(p).toLowerCase(),p==="ucs2"||p==="ucs-2"||p==="utf16le"||p==="utf-16le")){if(g.length<2||l.length<2)return-1;A=2,I/=2,B/=2,h/=2}function W(ur,cr){return A===1?ur[cr]:ur.readUInt16BE(cr*A)}var Y;if(w){var se=-1;for(Y=h;Y<I;Y++)if(W(g,Y)===W(l,se===-1?0:Y-se)){if(se===-1&&(se=Y),Y-se+1===B)return se*A}else se!==-1&&(Y-=Y-se),se=-1}else for(h+B>I&&(h=I-B),Y=h;Y>=0;Y--){for(var z=!0,Pt=0;Pt<B;Pt++)if(W(g,Y+Pt)!==W(l,Pt)){z=!1;break}if(z)return Y}return-1}u.prototype.includes=function(l,h,p){return this.indexOf(l,h,p)!==-1},u.prototype.indexOf=function(l,h,p){return D(this,l,h,p,!0)},u.prototype.lastIndexOf=function(l,h,p){return D(this,l,h,p,!1)};function N(g,l,h,p){h=Number(h)||0;var w=g.length-h;p?(p=Number(p),p>w&&(p=w)):p=w;var A=l.length;if(A%2!==0)throw new TypeError("Invalid hex string");p>A/2&&(p=A/2);for(var I=0;I<p;++I){var B=parseInt(l.substr(I*2,2),16);if(isNaN(B))return I;g[h+I]=B}return I}function M(g,l,h,p){return Me(te(l,g.length-h),g,h,p)}function H(g,l,h,p){return Me(ge(l),g,h,p)}function ie(g,l,h,p){return H(g,l,h,p)}function he(g,l,h,p){return Me(Ue(l),g,h,p)}function be(g,l,h,p){return Me(Te(l,g.length-h),g,h,p)}u.prototype.write=function(l,h,p,w){if(h===void 0)w="utf8",p=this.length,h=0;else if(p===void 0&&typeof h=="string")w=h,p=this.length,h=0;else if(isFinite(h))h=h|0,isFinite(p)?(p=p|0,w===void 0&&(w="utf8")):(w=p,p=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var A=this.length-h;if((p===void 0||p>A)&&(p=A),l.length>0&&(p<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");w||(w="utf8");for(var I=!1;;)switch(w){case"hex":return N(this,l,h,p);case"utf8":case"utf-8":return M(this,l,h,p);case"ascii":return H(this,l,h,p);case"latin1":case"binary":return ie(this,l,h,p);case"base64":return he(this,l,h,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,l,h,p);default:if(I)throw new TypeError("Unknown encoding: "+w);w=(""+w).toLowerCase(),I=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function fe(g,l,h){return l===0&&h===g.length?e.fromByteArray(g):e.fromByteArray(g.slice(l,h))}function ve(g,l,h){h=Math.min(g.length,h);for(var p=[],w=l;w<h;){var A=g[w],I=null,B=A>239?4:A>223?3:A>191?2:1;if(w+B<=h){var W,Y,se,z;switch(B){case 1:A<128&&(I=A);break;case 2:W=g[w+1],(W&192)===128&&(z=(A&31)<<6|W&63,z>127&&(I=z));break;case 3:W=g[w+1],Y=g[w+2],(W&192)===128&&(Y&192)===128&&(z=(A&15)<<12|(W&63)<<6|Y&63,z>2047&&(z<55296||z>57343)&&(I=z));break;case 4:W=g[w+1],Y=g[w+2],se=g[w+3],(W&192)===128&&(Y&192)===128&&(se&192)===128&&(z=(A&15)<<18|(W&63)<<12|(Y&63)<<6|se&63,z>65535&&z<1114112&&(I=z))}}I===null?(I=65533,B=1):I>65535&&(I-=65536,p.push(I>>>10&1023|55296),I=56320|I&1023),p.push(I),w+=B}return Ae(p)}var le=4096;function Ae(g){var l=g.length;if(l<=le)return String.fromCharCode.apply(String,g);for(var h="",p=0;p<l;)h+=String.fromCharCode.apply(String,g.slice(p,p+=le));return h}function Qe(g,l,h){var p="";h=Math.min(g.length,h);for(var w=l;w<h;++w)p+=String.fromCharCode(g[w]&127);return p}function an(g,l,h){var p="";h=Math.min(g.length,h);for(var w=l;w<h;++w)p+=String.fromCharCode(g[w]);return p}function un(g,l,h){var p=g.length;(!l||l<0)&&(l=0),(!h||h<0||h>p)&&(h=p);for(var w="",A=l;A<h;++A)w+=Q(g[A]);return w}function R(g,l,h){for(var p=g.slice(l,h),w="",A=0;A<p.length;A+=2)w+=String.fromCharCode(p[A]+p[A+1]*256);return w}u.prototype.slice=function(l,h){var p=this.length;l=~~l,h=h===void 0?p:~~h,l<0?(l+=p,l<0&&(l=0)):l>p&&(l=p),h<0?(h+=p,h<0&&(h=0)):h>p&&(h=p),h<l&&(h=l);var w;if(u.TYPED_ARRAY_SUPPORT)w=this.subarray(l,h),w.__proto__=u.prototype;else{var A=h-l;w=new u(A,void 0);for(var I=0;I<A;++I)w[I]=this[I+l]}return w};function P(g,l,h){if(g%1!==0||g<0)throw new RangeError("offset is not uint");if(g+l>h)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUIntLE=function(l,h,p){l=l|0,h=h|0,p||P(l,h,this.length);for(var w=this[l],A=1,I=0;++I<h&&(A*=256);)w+=this[l+I]*A;return w},u.prototype.readUIntBE=function(l,h,p){l=l|0,h=h|0,p||P(l,h,this.length);for(var w=this[l+--h],A=1;h>0&&(A*=256);)w+=this[l+--h]*A;return w},u.prototype.readUInt8=function(l,h){return h||P(l,1,this.length),this[l]},u.prototype.readUInt16LE=function(l,h){return h||P(l,2,this.length),this[l]|this[l+1]<<8},u.prototype.readUInt16BE=function(l,h){return h||P(l,2,this.length),this[l]<<8|this[l+1]},u.prototype.readUInt32LE=function(l,h){return h||P(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+this[l+3]*16777216},u.prototype.readUInt32BE=function(l,h){return h||P(l,4,this.length),this[l]*16777216+(this[l+1]<<16|this[l+2]<<8|this[l+3])},u.prototype.readIntLE=function(l,h,p){l=l|0,h=h|0,p||P(l,h,this.length);for(var w=this[l],A=1,I=0;++I<h&&(A*=256);)w+=this[l+I]*A;return A*=128,w>=A&&(w-=Math.pow(2,8*h)),w},u.prototype.readIntBE=function(l,h,p){l=l|0,h=h|0,p||P(l,h,this.length);for(var w=h,A=1,I=this[l+--w];w>0&&(A*=256);)I+=this[l+--w]*A;return A*=128,I>=A&&(I-=Math.pow(2,8*h)),I},u.prototype.readInt8=function(l,h){return h||P(l,1,this.length),this[l]&128?(255-this[l]+1)*-1:this[l]},u.prototype.readInt16LE=function(l,h){h||P(l,2,this.length);var p=this[l]|this[l+1]<<8;return p&32768?p|4294901760:p},u.prototype.readInt16BE=function(l,h){h||P(l,2,this.length);var p=this[l+1]|this[l]<<8;return p&32768?p|4294901760:p},u.prototype.readInt32LE=function(l,h){return h||P(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},u.prototype.readInt32BE=function(l,h){return h||P(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},u.prototype.readFloatLE=function(l,h){return h||P(l,4,this.length),t.read(this,l,!0,23,4)},u.prototype.readFloatBE=function(l,h){return h||P(l,4,this.length),t.read(this,l,!1,23,4)},u.prototype.readDoubleLE=function(l,h){return h||P(l,8,this.length),t.read(this,l,!0,52,8)},u.prototype.readDoubleBE=function(l,h){return h||P(l,8,this.length),t.read(this,l,!1,52,8)};function O(g,l,h,p,w,A){if(!u.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(l>w||l<A)throw new RangeError('"value" argument is out of bounds');if(h+p>g.length)throw new RangeError("Index out of range")}u.prototype.writeUIntLE=function(l,h,p,w){if(l=+l,h=h|0,p=p|0,!w){var A=Math.pow(2,8*p)-1;O(this,l,h,p,A,0)}var I=1,B=0;for(this[h]=l&255;++B<p&&(I*=256);)this[h+B]=l/I&255;return h+p},u.prototype.writeUIntBE=function(l,h,p,w){if(l=+l,h=h|0,p=p|0,!w){var A=Math.pow(2,8*p)-1;O(this,l,h,p,A,0)}var I=p-1,B=1;for(this[h+I]=l&255;--I>=0&&(B*=256);)this[h+I]=l/B&255;return h+p},u.prototype.writeUInt8=function(l,h,p){return l=+l,h=h|0,p||O(this,l,h,1,255,0),u.TYPED_ARRAY_SUPPORT||(l=Math.floor(l)),this[h]=l&255,h+1};function V(g,l,h,p){l<0&&(l=65535+l+1);for(var w=0,A=Math.min(g.length-h,2);w<A;++w)g[h+w]=(l&255<<8*(p?w:1-w))>>>(p?w:1-w)*8}u.prototype.writeUInt16LE=function(l,h,p){return l=+l,h=h|0,p||O(this,l,h,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[h]=l&255,this[h+1]=l>>>8):V(this,l,h,!0),h+2},u.prototype.writeUInt16BE=function(l,h,p){return l=+l,h=h|0,p||O(this,l,h,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[h]=l>>>8,this[h+1]=l&255):V(this,l,h,!1),h+2};function G(g,l,h,p){l<0&&(l=4294967295+l+1);for(var w=0,A=Math.min(g.length-h,4);w<A;++w)g[h+w]=l>>>(p?w:3-w)*8&255}u.prototype.writeUInt32LE=function(l,h,p){return l=+l,h=h|0,p||O(this,l,h,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[h+3]=l>>>24,this[h+2]=l>>>16,this[h+1]=l>>>8,this[h]=l&255):G(this,l,h,!0),h+4},u.prototype.writeUInt32BE=function(l,h,p){return l=+l,h=h|0,p||O(this,l,h,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[h]=l>>>24,this[h+1]=l>>>16,this[h+2]=l>>>8,this[h+3]=l&255):G(this,l,h,!1),h+4},u.prototype.writeIntLE=function(l,h,p,w){if(l=+l,h=h|0,!w){var A=Math.pow(2,8*p-1);O(this,l,h,p,A-1,-A)}var I=0,B=1,W=0;for(this[h]=l&255;++I<p&&(B*=256);)l<0&&W===0&&this[h+I-1]!==0&&(W=1),this[h+I]=(l/B>>0)-W&255;return h+p},u.prototype.writeIntBE=function(l,h,p,w){if(l=+l,h=h|0,!w){var A=Math.pow(2,8*p-1);O(this,l,h,p,A-1,-A)}var I=p-1,B=1,W=0;for(this[h+I]=l&255;--I>=0&&(B*=256);)l<0&&W===0&&this[h+I+1]!==0&&(W=1),this[h+I]=(l/B>>0)-W&255;return h+p},u.prototype.writeInt8=function(l,h,p){return l=+l,h=h|0,p||O(this,l,h,1,127,-128),u.TYPED_ARRAY_SUPPORT||(l=Math.floor(l)),l<0&&(l=255+l+1),this[h]=l&255,h+1},u.prototype.writeInt16LE=function(l,h,p){return l=+l,h=h|0,p||O(this,l,h,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[h]=l&255,this[h+1]=l>>>8):V(this,l,h,!0),h+2},u.prototype.writeInt16BE=function(l,h,p){return l=+l,h=h|0,p||O(this,l,h,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[h]=l>>>8,this[h+1]=l&255):V(this,l,h,!1),h+2},u.prototype.writeInt32LE=function(l,h,p){return l=+l,h=h|0,p||O(this,l,h,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[h]=l&255,this[h+1]=l>>>8,this[h+2]=l>>>16,this[h+3]=l>>>24):G(this,l,h,!0),h+4},u.prototype.writeInt32BE=function(l,h,p){return l=+l,h=h|0,p||O(this,l,h,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),u.TYPED_ARRAY_SUPPORT?(this[h]=l>>>24,this[h+1]=l>>>16,this[h+2]=l>>>8,this[h+3]=l&255):G(this,l,h,!1),h+4};function X(g,l,h,p,w,A){if(h+p>g.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function Z(g,l,h,p,w){return w||X(g,l,h,4),t.write(g,l,h,p,23,4),h+4}u.prototype.writeFloatLE=function(l,h,p){return Z(this,l,h,!0,p)},u.prototype.writeFloatBE=function(l,h,p){return Z(this,l,h,!1,p)};function oe(g,l,h,p,w){return w||X(g,l,h,8),t.write(g,l,h,p,52,8),h+8}u.prototype.writeDoubleLE=function(l,h,p){return oe(this,l,h,!0,p)},u.prototype.writeDoubleBE=function(l,h,p){return oe(this,l,h,!1,p)},u.prototype.copy=function(l,h,p,w){if(p||(p=0),!w&&w!==0&&(w=this.length),h>=l.length&&(h=l.length),h||(h=0),w>0&&w<p&&(w=p),w===p||l.length===0||this.length===0)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(p<0||p>=this.length)throw new RangeError("sourceStart out of bounds");if(w<0)throw new RangeError("sourceEnd out of bounds");w>this.length&&(w=this.length),l.length-h<w-p&&(w=l.length-h+p);var A=w-p,I;if(this===l&&p<h&&h<w)for(I=A-1;I>=0;--I)l[I+h]=this[I+p];else if(A<1e3||!u.TYPED_ARRAY_SUPPORT)for(I=0;I<A;++I)l[I+h]=this[I+p];else Uint8Array.prototype.set.call(l,this.subarray(p,p+A),h);return A},u.prototype.fill=function(l,h,p,w){if(typeof l=="string"){if(typeof h=="string"?(w=h,h=0,p=this.length):typeof p=="string"&&(w=p,p=this.length),l.length===1){var A=l.charCodeAt(0);A<256&&(l=A)}if(w!==void 0&&typeof w!="string")throw new TypeError("encoding must be a string");if(typeof w=="string"&&!u.isEncoding(w))throw new TypeError("Unknown encoding: "+w)}else typeof l=="number"&&(l=l&255);if(h<0||this.length<h||this.length<p)throw new RangeError("Out of range index");if(p<=h)return this;h=h>>>0,p=p===void 0?this.length:p>>>0,l||(l=0);var I;if(typeof l=="number")for(I=h;I<p;++I)this[I]=l;else{var B=u.isBuffer(l)?l:te(new u(l,w).toString()),W=B.length;for(I=0;I<p-h;++I)this[I+h]=B[I%W]}return this};var de=/[^+\/0-9A-Za-z-_]/g;function ye(g){if(g=Ce(g).replace(de,""),g.length<2)return"";for(;g.length%4!==0;)g=g+"=";return g}function Ce(g){return g.trim?g.trim():g.replace(/^\s+|\s+$/g,"")}function Q(g){return g<16?"0"+g.toString(16):g.toString(16)}function te(g,l){l=l||1/0;for(var h,p=g.length,w=null,A=[],I=0;I<p;++I){if(h=g.charCodeAt(I),h>55295&&h<57344){if(!w){if(h>56319){(l-=3)>-1&&A.push(239,191,189);continue}else if(I+1===p){(l-=3)>-1&&A.push(239,191,189);continue}w=h;continue}if(h<56320){(l-=3)>-1&&A.push(239,191,189),w=h;continue}h=(w-55296<<10|h-56320)+65536}else w&&(l-=3)>-1&&A.push(239,191,189);if(w=null,h<128){if((l-=1)<0)break;A.push(h)}else if(h<2048){if((l-=2)<0)break;A.push(h>>6|192,h&63|128)}else if(h<65536){if((l-=3)<0)break;A.push(h>>12|224,h>>6&63|128,h&63|128)}else if(h<1114112){if((l-=4)<0)break;A.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw new Error("Invalid code point")}return A}function ge(g){for(var l=[],h=0;h<g.length;++h)l.push(g.charCodeAt(h)&255);return l}function Te(g,l){for(var h,p,w,A=[],I=0;I<g.length&&!((l-=2)<0);++I)h=g.charCodeAt(I),p=h>>8,w=h%256,A.push(w),A.push(p);return A}function Ue(g){return e.toByteArray(ye(g))}function Me(g,l,h,p){for(var w=0;w<p&&!(w+h>=l.length||w>=g.length);++w)l[w+h]=g[w];return w}function Ki(g){return g!==g}})(q);var _e;typeof window<"u"&&window.crypto&&(_e=window.crypto);!_e&&typeof window<"u"&&window.msCrypto&&(_e=window.msCrypto);!_e&&typeof global<"u"&&global.crypto&&(_e=global.crypto);if(!_e&&typeof require=="function")try{_e=require("crypto")}catch{}function hu(){if(_e){if(typeof _e.getRandomValues=="function")try{return _e.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof _e.randomBytes=="function")try{return _e.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")}function du(n){for(var e=n.words,t=n.sigBytes,i=[],o=0;o<t;o++){var r=e[o>>>2]>>>24-o%4*8&255;i.push((r>>>4).toString(16)),i.push((r&15).toString(16))}return i.join("")}var gu=function(){function n(t,i){t=this.words=t||[],i!=null?this.sigBytes=i:this.sigBytes=t.length*4}var e=n.prototype;return e.random=function(i){for(var o=[],r=0;r<i;r+=4)o.push(hu());return new n(o,i)},e.toString=function(){return du(this)},n}();function U(n,e){n!=null&&this.fromString(n,e)}function ce(){return new U(null)}var Ke,pu=0xdeadbeefcafe,Wr=(pu&16777215)==15715070;function vu(n,e,t,i,o,r){for(;--r>=0;){var s=e*this[n++]+t[i]+o;o=Math.floor(s/67108864),t[i++]=s&67108863}return o}function yu(n,e,t,i,o,r){for(var s=e&32767,u=e>>15;--r>=0;){var f=this[n]&32767,a=this[n++]>>15,c=u*f+a*s;f=s*f+((c&32767)<<15)+t[i]+(o&1073741823),o=(f>>>30)+(c>>>15)+u*a+(o>>>30),t[i++]=f&1073741823}return o}function mu(n,e,t,i,o,r){for(var s=e&16383,u=e>>14;--r>=0;){var f=this[n]&16383,a=this[n++]>>14,c=u*f+a*s;f=s*f+((c&16383)<<14)+t[i]+o,o=(f>>28)+(c>>14)+u*a,t[i++]=f&268435455}return o}var Yr=typeof navigator<"u";Yr&&Wr&&navigator.appName=="Microsoft Internet Explorer"?(U.prototype.am=yu,Ke=30):Yr&&Wr&&navigator.appName!="Netscape"?(U.prototype.am=vu,Ke=26):(U.prototype.am=mu,Ke=28);U.prototype.DB=Ke;U.prototype.DM=(1<<Ke)-1;U.prototype.DV=1<<Ke;var or=52;U.prototype.FV=Math.pow(2,or);U.prototype.F1=or-Ke;U.prototype.F2=2*Ke-or;var wu="0123456789abcdefghijklmnopqrstuvwxyz",sn=new Array,dt,Se;dt="0".charCodeAt(0);for(Se=0;Se<=9;++Se)sn[dt++]=Se;dt="a".charCodeAt(0);for(Se=10;Se<36;++Se)sn[dt++]=Se;dt="A".charCodeAt(0);for(Se=10;Se<36;++Se)sn[dt++]=Se;function zr(n){return wu.charAt(n)}function _u(n,e){var t=sn[n.charCodeAt(e)];return t??-1}function Su(n){for(var e=this.t-1;e>=0;--e)n[e]=this[e];n.t=this.t,n.s=this.s}function bu(n){this.t=1,this.s=n<0?-1:0,n>0?this[0]=n:n<-1?this[0]=n+this.DV:this.t=0}function sr(n){var e=ce();return e.fromInt(n),e}function Au(n,e){var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;for(var i=n.length,o=!1,r=0;--i>=0;){var s=_u(n,i);if(s<0){n.charAt(i)=="-"&&(o=!0);continue}o=!1,r==0?this[this.t++]=s:r+t>this.DB?(this[this.t-1]|=(s&(1<<this.DB-r)-1)<<r,this[this.t++]=s>>this.DB-r):this[this.t-1]|=s<<r,r+=t,r>=this.DB&&(r-=this.DB)}this.clamp(),o&&U.ZERO.subTo(this,this)}function Cu(){for(var n=this.s&this.DM;this.t>0&&this[this.t-1]==n;)--this.t}function Iu(n){if(this.s<0)return"-"+this.negate().toString(n);var e;if(n==16)e=4;else if(n==8)e=3;else if(n==2)e=1;else if(n==32)e=5;else if(n==4)e=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");var t=(1<<e)-1,i,o=!1,r="",s=this.t,u=this.DB-s*this.DB%e;if(s-- >0)for(u<this.DB&&(i=this[s]>>u)>0&&(o=!0,r=zr(i));s>=0;)u<e?(i=(this[s]&(1<<u)-1)<<e-u,i|=this[--s]>>(u+=this.DB-e)):(i=this[s]>>(u-=e)&t,u<=0&&(u+=this.DB,--s)),i>0&&(o=!0),o&&(r+=zr(i));return o?r:"0"}function Eu(){var n=ce();return U.ZERO.subTo(this,n),n}function Tu(){return this.s<0?this.negate():this}function Uu(n){var e=this.s-n.s;if(e!=0)return e;var t=this.t;if(e=t-n.t,e!=0)return this.s<0?-e:e;for(;--t>=0;)if((e=this[t]-n[t])!=0)return e;return 0}function ar(n){var e=1,t;return(t=n>>>16)!=0&&(n=t,e+=16),(t=n>>8)!=0&&(n=t,e+=8),(t=n>>4)!=0&&(n=t,e+=4),(t=n>>2)!=0&&(n=t,e+=2),(t=n>>1)!=0&&(n=t,e+=1),e}function xu(){return this.t<=0?0:this.DB*(this.t-1)+ar(this[this.t-1]^this.s&this.DM)}function Pu(n,e){var t;for(t=this.t-1;t>=0;--t)e[t+n]=this[t];for(t=n-1;t>=0;--t)e[t]=0;e.t=this.t+n,e.s=this.s}function Ru(n,e){for(var t=n;t<this.t;++t)e[t-n]=this[t];e.t=Math.max(this.t-n,0),e.s=this.s}function Du(n,e){var t=n%this.DB,i=this.DB-t,o=(1<<i)-1,r=Math.floor(n/this.DB),s=this.s<<t&this.DM,u;for(u=this.t-1;u>=0;--u)e[u+r+1]=this[u]>>i|s,s=(this[u]&o)<<t;for(u=r-1;u>=0;--u)e[u]=0;e[r]=s,e.t=this.t+r+1,e.s=this.s,e.clamp()}function Ou(n,e){e.s=this.s;var t=Math.floor(n/this.DB);if(t>=this.t){e.t=0;return}var i=n%this.DB,o=this.DB-i,r=(1<<i)-1;e[0]=this[t]>>i;for(var s=t+1;s<this.t;++s)e[s-t-1]|=(this[s]&r)<<o,e[s-t]=this[s]>>i;i>0&&(e[this.t-t-1]|=(this.s&r)<<o),e.t=this.t-t,e.clamp()}function Fu(n,e){for(var t=0,i=0,o=Math.min(n.t,this.t);t<o;)i+=this[t]-n[t],e[t++]=i&this.DM,i>>=this.DB;if(n.t<this.t){for(i-=n.s;t<this.t;)i+=this[t],e[t++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;t<n.t;)i-=n[t],e[t++]=i&this.DM,i>>=this.DB;i-=n.s}e.s=i<0?-1:0,i<-1?e[t++]=this.DV+i:i>0&&(e[t++]=i),e.t=t,e.clamp()}function ku(n,e){var t=this.abs(),i=n.abs(),o=t.t;for(e.t=o+i.t;--o>=0;)e[o]=0;for(o=0;o<i.t;++o)e[o+t.t]=t.am(0,i[o],e,o,0,t.t);e.s=0,e.clamp(),this.s!=n.s&&U.ZERO.subTo(e,e)}function Mu(n){for(var e=this.abs(),t=n.t=2*e.t;--t>=0;)n[t]=0;for(t=0;t<e.t-1;++t){var i=e.am(t,e[t],n,2*t,0,1);(n[t+e.t]+=e.am(t+1,2*e[t],n,2*t+1,i,e.t-t-1))>=e.DV&&(n[t+e.t]-=e.DV,n[t+e.t+1]=1)}n.t>0&&(n[n.t-1]+=e.am(t,e[t],n,2*t,0,1)),n.s=0,n.clamp()}function Nu(n,e,t){var i=n.abs();if(!(i.t<=0)){var o=this.abs();if(o.t<i.t){e!=null&&e.fromInt(0),t!=null&&this.copyTo(t);return}t==null&&(t=ce());var r=ce(),s=this.s,u=n.s,f=this.DB-ar(i[i.t-1]);f>0?(i.lShiftTo(f,r),o.lShiftTo(f,t)):(i.copyTo(r),o.copyTo(t));var a=r.t,c=r[a-1];if(c!=0){var d=c*(1<<this.F1)+(a>1?r[a-2]>>this.F2:0),v=this.FV/d,y=(1<<this.F1)/d,m=1<<this.F2,_=t.t,b=_-a,E=e??ce();for(r.dlShiftTo(b,E),t.compareTo(E)>=0&&(t[t.t++]=1,t.subTo(E,t)),U.ONE.dlShiftTo(a,E),E.subTo(r,r);r.t<a;)r[r.t++]=0;for(;--b>=0;){var S=t[--_]==c?this.DM:Math.floor(t[_]*v+(t[_-1]+m)*y);if((t[_]+=r.am(0,S,t,b,0,a))<S)for(r.dlShiftTo(b,E),t.subTo(E,t);t[_]<--S;)t.subTo(E,t)}e!=null&&(t.drShiftTo(a,e),s!=u&&U.ZERO.subTo(e,e)),t.t=a,t.clamp(),f>0&&t.rShiftTo(f,t),s<0&&U.ZERO.subTo(t,t)}}}function $u(n){var e=ce();return this.abs().divRemTo(n,null,e),this.s<0&&e.compareTo(U.ZERO)>0&&n.subTo(e,e),e}function Bu(){if(this.t<1)return 0;var n=this[0];if(!(n&1))return 0;var e=n&3;return e=e*(2-(n&15)*e)&15,e=e*(2-(n&255)*e)&255,e=e*(2-((n&65535)*e&65535))&65535,e=e*(2-n*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Lu(n){return this.compareTo(n)==0}function ju(n,e){for(var t=0,i=0,o=Math.min(n.t,this.t);t<o;)i+=this[t]+n[t],e[t++]=i&this.DM,i>>=this.DB;if(n.t<this.t){for(i+=n.s;t<this.t;)i+=this[t],e[t++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;t<n.t;)i+=n[t],e[t++]=i&this.DM,i>>=this.DB;i+=n.s}e.s=i<0?-1:0,i>0?e[t++]=i:i<-1&&(e[t++]=this.DV+i),e.t=t,e.clamp()}function Ku(n){var e=ce();return this.addTo(n,e),e}function Vu(n){var e=ce();return this.subTo(n,e),e}function Hu(n){var e=ce();return this.multiplyTo(n,e),e}function qu(n){var e=ce();return this.divRemTo(n,e,null),e}function gt(n){this.m=n,this.mp=n.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<n.DB-15)-1,this.mt2=2*n.t}function Gu(n){var e=ce();return n.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),n.s<0&&e.compareTo(U.ZERO)>0&&this.m.subTo(e,e),e}function Wu(n){var e=ce();return n.copyTo(e),this.reduce(e),e}function Yu(n){for(;n.t<=this.mt2;)n[n.t++]=0;for(var e=0;e<this.m.t;++e){var t=n[e]&32767,i=t*this.mpl+((t*this.mph+(n[e]>>15)*this.mpl&this.um)<<15)&n.DM;for(t=e+this.m.t,n[t]+=this.m.am(0,i,n,e,0,this.m.t);n[t]>=n.DV;)n[t]-=n.DV,n[++t]++}n.clamp(),n.drShiftTo(this.m.t,n),n.compareTo(this.m)>=0&&n.subTo(this.m,n)}function zu(n,e){n.squareTo(e),this.reduce(e)}function Ju(n,e,t){n.multiplyTo(e,t),this.reduce(t)}gt.prototype.convert=Gu;gt.prototype.revert=Wu;gt.prototype.reduce=Yu;gt.prototype.mulTo=Ju;gt.prototype.sqrTo=zu;function Zu(n,e,t){var i=n.bitLength(),o,r=sr(1),s=new gt(e);if(i<=0)return r;i<18?o=1:i<48?o=3:i<144?o=4:i<768?o=5:o=6;var u=new Array,f=3,a=o-1,c=(1<<o)-1;if(u[1]=s.convert(this),o>1){var d=ce();for(s.sqrTo(u[1],d);f<=c;)u[f]=ce(),s.mulTo(d,u[f-2],u[f]),f+=2}var v=n.t-1,y,m=!0,_=ce(),b;for(i=ar(n[v])-1;v>=0;){for(i>=a?y=n[v]>>i-a&c:(y=(n[v]&(1<<i+1)-1)<<a-i,v>0&&(y|=n[v-1]>>this.DB+i-a)),f=o;!(y&1);)y>>=1,--f;if((i-=f)<0&&(i+=this.DB,--v),m)u[y].copyTo(r),m=!1;else{for(;f>1;)s.sqrTo(r,_),s.sqrTo(_,r),f-=2;f>0?s.sqrTo(r,_):(b=r,r=_,_=b),s.mulTo(_,u[y],r)}for(;v>=0&&!(n[v]&1<<i);)s.sqrTo(r,_),b=r,r=_,_=b,--i<0&&(i=this.DB-1,--v)}var E=s.revert(r);return t(null,E),E}U.prototype.copyTo=Su;U.prototype.fromInt=bu;U.prototype.fromString=Au;U.prototype.clamp=Cu;U.prototype.dlShiftTo=Pu;U.prototype.drShiftTo=Ru;U.prototype.lShiftTo=Du;U.prototype.rShiftTo=Ou;U.prototype.subTo=Fu;U.prototype.multiplyTo=ku;U.prototype.squareTo=Mu;U.prototype.divRemTo=Nu;U.prototype.invDigit=Bu;U.prototype.addTo=ju;U.prototype.toString=Iu;U.prototype.negate=Eu;U.prototype.abs=Tu;U.prototype.compareTo=Uu;U.prototype.bitLength=xu;U.prototype.mod=$u;U.prototype.equals=Lu;U.prototype.add=Ku;U.prototype.subtract=Vu;U.prototype.multiply=Hu;U.prototype.divide=qu;U.prototype.modPow=Zu;U.ZERO=sr(0);U.ONE=sr(1);/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */function An(n){return q.Buffer.from(new gu().random(n).toString(),"hex")}var Xu=/^[89a-f]/i,Qu="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",ec="userAttributes.",rt=function(){function n(t){this.N=new U(Qu,16),this.g=new U("2",16),this.k=new U(this.hexHash(""+this.padHex(this.N)+this.padHex(this.g)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=q.Buffer.from("Caldera Derived Key","utf8"),this.poolName=t}var e=n.prototype;return e.getSmallAValue=function(){return this.smallAValue},e.getLargeAValue=function(i){var o=this;this.largeAValue?i(null,this.largeAValue):this.calculateA(this.smallAValue,function(r,s){r&&i(r,null),o.largeAValue=s,i(null,o.largeAValue)})},e.generateRandomSmallA=function(){var i=An(128).toString("hex"),o=new U(i,16);return o},e.generateRandomString=function(){return An(40).toString("base64")},e.getRandomPassword=function(){return this.randomPassword},e.getSaltDevices=function(){return this.SaltToHashDevices},e.getVerifierDevices=function(){return this.verifierDevices},e.generateHashDevice=function(i,o,r){var s=this;this.randomPassword=this.generateRandomString();var u=""+i+o+":"+this.randomPassword,f=this.hash(u),a=An(16).toString("hex");this.SaltToHashDevices=this.padHex(new U(a,16)),this.g.modPow(new U(this.hexHash(this.SaltToHashDevices+f),16),this.N,function(c,d){c&&r(c,null),s.verifierDevices=s.padHex(d),r(null,null)})},e.calculateA=function(i,o){var r=this;this.g.modPow(i,this.N,function(s,u){s&&o(s,null),u.mod(r.N).equals(U.ZERO)&&o(new Error("Illegal paramater. A mod N cannot be 0."),null),o(null,u)})},e.calculateU=function(i,o){this.UHexHash=this.hexHash(this.padHex(i)+this.padHex(o));var r=new U(this.UHexHash,16);return r},e.hash=function(i){var o=new Ze.Sha256;o.update(i);var r=o.digestSync(),s=q.Buffer.from(r).toString("hex");return new Array(64-s.length).join("0")+s},e.hexHash=function(i){return this.hash(q.Buffer.from(i,"hex"))},e.computehkdf=function(i,o){var r=q.Buffer.concat([this.infoBits,q.Buffer.from(String.fromCharCode(1),"utf8")]),s=new Ze.Sha256(o);s.update(i);var u=s.digestSync(),f=new Ze.Sha256(u);f.update(r);var a=f.digestSync(),c=a,d=c.slice(0,16);return d},e.getPasswordAuthenticationKey=function(i,o,r,s,u){var f=this;if(r.mod(this.N).equals(U.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,r),this.UValue.equals(U.ZERO))throw new Error("U cannot be zero.");var a=""+this.poolName+i+":"+o,c=this.hash(a),d=new U(this.hexHash(this.padHex(s)+c),16);this.calculateS(d,r,function(v,y){v&&u(v,null);var m=f.computehkdf(q.Buffer.from(f.padHex(y),"hex"),q.Buffer.from(f.padHex(f.UValue),"hex"));u(null,m)})},e.calculateS=function(i,o,r){var s=this;this.g.modPow(i,this.N,function(u,f){u&&r(u,null);var a=o.subtract(s.k.multiply(f));a.modPow(s.smallAValue.add(s.UValue.multiply(i)),s.N,function(c,d){c&&r(c,null),r(null,d.mod(s.N))})})},e.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return ec},e.padHex=function(i){if(!(i instanceof U))throw new Error("Not a BigInteger");var o=i.compareTo(U.ZERO)<0,r=i.abs().toString(16);if(r=r.length%2!==0?"0"+r:r,r=Xu.test(r)?"00"+r:r,o){var s=r.split("").map(function(f){var a=~parseInt(f,16)&15;return"0123456789ABCDEF".charAt(a)}).join(""),u=new U(s,16).add(U.ONE);r=u.toString(16),r.toUpperCase().startsWith("FF8")&&(r=r.substring(2))}return r},n}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var Fi=function(){function n(t){this.jwtToken=t||"",this.payload=this.decodePayload()}var e=n.prototype;return e.getJwtToken=function(){return this.jwtToken},e.getExpiration=function(){return this.payload.exp},e.getIssuedAt=function(){return this.payload.iat},e.decodePayload=function(){var i=this.jwtToken.split(".")[1];try{return JSON.parse(q.Buffer.from(i,"base64").toString("utf8"))}catch{return{}}},n}();function tc(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Mn(n,e)}function Mn(n,e){return Mn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},Mn(n,e)}var Nn=function(n){tc(e,n);function e(t){var i=t===void 0?{}:t,o=i.AccessToken;return n.call(this,o||"")||this}return e}(Fi);function nc(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,$n(n,e)}function $n(n,e){return $n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},$n(n,e)}var Bn=function(n){nc(e,n);function e(t){var i=t===void 0?{}:t,o=i.IdToken;return n.call(this,o||"")||this}return e}(Fi);/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var Ln=function(){function n(t){var i=t===void 0?{}:t,o=i.RefreshToken;this.token=o||""}var e=n.prototype;return e.getToken=function(){return this.token},n}(),rc="5.0.4";/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var ic="aws-amplify/"+rc,ki={userAgent:ic,isReactNative:typeof navigator<"u"&&navigator.product==="ReactNative"},oc=function(){return ki.userAgent};/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var jn=function(){function n(t){var i=t===void 0?{}:t,o=i.IdToken,r=i.RefreshToken,s=i.AccessToken,u=i.ClockDrift;if(s==null||o==null)throw new Error("Id token and Access Token must be present.");this.idToken=o,this.refreshToken=r,this.accessToken=s,this.clockDrift=u===void 0?this.calculateClockDrift():u}var e=n.prototype;return e.getIdToken=function(){return this.idToken},e.getRefreshToken=function(){return this.refreshToken},e.getAccessToken=function(){return this.accessToken},e.getClockDrift=function(){return this.clockDrift},e.calculateClockDrift=function(){var i=Math.floor(new Date/1e3),o=Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt());return i-o},e.isValid=function(){var i=Math.floor(new Date/1e3),o=i-this.clockDrift;return o<this.accessToken.getExpiration()&&o<this.idToken.getExpiration()},n}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var sc=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ac=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Jr=function(){function n(){}var e=n.prototype;return e.getNowString=function(){var i=new Date,o=ac[i.getUTCDay()],r=sc[i.getUTCMonth()],s=i.getUTCDate(),u=i.getUTCHours();u<10&&(u="0"+u);var f=i.getUTCMinutes();f<10&&(f="0"+f);var a=i.getUTCSeconds();a<10&&(a="0"+a);var c=i.getUTCFullYear(),d=o+" "+r+" "+s+" "+u+":"+f+":"+a+" UTC "+c;return d},n}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var st=function(){function n(t){var i=t===void 0?{}:t,o=i.Name,r=i.Value;this.Name=o||"",this.Value=r||""}var e=n.prototype;return e.getValue=function(){return this.Value},e.setValue=function(i){return this.Value=i,this},e.getName=function(){return this.Name},e.setName=function(i){return this.Name=i,this},e.toString=function(){return JSON.stringify(this)},e.toJSON=function(){return{Name:this.Name,Value:this.Value}},n}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var qe={},uc=function(){function n(){}return n.setItem=function(t,i){return qe[t]=i,qe[t]},n.getItem=function(t){return Object.prototype.hasOwnProperty.call(qe,t)?qe[t]:void 0},n.removeItem=function(t){return delete qe[t]},n.clear=function(){return qe={},qe},n}(),Mi=function(){function n(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch{this.storageWindow=uc}}var e=n.prototype;return e.getStorage=function(){return this.storageWindow},n}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var cc=typeof navigator<"u",Zr=cc?ki.isReactNative?"react-native":navigator.userAgent:"nodejs",Kn=function(){function n(t){if(t==null||t.Username==null||t.Pool==null)throw new Error("Username and Pool information are required.");this.username=t.Username||"",this.pool=t.Pool,this.Session=null,this.client=t.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=t.Storage||new Mi().getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var e=n.prototype;return e.setSignInUserSession=function(i){this.clearCachedUserData(),this.signInUserSession=i,this.cacheTokens()},e.getSignInUserSession=function(){return this.signInUserSession},e.getUsername=function(){return this.username},e.getAuthenticationFlowType=function(){return this.authenticationFlowType},e.setAuthenticationFlowType=function(i){this.authenticationFlowType=i},e.initiateAuth=function(i,o){var r=this,s=i.getAuthParameters();s.USERNAME=this.username;var u=Object.keys(i.getValidationData()).length!==0?i.getValidationData():i.getClientMetadata(),f={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:s,ClientMetadata:u};this.getUserContextData()&&(f.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",f,function(a,c){if(a)return o.onFailure(a);var d=c.ChallengeName,v=c.ChallengeParameters;return d==="CUSTOM_CHALLENGE"?(r.Session=c.Session,o.customChallenge(v)):(r.signInUserSession=r.getCognitoUserSession(c.AuthenticationResult),r.cacheTokens(),o.onSuccess(r.signInUserSession))})},e.authenticateUser=function(i,o){return this.authenticationFlowType==="USER_PASSWORD_AUTH"?this.authenticateUserPlainUsernamePassword(i,o):this.authenticationFlowType==="USER_SRP_AUTH"||this.authenticationFlowType==="CUSTOM_AUTH"?this.authenticateUserDefaultAuth(i,o):o.onFailure(new Error("Authentication flow type is invalid."))},e.authenticateUserDefaultAuth=function(i,o){var r=this,s=new rt(this.pool.getUserPoolName()),u=new Jr,f,a,c={};this.deviceKey!=null&&(c.DEVICE_KEY=this.deviceKey),c.USERNAME=this.username,s.getLargeAValue(function(d,v){d&&o.onFailure(d),c.SRP_A=v.toString(16),r.authenticationFlowType==="CUSTOM_AUTH"&&(c.CHALLENGE_NAME="SRP_A");var y=Object.keys(i.getValidationData()).length!==0?i.getValidationData():i.getClientMetadata(),m={AuthFlow:r.authenticationFlowType,ClientId:r.pool.getClientId(),AuthParameters:c,ClientMetadata:y};r.getUserContextData(r.username)&&(m.UserContextData=r.getUserContextData(r.username)),r.client.request("InitiateAuth",m,function(_,b){if(_)return o.onFailure(_);var E=b.ChallengeParameters;r.username=E.USER_ID_FOR_SRP,r.userDataKey=r.keyPrefix+"."+r.username+".userData",f=new U(E.SRP_B,16),a=new U(E.SALT,16),r.getCachedDeviceKeyAndPassword(),s.getPasswordAuthenticationKey(r.username,i.getPassword(),f,a,function(S,T){S&&o.onFailure(S);var x=u.getNowString(),D=q.Buffer.concat([q.Buffer.from(r.pool.getUserPoolName(),"utf8"),q.Buffer.from(r.username,"utf8"),q.Buffer.from(E.SECRET_BLOCK,"base64"),q.Buffer.from(x,"utf8")]),F=new Ze.Sha256(T);F.update(D);var N=F.digestSync(),M=q.Buffer.from(N).toString("base64"),H={};H.USERNAME=r.username,H.PASSWORD_CLAIM_SECRET_BLOCK=E.SECRET_BLOCK,H.TIMESTAMP=x,H.PASSWORD_CLAIM_SIGNATURE=M,r.deviceKey!=null&&(H.DEVICE_KEY=r.deviceKey);var ie=function be(fe,ve){return r.client.request("RespondToAuthChallenge",fe,function(le,Ae){return le&&le.code==="ResourceNotFoundException"&&le.message.toLowerCase().indexOf("device")!==-1?(H.DEVICE_KEY=null,r.deviceKey=null,r.randomPassword=null,r.deviceGroupKey=null,r.clearCachedDeviceKeyAndPassword(),be(fe,ve)):ve(le,Ae)})},he={ChallengeName:"PASSWORD_VERIFIER",ClientId:r.pool.getClientId(),ChallengeResponses:H,Session:b.Session,ClientMetadata:y};r.getUserContextData()&&(he.UserContextData=r.getUserContextData()),ie(he,function(be,fe){return be?o.onFailure(be):r.authenticateUserInternal(fe,s,o)})})})})},e.authenticateUserPlainUsernamePassword=function(i,o){var r=this,s={};if(s.USERNAME=this.username,s.PASSWORD=i.getPassword(),!s.PASSWORD){o.onFailure(new Error("PASSWORD parameter is required"));return}var u=new rt(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),this.deviceKey!=null&&(s.DEVICE_KEY=this.deviceKey);var f=Object.keys(i.getValidationData()).length!==0?i.getValidationData():i.getClientMetadata(),a={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:s,ClientMetadata:f};this.getUserContextData(this.username)&&(a.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",a,function(c,d){return c?o.onFailure(c):r.authenticateUserInternal(d,u,o)})},e.authenticateUserInternal=function(i,o,r){var s=this,u=i.ChallengeName,f=i.ChallengeParameters;if(u==="SMS_MFA")return this.Session=i.Session,r.mfaRequired(u,f);if(u==="SELECT_MFA_TYPE")return this.Session=i.Session,r.selectMFAType(u,f);if(u==="MFA_SETUP")return this.Session=i.Session,r.mfaSetup(u,f);if(u==="SOFTWARE_TOKEN_MFA")return this.Session=i.Session,r.totpRequired(u,f);if(u==="CUSTOM_CHALLENGE")return this.Session=i.Session,r.customChallenge(f);if(u==="NEW_PASSWORD_REQUIRED"){this.Session=i.Session;var a=null,c=null,d=[],v=o.getNewPasswordRequiredChallengeUserAttributePrefix();if(f&&(a=JSON.parse(i.ChallengeParameters.userAttributes),c=JSON.parse(i.ChallengeParameters.requiredAttributes)),c)for(var y=0;y<c.length;y++)d[y]=c[y].substr(v.length);return r.newPasswordRequired(a,d)}if(u==="DEVICE_SRP_AUTH"){this.Session=i.Session,this.getDeviceResponse(r);return}this.signInUserSession=this.getCognitoUserSession(i.AuthenticationResult),this.challengeName=u,this.cacheTokens();var m=i.AuthenticationResult.NewDeviceMetadata;if(m==null)return r.onSuccess(this.signInUserSession);o.generateHashDevice(i.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,i.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(_){if(_)return r.onFailure(_);var b={Salt:q.Buffer.from(o.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:q.Buffer.from(o.getVerifierDevices(),"hex").toString("base64")};s.verifierDevices=b.PasswordVerifier,s.deviceGroupKey=m.DeviceGroupKey,s.randomPassword=o.getRandomPassword(),s.client.request("ConfirmDevice",{DeviceKey:m.DeviceKey,AccessToken:s.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:b,DeviceName:Zr},function(E,S){return E?r.onFailure(E):(s.deviceKey=i.AuthenticationResult.NewDeviceMetadata.DeviceKey,s.cacheDeviceKeyAndPassword(),S.UserConfirmationNecessary===!0?r.onSuccess(s.signInUserSession,S.UserConfirmationNecessary):r.onSuccess(s.signInUserSession))})})},e.completeNewPasswordChallenge=function(i,o,r,s){var u=this;if(!i)return r.onFailure(new Error("New password is required."));var f=new rt(this.pool.getUserPoolName()),a=f.getNewPasswordRequiredChallengeUserAttributePrefix(),c={};o&&Object.keys(o).forEach(function(v){c[a+v]=o[v]}),c.NEW_PASSWORD=i,c.USERNAME=this.username;var d={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:c,Session:this.Session,ClientMetadata:s};this.getUserContextData()&&(d.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",d,function(v,y){return v?r.onFailure(v):u.authenticateUserInternal(y,f,r)})},e.getDeviceResponse=function(i,o){var r=this,s=new rt(this.deviceGroupKey),u=new Jr,f={};f.USERNAME=this.username,f.DEVICE_KEY=this.deviceKey,s.getLargeAValue(function(a,c){a&&i.onFailure(a),f.SRP_A=c.toString(16);var d={ChallengeName:"DEVICE_SRP_AUTH",ClientId:r.pool.getClientId(),ChallengeResponses:f,ClientMetadata:o,Session:r.Session};r.getUserContextData()&&(d.UserContextData=r.getUserContextData()),r.client.request("RespondToAuthChallenge",d,function(v,y){if(v)return i.onFailure(v);var m=y.ChallengeParameters,_=new U(m.SRP_B,16),b=new U(m.SALT,16);s.getPasswordAuthenticationKey(r.deviceKey,r.randomPassword,_,b,function(E,S){if(E)return i.onFailure(E);var T=u.getNowString(),x=q.Buffer.concat([q.Buffer.from(r.deviceGroupKey,"utf8"),q.Buffer.from(r.deviceKey,"utf8"),q.Buffer.from(m.SECRET_BLOCK,"base64"),q.Buffer.from(T,"utf8")]),D=new Ze.Sha256(S);D.update(x);var F=D.digestSync(),N=q.Buffer.from(F).toString("base64"),M={};M.USERNAME=r.username,M.PASSWORD_CLAIM_SECRET_BLOCK=m.SECRET_BLOCK,M.TIMESTAMP=T,M.PASSWORD_CLAIM_SIGNATURE=N,M.DEVICE_KEY=r.deviceKey;var H={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:r.pool.getClientId(),ChallengeResponses:M,Session:y.Session};r.getUserContextData()&&(H.UserContextData=r.getUserContextData()),r.client.request("RespondToAuthChallenge",H,function(ie,he){return ie?i.onFailure(ie):(r.signInUserSession=r.getCognitoUserSession(he.AuthenticationResult),r.cacheTokens(),i.onSuccess(r.signInUserSession))})})})})},e.confirmRegistration=function(i,o,r,s){var u={ClientId:this.pool.getClientId(),ConfirmationCode:i,Username:this.username,ForceAliasCreation:o,ClientMetadata:s};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",u,function(f){return f?r(f,null):r(null,"SUCCESS")})},e.sendCustomChallengeAnswer=function(i,o,r){var s=this,u={};u.USERNAME=this.username,u.ANSWER=i;var f=new rt(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),this.deviceKey!=null&&(u.DEVICE_KEY=this.deviceKey);var a={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:u,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:r};this.getUserContextData()&&(a.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",a,function(c,d){return c?o.onFailure(c):s.authenticateUserInternal(d,f,o)})},e.sendMFACode=function(i,o,r,s){var u=this,f={};f.USERNAME=this.username,f.SMS_MFA_CODE=i;var a=r||"SMS_MFA";a==="SOFTWARE_TOKEN_MFA"&&(f.SOFTWARE_TOKEN_MFA_CODE=i),this.deviceKey!=null&&(f.DEVICE_KEY=this.deviceKey);var c={ChallengeName:a,ChallengeResponses:f,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:s};this.getUserContextData()&&(c.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",c,function(d,v){if(d)return o.onFailure(d);var y=v.ChallengeName;if(y==="DEVICE_SRP_AUTH"){u.getDeviceResponse(o);return}if(u.signInUserSession=u.getCognitoUserSession(v.AuthenticationResult),u.cacheTokens(),v.AuthenticationResult.NewDeviceMetadata==null)return o.onSuccess(u.signInUserSession);var m=new rt(u.pool.getUserPoolName());m.generateHashDevice(v.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,v.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(_){if(_)return o.onFailure(_);var b={Salt:q.Buffer.from(m.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:q.Buffer.from(m.getVerifierDevices(),"hex").toString("base64")};u.verifierDevices=b.PasswordVerifier,u.deviceGroupKey=v.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,u.randomPassword=m.getRandomPassword(),u.client.request("ConfirmDevice",{DeviceKey:v.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:u.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:b,DeviceName:Zr},function(E,S){return E?o.onFailure(E):(u.deviceKey=v.AuthenticationResult.NewDeviceMetadata.DeviceKey,u.cacheDeviceKeyAndPassword(),S.UserConfirmationNecessary===!0?o.onSuccess(u.signInUserSession,S.UserConfirmationNecessary):o.onSuccess(u.signInUserSession))})})})},e.changePassword=function(i,o,r,s){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return r(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:i,ProposedPassword:o,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:s},function(u){return u?r(u,null):r(null,"SUCCESS")})},e.enableMFA=function(i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i(new Error("User is not authenticated"),null);var o=[],r={DeliveryMedium:"SMS",AttributeName:"phone_number"};o.push(r),this.client.request("SetUserSettings",{MFAOptions:o,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(s){return s?i(s,null):i(null,"SUCCESS")})},e.setUserMfaPreference=function(i,o,r){if(this.signInUserSession==null||!this.signInUserSession.isValid())return r(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:i,SoftwareTokenMfaSettings:o,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(s){return s?r(s,null):r(null,"SUCCESS")})},e.disableMFA=function(i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i(new Error("User is not authenticated"),null);var o=[];this.client.request("SetUserSettings",{MFAOptions:o,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(r){return r?i(r,null):i(null,"SUCCESS")})},e.deleteUser=function(i,o){var r=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return i(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:o},function(s){return s?i(s,null):(r.clearCachedUser(),i(null,"SUCCESS"))})},e.updateAttributes=function(i,o,r){var s=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return o(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:i,ClientMetadata:r},function(u,f){return u?o(u,null):s.getUserData(function(){return o(null,"SUCCESS",f)},{bypassCache:!0})})},e.getUserAttributes=function(i){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return i(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(o,r){if(o)return i(o,null);for(var s=[],u=0;u<r.UserAttributes.length;u++){var f={Name:r.UserAttributes[u].Name,Value:r.UserAttributes[u].Value},a=new st(f);s.push(a)}return i(null,s)})},e.getMFAOptions=function(i){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return i(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(o,r){return o?i(o,null):i(null,r.MFAOptions)})},e.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},e.refreshSessionIfPossible=function(i){var o=this;return i===void 0&&(i={}),new Promise(function(r){var s=o.signInUserSession.getRefreshToken();s&&s.getToken()?o.refreshSession(s,r,i.clientMetadata):r()})},e.getUserData=function(i,o){var r=this;if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return this.clearCachedUserData(),i(new Error("User is not authenticated"),null);var s=this.getUserDataFromCache();if(!s){this.fetchUserData().then(function(u){i(null,u)}).catch(i);return}if(this.isFetchUserDataAndTokenRequired(o)){this.fetchUserData().then(function(u){return r.refreshSessionIfPossible(o).then(function(){return u})}).then(function(u){return i(null,u)}).catch(i);return}try{i(null,JSON.parse(s));return}catch(u){this.clearCachedUserData(),i(u,null);return}},e.getUserDataFromCache=function(){var i=this.storage.getItem(this.userDataKey);return i},e.isFetchUserDataAndTokenRequired=function(i){var o=i||{},r=o.bypassCache,s=r===void 0?!1:r;return s},e.fetchUserData=function(){var i=this;return this.createGetUserRequest().then(function(o){return i.cacheUserData(o),o})},e.deleteAttributes=function(i,o){var r=this;if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return o(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(s){return s?o(s,null):r.getUserData(function(){return o(null,"SUCCESS")},{bypassCache:!0})})},e.resendConfirmationCode=function(i,o){var r={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:o};this.client.request("ResendConfirmationCode",r,function(s,u){return s?i(s,null):i(null,u)})},e.getSession=function(i,o){if(o===void 0&&(o={}),this.username==null)return i(new Error("Username is null. Cannot retrieve a new session"),null);if(this.signInUserSession!=null&&this.signInUserSession.isValid())return i(null,this.signInUserSession);var r="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,s=r+".idToken",u=r+".accessToken",f=r+".refreshToken",a=r+".clockDrift";if(this.storage.getItem(s)){var c=new Bn({IdToken:this.storage.getItem(s)}),d=new Nn({AccessToken:this.storage.getItem(u)}),v=new Ln({RefreshToken:this.storage.getItem(f)}),y=parseInt(this.storage.getItem(a),0)||0,m={IdToken:c,AccessToken:d,RefreshToken:v,ClockDrift:y},_=new jn(m);if(_.isValid())return this.signInUserSession=_,i(null,this.signInUserSession);if(!v.getToken())return i(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(v,i,o.clientMetadata)}else i(new Error("Local storage is missing an ID Token, Please authenticate"),null)},e.refreshSession=function(i,o,r){var s=this,u=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(o):o,f={};f.REFRESH_TOKEN=i.getToken();var a="CognitoIdentityServiceProvider."+this.pool.getClientId(),c=a+".LastAuthUser";if(this.storage.getItem(c)){this.username=this.storage.getItem(c);var d=a+"."+this.username+".deviceKey";this.deviceKey=this.storage.getItem(d),f.DEVICE_KEY=this.deviceKey}var v={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:f,ClientMetadata:r};this.getUserContextData()&&(v.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",v,function(y,m){if(y)return y.code==="NotAuthorizedException"&&s.clearCachedUser(),u(y,null);if(m){var _=m.AuthenticationResult;return Object.prototype.hasOwnProperty.call(_,"RefreshToken")||(_.RefreshToken=i.getToken()),s.signInUserSession=s.getCognitoUserSession(_),s.cacheTokens(),u(null,s.signInUserSession)}})},e.cacheTokens=function(){var i="CognitoIdentityServiceProvider."+this.pool.getClientId(),o=i+"."+this.username+".idToken",r=i+"."+this.username+".accessToken",s=i+"."+this.username+".refreshToken",u=i+"."+this.username+".clockDrift",f=i+".LastAuthUser";this.storage.setItem(o,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(r,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(s,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(u,""+this.signInUserSession.getClockDrift()),this.storage.setItem(f,this.username)},e.cacheUserData=function(i){this.storage.setItem(this.userDataKey,JSON.stringify(i))},e.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},e.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},e.cacheDeviceKeyAndPassword=function(){var i="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,o=i+".deviceKey",r=i+".randomPasswordKey",s=i+".deviceGroupKey";this.storage.setItem(o,this.deviceKey),this.storage.setItem(r,this.randomPassword),this.storage.setItem(s,this.deviceGroupKey)},e.getCachedDeviceKeyAndPassword=function(){var i="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,o=i+".deviceKey",r=i+".randomPasswordKey",s=i+".deviceGroupKey";this.storage.getItem(o)&&(this.deviceKey=this.storage.getItem(o),this.randomPassword=this.storage.getItem(r),this.deviceGroupKey=this.storage.getItem(s))},e.clearCachedDeviceKeyAndPassword=function(){var i="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,o=i+".deviceKey",r=i+".randomPasswordKey",s=i+".deviceGroupKey";this.storage.removeItem(o),this.storage.removeItem(r),this.storage.removeItem(s)},e.clearCachedTokens=function(){var i="CognitoIdentityServiceProvider."+this.pool.getClientId(),o=i+"."+this.username+".idToken",r=i+"."+this.username+".accessToken",s=i+"."+this.username+".refreshToken",u=i+".LastAuthUser",f=i+"."+this.username+".clockDrift";this.storage.removeItem(o),this.storage.removeItem(r),this.storage.removeItem(s),this.storage.removeItem(u),this.storage.removeItem(f)},e.getCognitoUserSession=function(i){var o=new Bn(i),r=new Nn(i),s=new Ln(i),u={IdToken:o,AccessToken:r,RefreshToken:s};return new jn(u)},e.forgotPassword=function(i,o){var r={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:o};this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",r,function(s,u){return s?i.onFailure(s):typeof i.inputVerificationCode=="function"?i.inputVerificationCode(u):i.onSuccess(u)})},e.confirmPassword=function(i,o,r,s){var u={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:i,Password:o,ClientMetadata:s};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",u,function(f){return f?r.onFailure(f):r.onSuccess("SUCCESS")})},e.getAttributeVerificationCode=function(i,o,r){if(this.signInUserSession==null||!this.signInUserSession.isValid())return o.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:r},function(s,u){return s?o.onFailure(s):typeof o.inputVerificationCode=="function"?o.inputVerificationCode(u):o.onSuccess("SUCCESS")})},e.verifyAttribute=function(i,o,r){if(this.signInUserSession==null||!this.signInUserSession.isValid())return r.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:i,Code:o,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(s){return s?r.onFailure(s):r.onSuccess("SUCCESS")})},e.getDevice=function(i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(o,r){return o?i.onFailure(o):i.onSuccess(r)})},e.forgetSpecificDevice=function(i,o){if(this.signInUserSession==null||!this.signInUserSession.isValid())return o.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:i},function(r){return r?o.onFailure(r):o.onSuccess("SUCCESS")})},e.forgetDevice=function(i){var o=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:i.onFailure,onSuccess:function(s){return o.deviceKey=null,o.deviceGroupKey=null,o.randomPassword=null,o.clearCachedDeviceKeyAndPassword(),i.onSuccess(s)}})},e.setDeviceStatusRemembered=function(i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(o){return o?i.onFailure(o):i.onSuccess("SUCCESS")})},e.setDeviceStatusNotRemembered=function(i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(o){return o?i.onFailure(o):i.onSuccess("SUCCESS")})},e.listDevices=function(i,o,r){if(this.signInUserSession==null||!this.signInUserSession.isValid())return r.onFailure(new Error("User is not authenticated"));var s={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:i};o&&(s.PaginationToken=o),this.client.request("ListDevices",s,function(u,f){return u?r.onFailure(u):r.onSuccess(f)})},e.globalSignOut=function(i){var o=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(r){return r?i.onFailure(r):(o.clearCachedUser(),i.onSuccess("SUCCESS"))})},e.signOut=function(i){var o=this;if(!i||typeof i!="function"){this.cleanClientData();return}this.getSession(function(r,s){if(r)return i(r);o.revokeTokens(function(u){o.cleanClientData(),i(u)})})},e.revokeTokens=function(i){if(i===void 0&&(i=function(){}),typeof i!="function")throw new Error("Invalid revokeTokenCallback. It should be a function.");if(!this.signInUserSession){var o=new Error("User is not authenticated");return i(o)}if(!this.signInUserSession.getAccessToken()){var r=new Error("No Access token available");return i(r)}var s=this.signInUserSession.getRefreshToken().getToken(),u=this.signInUserSession.getAccessToken();if(this.isSessionRevocable(u)&&s)return this.revokeToken({token:s,callback:i});i()},e.isSessionRevocable=function(i){if(i&&typeof i.decodePayload=="function")try{var o=i.decodePayload(),r=o.origin_jti;return!!r}catch{}return!1},e.cleanClientData=function(){this.signInUserSession=null,this.clearCachedUser()},e.revokeToken=function(i){var o=i.token,r=i.callback;this.client.requestWithRetry("RevokeToken",{Token:o,ClientId:this.pool.getClientId()},function(s){if(s)return r(s);r()})},e.sendMFASelectionAnswer=function(i,o){var r=this,s={};s.USERNAME=this.username,s.ANSWER=i;var u={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:s,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",u,function(f,a){if(f)return o.onFailure(f);if(r.Session=a.Session,i==="SMS_MFA")return o.mfaRequired(a.ChallengeName,a.ChallengeParameters);if(i==="SOFTWARE_TOKEN_MFA")return o.totpRequired(a.ChallengeName,a.ChallengeParameters)})},e.getUserContextData=function(){var i=this.pool;return i.getUserContextData(this.username)},e.associateSoftwareToken=function(i){var o=this;this.signInUserSession!=null&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(r,s){return r?i.onFailure(r):i.associateSecretCode(s.SecretCode)}):this.client.request("AssociateSoftwareToken",{Session:this.Session},function(r,s){return r?i.onFailure(r):(o.Session=s.Session,i.associateSecretCode(s.SecretCode))})},e.verifySoftwareToken=function(i,o,r){var s=this;this.signInUserSession!=null&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:i,FriendlyDeviceName:o},function(u,f){return u?r.onFailure(u):r.onSuccess(f)}):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:i,FriendlyDeviceName:o},function(u,f){if(u)return r.onFailure(u);s.Session=f.Session;var a={};a.USERNAME=s.username;var c={ChallengeName:"MFA_SETUP",ClientId:s.pool.getClientId(),ChallengeResponses:a,Session:s.Session};s.getUserContextData()&&(c.UserContextData=s.getUserContextData()),s.client.request("RespondToAuthChallenge",c,function(d,v){return d?r.onFailure(d):(s.signInUserSession=s.getCognitoUserSession(v.AuthenticationResult),s.cacheTokens(),r.onSuccess(s.signInUserSession))})})},n}(),fc="auth";function je(){}je.prototype.userAgent=oc();var lc=function(){je.category=fc},Xr=function(e){je.framework=e},hc=function(e){var t=je.category?" "+je.category:"",i=je.framework?" framework/"+je.framework:"",o=""+je.prototype.userAgent+t+i;return o};function dc(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Tt(n,e)}function Vn(n){var e=typeof Map=="function"?new Map:void 0;return Vn=function(i){if(i===null||!pc(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(i))return e.get(i);e.set(i,o)}function o(){return Nt(i,arguments,Hn(this).constructor)}return o.prototype=Object.create(i.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Tt(o,i)},Vn(n)}function Nt(n,e,t){return gc()?Nt=Reflect.construct.bind():Nt=function(o,r,s){var u=[null];u.push.apply(u,r);var f=Function.bind.apply(o,u),a=new f;return s&&Tt(a,s.prototype),a},Nt.apply(null,arguments)}function gc(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function pc(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function Tt(n,e){return Tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},Tt(n,e)}function Hn(n){return Hn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Hn(n)}var vc=function(n){dc(e,n);function e(t,i,o,r){var s;return s=n.call(this,t)||this,s.code=i,s.name=o,s.statusCode=r,s}return e}(Vn(Error)),yc=function(){function n(t,i,o){this.endpoint=i||"https://cognito-idp."+t+".amazonaws.com/";var r=o||{},s=r.credentials;this.fetchOptions=s?{credentials:s}:{}}var e=n.prototype;return e.promisifyRequest=function(i,o){var r=this;return new Promise(function(s,u){r.request(i,o,function(f,a){f?u(new vc(f.message,f.code,f.name,f.statusCode)):s(a)})})},e.requestWithRetry=function(i,o,r){var s=this,u=5*1e3;Sc(function(f){return new Promise(function(a,c){s.request(i,f,function(d,v){d?c(d):a(v)})})},[o],u).then(function(f){return r(null,f)}).catch(function(f){return r(f)})},e.request=function(i,o,r){var s={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+i,"X-Amz-User-Agent":hc(),"Cache-Control":"no-store"},u=Object.assign({},this.fetchOptions,{headers:s,method:"POST",mode:"cors",body:JSON.stringify(o)}),f;fetch(this.endpoint,u).then(function(a){return f=a,a},function(a){throw a instanceof TypeError?new Error("Network error"):a}).then(function(a){return a.json().catch(function(){return{}})}).then(function(a){if(f.ok)return r(null,a);var c=(a.__type||a.code).split("#").pop(),d=new Error(a.message||a.Message||null);return d.name=c,d.code=c,r(d)}).catch(function(a){if(f&&f.headers&&f.headers.get("x-amzn-errortype"))try{var c=f.headers.get("x-amzn-errortype").split(":")[0],d=new Error(f.status?f.status.toString():null);return d.code=c,d.name=c,d.statusCode=f.status,r(d)}catch{return r(a)}else a instanceof Error&&a.message==="Network error"&&(a.code="NetworkError");return r(a)})},n}(),kt={debug:function(){}},mc=function(e){var t="nonRetryable";return e&&e[t]};function Ni(n,e,t,i){if(i===void 0&&(i=1),typeof n!="function")throw Error("functionToRetry must be a function");return kt.debug(n.name+" attempt #"+i+" with args: "+JSON.stringify(e)),n.apply(void 0,e).catch(function(o){if(kt.debug("error on "+n.name,o),mc(o))throw kt.debug(n.name+" non retryable error",o),o;var r=t(i,e,o);if(kt.debug(n.name+" retrying in "+r+" ms"),r!==!1)return new Promise(function(s){return setTimeout(s,r)}).then(function(){return Ni(n,e,t,i+1)});throw o})}function wc(n){var e=100,t=100;return function(i){var o=Math.pow(2,i)*e+t*Math.random();return o>n?!1:o}}var _c=5*60*1e3;function Sc(n,e,t){return t===void 0&&(t=_c),Ni(n,e,wc(t))}/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var bc=55,Ac=function(){function n(t,i){var o=t||{},r=o.UserPoolId,s=o.ClientId,u=o.endpoint,f=o.fetchOptions,a=o.AdvancedSecurityDataCollectionFlag;if(!r||!s)throw new Error("Both UserPoolId and ClientId are required.");if(r.length>bc||!/^[\w-]+_[0-9a-zA-Z]+$/.test(r))throw new Error("Invalid UserPoolId format.");var c=r.split("_")[0];this.userPoolId=r,this.clientId=s,this.client=new yc(c,u,f),this.advancedSecurityDataCollectionFlag=a!==!1,this.storage=t.Storage||new Mi().getStorage(),i&&(this.wrapRefreshSessionCallback=i)}var e=n.prototype;return e.getUserPoolId=function(){return this.userPoolId},e.getUserPoolName=function(){return this.getUserPoolId().split("_")[1]},e.getClientId=function(){return this.clientId},e.signUp=function(i,o,r,s,u,f){var a=this,c={ClientId:this.clientId,Username:i,Password:o,UserAttributes:r,ValidationData:s,ClientMetadata:f};this.getUserContextData(i)&&(c.UserContextData=this.getUserContextData(i)),this.client.request("SignUp",c,function(d,v){if(d)return u(d,null);var y={Username:i,Pool:a,Storage:a.storage},m={user:new Kn(y),userConfirmed:v.UserConfirmed,userSub:v.UserSub,codeDeliveryDetails:v.CodeDeliveryDetails};return u(null,m)})},e.getCurrentUser=function(){var i="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",o=this.storage.getItem(i);if(o){var r={Username:o,Pool:this,Storage:this.storage};return new Kn(r)}return null},e.getUserContextData=function(i){if(!(typeof AmazonCognitoAdvancedSecurityData>"u")){var o=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var r=o.getData(i,this.userPoolId,this.clientId);if(r){var s={EncodedData:r};return s}}return{}}},n}(),$i={exports:{}};/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */(function(n,e){(function(t){var i;if(n.exports=t(),i=!0,!i){var o=window.Cookies,r=window.Cookies=t();r.noConflict=function(){return window.Cookies=o,r}}})(function(){function t(){for(var r=0,s={};r<arguments.length;r++){var u=arguments[r];for(var f in u)s[f]=u[f]}return s}function i(r){return r.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function o(r){function s(){}function u(a,c,d){if(!(typeof document>"u")){d=t({path:"/"},s.defaults,d),typeof d.expires=="number"&&(d.expires=new Date(new Date*1+d.expires*864e5)),d.expires=d.expires?d.expires.toUTCString():"";try{var v=JSON.stringify(c);/^[\{\[]/.test(v)&&(c=v)}catch{}c=r.write?r.write(c,a):encodeURIComponent(String(c)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),a=encodeURIComponent(String(a)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var y="";for(var m in d)d[m]&&(y+="; "+m,d[m]!==!0&&(y+="="+d[m].split(";")[0]));return document.cookie=a+"="+c+y}}function f(a,c){if(!(typeof document>"u")){for(var d={},v=document.cookie?document.cookie.split("; "):[],y=0;y<v.length;y++){var m=v[y].split("="),_=m.slice(1).join("=");!c&&_.charAt(0)==='"'&&(_=_.slice(1,-1));try{var b=i(m[0]);if(_=(r.read||r)(_,b)||i(_),c)try{_=JSON.parse(_)}catch{}if(d[b]=_,a===b)break}catch{}}return a?d[a]:d}}return s.set=u,s.get=function(a){return f(a,!1)},s.getJSON=function(a){return f(a,!0)},s.remove=function(a,c){u(a,"",t(c,{expires:-1}))},s.defaults={},s.withConverter=o,s}return o(function(){})})})($i);var vt=$i.exports,Cc=function(){function n(t){if(t===void 0&&(t={}),t.domain&&(this.domain=t.domain),t.path?this.path=t.path:this.path="/",Object.prototype.hasOwnProperty.call(t,"expires")?this.expires=t.expires:this.expires=365,Object.prototype.hasOwnProperty.call(t,"secure")?this.secure=t.secure:this.secure=!0,Object.prototype.hasOwnProperty.call(t,"sameSite")){if(!["strict","lax","none"].includes(t.sameSite))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if(t.sameSite==="none"&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=t.sameSite}else this.sameSite=null}var e=n.prototype;return e.setItem=function(i,o){var r={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(r.sameSite=this.sameSite),vt.set(i,o,r),vt.get(i)},e.getItem=function(i){return vt.get(i)},e.removeItem=function(i){var o={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(o.sameSite=this.sameSite),vt.remove(i,o)},e.clear=function(){for(var i=vt.get(),o=Object.keys(i).length,r=0;r<o;++r)this.removeItem(Object.keys(i)[r]);return{}},n}(),Yt={exports:{}};/*! https://mths.be/punycode v1.3.2 by @mathias */Yt.exports;(function(n,e){(function(t){var i=e&&!e.nodeType&&e,o=n&&!n.nodeType&&n,r=typeof _t=="object"&&_t;(r.global===r||r.window===r||r.self===r)&&(t=r);var s,u=2147483647,f=36,a=1,c=26,d=38,v=700,y=72,m=128,_="-",b=/^xn--/,E=/[^\x20-\x7E]/,S=/[\x2E\u3002\uFF0E\uFF61]/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=f-a,D=Math.floor,F=String.fromCharCode,N;function M(R){throw RangeError(T[R])}function H(R,P){for(var O=R.length,V=[];O--;)V[O]=P(R[O]);return V}function ie(R,P){var O=R.split("@"),V="";O.length>1&&(V=O[0]+"@",R=O[1]),R=R.replace(S,".");var G=R.split("."),X=H(G,P).join(".");return V+X}function he(R){for(var P=[],O=0,V=R.length,G,X;O<V;)G=R.charCodeAt(O++),G>=55296&&G<=56319&&O<V?(X=R.charCodeAt(O++),(X&64512)==56320?P.push(((G&1023)<<10)+(X&1023)+65536):(P.push(G),O--)):P.push(G);return P}function be(R){return H(R,function(P){var O="";return P>65535&&(P-=65536,O+=F(P>>>10&1023|55296),P=56320|P&1023),O+=F(P),O}).join("")}function fe(R){return R-48<10?R-22:R-65<26?R-65:R-97<26?R-97:f}function ve(R,P){return R+22+75*(R<26)-((P!=0)<<5)}function le(R,P,O){var V=0;for(R=O?D(R/v):R>>1,R+=D(R/P);R>x*c>>1;V+=f)R=D(R/x);return D(V+(x+1)*R/(R+d))}function Ae(R){var P=[],O=R.length,V,G=0,X=m,Z=y,oe,de,ye,Ce,Q,te,ge,Te,Ue;for(oe=R.lastIndexOf(_),oe<0&&(oe=0),de=0;de<oe;++de)R.charCodeAt(de)>=128&&M("not-basic"),P.push(R.charCodeAt(de));for(ye=oe>0?oe+1:0;ye<O;){for(Ce=G,Q=1,te=f;ye>=O&&M("invalid-input"),ge=fe(R.charCodeAt(ye++)),(ge>=f||ge>D((u-G)/Q))&&M("overflow"),G+=ge*Q,Te=te<=Z?a:te>=Z+c?c:te-Z,!(ge<Te);te+=f)Ue=f-Te,Q>D(u/Ue)&&M("overflow"),Q*=Ue;V=P.length+1,Z=le(G-Ce,V,Ce==0),D(G/V)>u-X&&M("overflow"),X+=D(G/V),G%=V,P.splice(G++,0,X)}return be(P)}function Qe(R){var P,O,V,G,X,Z,oe,de,ye,Ce,Q,te=[],ge,Te,Ue,Me;for(R=he(R),ge=R.length,P=m,O=0,X=y,Z=0;Z<ge;++Z)Q=R[Z],Q<128&&te.push(F(Q));for(V=G=te.length,G&&te.push(_);V<ge;){for(oe=u,Z=0;Z<ge;++Z)Q=R[Z],Q>=P&&Q<oe&&(oe=Q);for(Te=V+1,oe-P>D((u-O)/Te)&&M("overflow"),O+=(oe-P)*Te,P=oe,Z=0;Z<ge;++Z)if(Q=R[Z],Q<P&&++O>u&&M("overflow"),Q==P){for(de=O,ye=f;Ce=ye<=X?a:ye>=X+c?c:ye-X,!(de<Ce);ye+=f)Me=de-Ce,Ue=f-Ce,te.push(F(ve(Ce+Me%Ue,0))),de=D(Me/Ue);te.push(F(ve(de,0))),X=le(O,Te,V==G),O=0,++V}++O,++P}return te.join("")}function an(R){return ie(R,function(P){return b.test(P)?Ae(P.slice(4).toLowerCase()):P})}function un(R){return ie(R,function(P){return E.test(P)?"xn--"+Qe(P):P})}if(s={version:"1.3.2",ucs2:{decode:he,encode:be},decode:Ae,encode:Qe,toASCII:un,toUnicode:an},i&&o)if(n.exports==i)o.exports=s;else for(N in s)s.hasOwnProperty(N)&&(i[N]=s[N]);else t.punycode=s})(_t)})(Yt,Yt.exports);var Ic=Yt.exports,Ec={isString:function(n){return typeof n=="string"},isObject:function(n){return typeof n=="object"&&n!==null},isNull:function(n){return n===null},isNullOrUndefined:function(n){return n==null}},Ut={};function Tc(n,e){return Object.prototype.hasOwnProperty.call(n,e)}var Uc=function(n,e,t,i){e=e||"&",t=t||"=";var o={};if(typeof n!="string"||n.length===0)return o;var r=/\+/g;n=n.split(e);var s=1e3;i&&typeof i.maxKeys=="number"&&(s=i.maxKeys);var u=n.length;s>0&&u>s&&(u=s);for(var f=0;f<u;++f){var a=n[f].replace(r,"%20"),c=a.indexOf(t),d,v,y,m;c>=0?(d=a.substr(0,c),v=a.substr(c+1)):(d=a,v=""),y=decodeURIComponent(d),m=decodeURIComponent(v),Tc(o,y)?Array.isArray(o[y])?o[y].push(m):o[y]=[o[y],m]:o[y]=m}return o},yt=function(n){switch(typeof n){case"string":return n;case"boolean":return n?"true":"false";case"number":return isFinite(n)?n:"";default:return""}},xc=function(n,e,t,i){return e=e||"&",t=t||"=",n===null&&(n=void 0),typeof n=="object"?Object.keys(n).map(function(o){var r=encodeURIComponent(yt(o))+t;return Array.isArray(n[o])?n[o].map(function(s){return r+encodeURIComponent(yt(s))}).join(e):r+encodeURIComponent(yt(n[o]))}).join(e):i?encodeURIComponent(yt(i))+t+encodeURIComponent(yt(n)):""};Ut.decode=Ut.parse=Uc;Ut.encode=Ut.stringify=xc;var Pc=Ic,Oe=Ec,Be=Bi;function Fe(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Rc=/^([a-z0-9.+-]+:)/i,Dc=/:[0-9]*$/,Oc=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Fc=["<",">",'"',"`"," ","\r",`
`,"	"],kc=["{","}","|","\\","^","`"].concat(Fc),qn=["'"].concat(kc),Qr=["%","/","?",";","#"].concat(qn),ei=["/","?","#"],Mc=255,ti=/^[+a-z0-9A-Z_-]{0,63}$/,Nc=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,$c={javascript:!0,"javascript:":!0},Gn={javascript:!0,"javascript:":!0},ut={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Wn=Ut;function Bi(n,e,t){if(n&&Oe.isObject(n)&&n instanceof Fe)return n;var i=new Fe;return i.parse(n,e,t),i}Fe.prototype.parse=function(n,e,t){if(!Oe.isString(n))throw new TypeError("Parameter 'url' must be a string, not "+typeof n);var i=n.indexOf("?"),o=i!==-1&&i<n.indexOf("#")?"?":"#",r=n.split(o),s=/\\/g;r[0]=r[0].replace(s,"/"),n=r.join(o);var u=n;if(u=u.trim(),!t&&n.split("#").length===1){var f=Oc.exec(u);if(f)return this.path=u,this.href=u,this.pathname=f[1],f[2]?(this.search=f[2],e?this.query=Wn.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var a=Rc.exec(u);if(a){a=a[0];var c=a.toLowerCase();this.protocol=c,u=u.substr(a.length)}if(t||a||u.match(/^\/\/[^@\/]+@[^@\/]+/)){var d=u.substr(0,2)==="//";d&&!(a&&Gn[a])&&(u=u.substr(2),this.slashes=!0)}if(!Gn[a]&&(d||a&&!ut[a])){for(var v=-1,y=0;y<ei.length;y++){var m=u.indexOf(ei[y]);m!==-1&&(v===-1||m<v)&&(v=m)}var _,b;v===-1?b=u.lastIndexOf("@"):b=u.lastIndexOf("@",v),b!==-1&&(_=u.slice(0,b),u=u.slice(b+1),this.auth=decodeURIComponent(_)),v=-1;for(var y=0;y<Qr.length;y++){var m=u.indexOf(Qr[y]);m!==-1&&(v===-1||m<v)&&(v=m)}v===-1&&(v=u.length),this.host=u.slice(0,v),u=u.slice(v),this.parseHost(),this.hostname=this.hostname||"";var E=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!E)for(var S=this.hostname.split(/\./),y=0,T=S.length;y<T;y++){var x=S[y];if(x&&!x.match(ti)){for(var D="",F=0,N=x.length;F<N;F++)x.charCodeAt(F)>127?D+="x":D+=x[F];if(!D.match(ti)){var M=S.slice(0,y),H=S.slice(y+1),ie=x.match(Nc);ie&&(M.push(ie[1]),H.unshift(ie[2])),H.length&&(u="/"+H.join(".")+u),this.hostname=M.join(".");break}}}this.hostname.length>Mc?this.hostname="":this.hostname=this.hostname.toLowerCase(),E||(this.hostname=Pc.toASCII(this.hostname));var he=this.port?":"+this.port:"",be=this.hostname||"";this.host=be+he,this.href+=this.host,E&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),u[0]!=="/"&&(u="/"+u))}if(!$c[c])for(var y=0,T=qn.length;y<T;y++){var fe=qn[y];if(u.indexOf(fe)!==-1){var ve=encodeURIComponent(fe);ve===fe&&(ve=escape(fe)),u=u.split(fe).join(ve)}}var le=u.indexOf("#");le!==-1&&(this.hash=u.substr(le),u=u.slice(0,le));var Ae=u.indexOf("?");if(Ae!==-1?(this.search=u.substr(Ae),this.query=u.substr(Ae+1),e&&(this.query=Wn.parse(this.query)),u=u.slice(0,Ae)):e&&(this.search="",this.query={}),u&&(this.pathname=u),ut[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var he=this.pathname||"",Qe=this.search||"";this.path=he+Qe}return this.href=this.format(),this};Fe.prototype.format=function(){var n=this.auth||"";n&&(n=encodeURIComponent(n),n=n.replace(/%3A/i,":"),n+="@");var e=this.protocol||"",t=this.pathname||"",i=this.hash||"",o=!1,r="";this.host?o=n+this.host:this.hostname&&(o=n+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&Oe.isObject(this.query)&&Object.keys(this.query).length&&(r=Wn.stringify(this.query));var s=this.search||r&&"?"+r||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||ut[e])&&o!==!1?(o="//"+(o||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):o||(o=""),i&&i.charAt(0)!=="#"&&(i="#"+i),s&&s.charAt(0)!=="?"&&(s="?"+s),t=t.replace(/[?#]/g,function(u){return encodeURIComponent(u)}),s=s.replace("#","%23"),e+o+t+s+i};Fe.prototype.resolve=function(n){return this.resolveObject(Bi(n,!1,!0)).format()};Fe.prototype.resolveObject=function(n){if(Oe.isString(n)){var e=new Fe;e.parse(n,!1,!0),n=e}for(var t=new Fe,i=Object.keys(this),o=0;o<i.length;o++){var r=i[o];t[r]=this[r]}if(t.hash=n.hash,n.href==="")return t.href=t.format(),t;if(n.slashes&&!n.protocol){for(var s=Object.keys(n),u=0;u<s.length;u++){var f=s[u];f!=="protocol"&&(t[f]=n[f])}return ut[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(n.protocol&&n.protocol!==t.protocol){if(!ut[n.protocol]){for(var a=Object.keys(n),c=0;c<a.length;c++){var d=a[c];t[d]=n[d]}return t.href=t.format(),t}if(t.protocol=n.protocol,!n.host&&!Gn[n.protocol]){for(var T=(n.pathname||"").split("/");T.length&&!(n.host=T.shift()););n.host||(n.host=""),n.hostname||(n.hostname=""),T[0]!==""&&T.unshift(""),T.length<2&&T.unshift(""),t.pathname=T.join("/")}else t.pathname=n.pathname;if(t.search=n.search,t.query=n.query,t.host=n.host||"",t.auth=n.auth,t.hostname=n.hostname||n.host,t.port=n.port,t.pathname||t.search){var v=t.pathname||"",y=t.search||"";t.path=v+y}return t.slashes=t.slashes||n.slashes,t.href=t.format(),t}var m=t.pathname&&t.pathname.charAt(0)==="/",_=n.host||n.pathname&&n.pathname.charAt(0)==="/",b=_||m||t.host&&n.pathname,E=b,S=t.pathname&&t.pathname.split("/")||[],T=n.pathname&&n.pathname.split("/")||[],x=t.protocol&&!ut[t.protocol];if(x&&(t.hostname="",t.port=null,t.host&&(S[0]===""?S[0]=t.host:S.unshift(t.host)),t.host="",n.protocol&&(n.hostname=null,n.port=null,n.host&&(T[0]===""?T[0]=n.host:T.unshift(n.host)),n.host=null),b=b&&(T[0]===""||S[0]==="")),_)t.host=n.host||n.host===""?n.host:t.host,t.hostname=n.hostname||n.hostname===""?n.hostname:t.hostname,t.search=n.search,t.query=n.query,S=T;else if(T.length)S||(S=[]),S.pop(),S=S.concat(T),t.search=n.search,t.query=n.query;else if(!Oe.isNullOrUndefined(n.search)){if(x){t.hostname=t.host=S.shift();var D=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;D&&(t.auth=D.shift(),t.host=t.hostname=D.shift())}return t.search=n.search,t.query=n.query,(!Oe.isNull(t.pathname)||!Oe.isNull(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!S.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var F=S.slice(-1)[0],N=(t.host||n.host||S.length>1)&&(F==="."||F==="..")||F==="",M=0,H=S.length;H>=0;H--)F=S[H],F==="."?S.splice(H,1):F===".."?(S.splice(H,1),M++):M&&(S.splice(H,1),M--);if(!b&&!E)for(;M--;M)S.unshift("..");b&&S[0]!==""&&(!S[0]||S[0].charAt(0)!=="/")&&S.unshift(""),N&&S.join("/").substr(-1)!=="/"&&S.push("");var ie=S[0]===""||S[0]&&S[0].charAt(0)==="/";if(x){t.hostname=t.host=ie?"":S.length?S.shift():"";var D=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;D&&(t.auth=D.shift(),t.host=t.hostname=D.shift())}return b=b||t.host&&S.length,b&&!ie&&S.unshift(""),S.length?t.pathname=S.join("/"):(t.pathname=null,t.path=null),(!Oe.isNull(t.pathname)||!Oe.isNull(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=n.auth||t.auth,t.slashes=t.slashes||n.slashes,t.href=t.format(),t};Fe.prototype.parseHost=function(){var n=this.host,e=Dc.exec(n);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),n=n.substr(0,n.length-e.length)),n&&(this.hostname=n)};var Bc="_self",Lc=function(n){var e=window.open(n,Bc);return e?Promise.resolve(e):Promise.reject()},jc=function(n){window.sessionStorage.setItem("oauth_state",n)},Kc=function(){var n=window.sessionStorage.getItem("oauth_state");return window.sessionStorage.removeItem("oauth_state"),n},Vc=function(n){window.sessionStorage.setItem("ouath_pkce_key",n)},Hc=function(){var n=window.sessionStorage.getItem("ouath_pkce_key");return window.sessionStorage.removeItem("ouath_pkce_key"),n},qc=typeof Symbol<"u"&&typeof Symbol.for=="function"?Symbol.for("amplify_default"):"@@amplify_default",Cn=function(n,e,t){De.dispatch("auth",{event:n,data:e,message:t},"Auth",qc)},it=new Ee("OAuth"),Gc=function(){function n(e){var t=e.config,i=e.cognitoClientId,o=e.scopes,r=o===void 0?[]:o;if(this._urlOpener=t.urlOpener||Lc,this._config=t,this._cognitoClientId=i,!this.isValidScopes(r))throw Error("scopes must be a String Array");this._scopes=r}return n.prototype.isValidScopes=function(e){return Array.isArray(e)&&e.every(function(t){return typeof t=="string"})},n.prototype.oauthSignIn=function(e,t,i,o,r,s){e===void 0&&(e="code"),r===void 0&&(r=Wt.Cognito);var u=this._generateState(32),f=s?u+"-"+qo(s):u;jc(f);var a=this._generateRandom(128);Vc(a);var c=this._generateChallenge(a),d="S256",v=this._scopes.join(" "),y=Object.entries(re(re({redirect_uri:i,response_type:e,client_id:o,identity_provider:r,scope:v,state:f},e==="code"?{code_challenge:c}:{}),e==="code"?{code_challenge_method:d}:{})).map(function(_){var b=Re(_,2),E=b[0],S=b[1];return encodeURIComponent(E)+"="+encodeURIComponent(S)}).join("&"),m="https://"+t+"/oauth2/authorize?"+y;it.debug("Redirecting to "+m),this._urlOpener(m,i)},n.prototype._handleCodeFlow=function(e){return L(this,void 0,void 0,function(){var t,i,o,r,s,u,f,a,c,d,v,y,m,_,b,E;return j(this,function(S){switch(S.label){case 0:return t=(Be(e).query||"").split("&").map(function(T){return T.split("=")}).reduce(function(T,x){var D,F=Re(x,2),N=F[0],M=F[1];return re(re({},T),(D={},D[N]=M,D))},{code:void 0}).code,i=Be(e).pathname||"/",o=Be(this._config.redirectSignIn).pathname||"/",!t||i!==o?[2]:(r="https://"+this._config.domain+"/oauth2/token",Cn("codeFlow",{},"Retrieving tokens from "+r),s=Je(this._config)?this._cognitoClientId:this._config.clientID,u=Je(this._config)?this._config.redirectSignIn:this._config.redirectUri,f=Hc(),a=re({grant_type:"authorization_code",code:t,client_id:s,redirect_uri:u},f?{code_verifier:f}:{}),it.debug("Calling token endpoint: "+r+" with",a),c=Object.entries(a).map(function(T){var x=Re(T,2),D=x[0],F=x[1];return encodeURIComponent(D)+"="+encodeURIComponent(F)}).join("&"),d={category:Un.Auth,action:xn.FederatedSignIn},[4,fetch(r,{method:"POST",headers:(E={"Content-Type":"application/x-www-form-urlencoded"},E[Xa]=Qn(d),E),body:c})]);case 1:return[4,S.sent().json()];case 2:if(v=S.sent(),y=v.access_token,m=v.refresh_token,_=v.id_token,b=v.error,b)throw new Error(b);return[2,{accessToken:y,refreshToken:m,idToken:_}]}})})},n.prototype._handleImplicitFlow=function(e){return L(this,void 0,void 0,function(){var t,i,o;return j(this,function(r){return t=(Be(e).hash||"#").substr(1).split("&").map(function(s){return s.split("=")}).reduce(function(s,u){var f,a=Re(u,2),c=a[0],d=a[1];return re(re({},s),(f={},f[c]=d,f))},{id_token:void 0,access_token:void 0}),i=t.id_token,o=t.access_token,Cn("implicitFlow",{},"Got tokens from "+e),it.debug("Retrieving implicit tokens from "+e+" with"),[2,{accessToken:o,idToken:i,refreshToken:null}]})})},n.prototype.handleAuthResponse=function(e){return L(this,void 0,void 0,function(){var t,i,o,r,s,u,f;return j(this,function(a){switch(a.label){case 0:if(a.trys.push([0,5,,6]),t=e?re(re({},(Be(e).hash||"#").substr(1).split("&").map(function(c){return c.split("=")}).reduce(function(c,d){var v=Re(d,2),y=v[0],m=v[1];return c[y]=m,c},{})),(Be(e).query||"").split("&").map(function(c){return c.split("=")}).reduce(function(c,d){var v=Re(d,2),y=v[0],m=v[1];return c[y]=m,c},{})):{},i=t.error,o=t.error_description,i)throw new Error(o);return r=this._validateState(t),it.debug("Starting "+this._config.responseType+" flow with "+e),this._config.responseType!=="code"?[3,2]:(s=[{}],[4,this._handleCodeFlow(e)]);case 1:return[2,re.apply(void 0,[re.apply(void 0,s.concat([a.sent()])),{state:r}])];case 2:return u=[{}],[4,this._handleImplicitFlow(e)];case 3:return[2,re.apply(void 0,[re.apply(void 0,u.concat([a.sent()])),{state:r}])];case 4:return[3,6];case 5:throw f=a.sent(),it.debug("Error handling auth response.",f),f;case 6:return[2]}})})},n.prototype._validateState=function(e){if(e){var t=Kc(),i=e.state;if(t&&t!==i)throw new Error("Invalid state in OAuth flow");return i}},n.prototype.signOut=function(){return L(this,void 0,void 0,function(){var e,t,i;return j(this,function(o){return e="https://"+this._config.domain+"/logout?",t=Je(this._config)?this._cognitoClientId:this._config.oauth.clientID,i=Je(this._config)?this._config.redirectSignOut:this._config.returnTo,e+=Object.entries({client_id:t,logout_uri:encodeURIComponent(i)}).map(function(r){var s=Re(r,2),u=s[0],f=s[1];return u+"="+f}).join("&"),Cn("oAuthSignOut",{oAuth:"signOut"},"Signing out from "+e),it.debug("Signing out from "+e),[2,this._urlOpener(e,i)]})})},n.prototype._generateState=function(e){for(var t="",i=e,o="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";i>0;--i)t+=o[Math.round(Math.random()*(o.length-1))];return t},n.prototype._generateChallenge=function(e){var t=new Ze.Sha256;t.update(e);var i=t.digestSync(),o=q.Buffer.from(i).toString("base64"),r=this._base64URL(o);return r},n.prototype._base64URL=function(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},n.prototype._generateRandom=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=new Uint8Array(e);if(typeof window<"u"&&window.crypto)window.crypto.getRandomValues(i);else for(var o=0;o<e;o+=1)i[o]=Math.random()*t.length|0;return this._bufferToString(i)},n.prototype._bufferToString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=[],o=0;o<e.byteLength;o+=1){var r=e[o]%t.length;i.push(t[r])}return i.join("")},n}();const Wc=Gc,Yc=function(n){if(ke().isBrowser&&window.location){var e=window.location.href;n({url:e})}else if(!ke().isNode)throw new Error("Not supported")};var ne;(function(n){n.DEFAULT_MSG="Authentication Error",n.EMPTY_EMAIL="Email cannot be empty",n.EMPTY_PHONE="Phone number cannot be empty",n.EMPTY_USERNAME="Username cannot be empty",n.INVALID_USERNAME="The username should either be a string or one of the sign in types",n.EMPTY_PASSWORD="Password cannot be empty",n.EMPTY_CODE="Confirmation code cannot be empty",n.SIGN_UP_ERROR="Error creating account",n.NO_MFA="No valid MFA method provided",n.INVALID_MFA="Invalid MFA type",n.EMPTY_CHALLENGE="Challenge response cannot be empty",n.NO_USER_SESSION="Failed to get the session because the user is empty",n.NETWORK_ERROR="Network Error",n.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",n.AUTOSIGNIN_ERROR="Please use your credentials to sign in"})(ne||(ne={}));var zc=new Ee("AuthError"),Ne=function(n){Di(e,n);function e(t){var i=this,o=Zc[t],r=o.message,s=o.log;return i=n.call(this,r)||this,i.constructor=e,Object.setPrototypeOf(i,e.prototype),i.name="AuthError",i.log=s||r,zc.error(i.log),i}return e}(Error),Jc=function(n){Di(e,n);function e(t){var i=n.call(this,t)||this;return i.constructor=e,Object.setPrototypeOf(i,e.prototype),i.name="NoUserPoolError",i}return e}(Ne),Zc={noConfig:{message:ne.DEFAULT_MSG,log:`
            Error: Amplify has not been configured correctly.
            This error is typically caused by one of the following scenarios:

            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point
                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information
            
            2. There might be multiple conflicting versions of amplify packages in your node_modules.
				Refer to our docs site for help upgrading Amplify packages (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js)
        `},missingAuthConfig:{message:ne.DEFAULT_MSG,log:`
            Error: Amplify has not been configured correctly. 
            The configuration object is missing required auth properties.
            This error is typically caused by one of the following scenarios:

            1. Did you run \`amplify push\` after adding auth via \`amplify add auth\`?
                See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information

            2. This could also be caused by multiple conflicting versions of amplify packages, see (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js) for help upgrading Amplify packages.
        `},emptyUsername:{message:ne.EMPTY_USERNAME},invalidUsername:{message:ne.INVALID_USERNAME},emptyPassword:{message:ne.EMPTY_PASSWORD},emptyCode:{message:ne.EMPTY_CODE},signUpError:{message:ne.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:ne.NO_MFA},invalidMFA:{message:ne.INVALID_MFA},emptyChallengeResponse:{message:ne.EMPTY_CHALLENGE},noUserSession:{message:ne.NO_USER_SESSION},deviceConfig:{message:ne.DEVICE_CONFIG},networkError:{message:ne.NETWORK_ERROR},autoSignInError:{message:ne.AUTOSIGNIN_ERROR},default:{message:ne.DEFAULT_MSG}},C=new Ee("AuthClass"),ni="aws.cognito.signin.user.admin",Xc=10*1e3,Qc=typeof Symbol<"u"&&typeof Symbol.for=="function"?Symbol.for("amplify_default"):"@@amplify_default",$=function(n,e,t){De.dispatch("auth",{event:n,data:e,message:t},"Auth",Qc)},ef=60,tf=3*60*1e3,nf=function(){function n(e){var t=this;this.userPool=null,this.user=null,this.oAuthFlowInProgress=!1,this.autoSignInInitiated=!1,this.inflightSessionPromise=null,this.inflightSessionPromiseCounter=0,this.Credentials=Pi,this.wrapRefreshSessionCallback=function(i){var o=function(r,s){return s?$("tokenRefresh",void 0,"New token retrieved"):$("tokenRefresh_failure",r,"Failed to retrieve new token"),i(r,s)};return o},this.configure(e),this.currentCredentials=this.currentCredentials.bind(this),this.currentUserCredentials=this.currentUserCredentials.bind(this),De.listen("auth",function(i){var o=i.payload,r=o.event;switch(r){case"verify":case"signIn":t._storage.setItem("amplify-signin-with-hostedUI","false");break;case"signOut":t._storage.removeItem("amplify-signin-with-hostedUI");break;case"cognitoHostedUI":t._storage.setItem("amplify-signin-with-hostedUI","true");break}}),lc(),Xr(vn.framework),vn.observeFrameworkChanges(function(){Xr(vn.framework)})}return n.prototype.getModuleName=function(){return"Auth"},n.prototype.configure=function(e){var t=this;if(!e)return this._config||{};C.debug("configure Auth");var i=Object.assign({},this._config,_i(e).Auth,e);this._config=i;var o=this._config,r=o.userPoolId,s=o.userPoolWebClientId,u=o.cookieStorage,f=o.oauth,a=o.region,c=o.identityPoolId,d=o.mandatorySignIn,v=o.refreshHandlers,y=o.identityPoolRegion,m=o.clientMetadata,_=o.endpoint,b=o.storage;if(!b)u?this._storage=new Cc(u):this._storage=e.ssr?new Za:new Si().getStorage();else{if(!this._isValidAuthStorage(b))throw C.error("The storage in the Auth config is not valid!"),new Error("Empty storage object");this._storage=b}if(this._storageSync=Promise.resolve(),typeof this._storage.sync=="function"&&(this._storageSync=this._storage.sync()),r){var E={UserPoolId:r,ClientId:s,endpoint:_};E.Storage=this._storage,this.userPool=new Ac(E,this.wrapRefreshSessionCallback)}this.Credentials.configure({mandatorySignIn:d,region:a,userPoolId:r,identityPoolId:c,refreshHandlers:v,storage:this._storage,identityPoolRegion:y});var S=f?Je(this._config.oauth)?f:f.awsCognito:void 0;if(S){var T=Object.assign({cognitoClientId:s,UserPoolId:r,domain:S.domain,scopes:S.scope,redirectSignIn:S.redirectSignIn,redirectSignOut:S.redirectSignOut,responseType:S.responseType,Storage:this._storage,urlOpener:S.urlOpener,clientMetadata:m},S.options);this._oAuthHandler=new Wc({scopes:T.scopes,config:T,cognitoClientId:T.cognitoClientId});var x={};Yc(function(F){var N=F.url;x[N]||(x[N]=!0,t._handleAuthResponse(N))})}if($("configured",null,"The Auth category has been configured successfully"),!this.autoSignInInitiated&&typeof this._storage.getItem=="function"){var D=this.isTrueStorageValue("amplify-polling-started");D&&($("autoSignIn_failure",null,K.AutoSignInError),this._storage.removeItem("amplify-auto-sign-in")),this._storage.removeItem("amplify-polling-started")}return this._config},n.prototype.signUp=function(e){for(var t=this,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var r,s,u;if(!this.userPool)return this.rejectNoUserPool();var f=null,a=null,c=[],d=null,v,y={enabled:!1},m={},_={};if(e&&typeof e=="string"){f=e,a=i?i[0]:null;var b=i?i[1]:null,E=i?i[2]:null;b&&c.push(new st({Name:"email",Value:b})),E&&c.push(new st({Name:"phone_number",Value:E}))}else if(e&&typeof e=="object"){f=e.username,a=e.password,e&&e.clientMetadata?v=e.clientMetadata:this._config.clientMetadata&&(v=this._config.clientMetadata);var S=e.attributes;S&&Object.keys(S).map(function(x){c.push(new st({Name:x,Value:S[x]}))});var T=e.validationData;T&&(d=[],Object.keys(T).map(function(x){d.push(new st({Name:x,Value:T[x]}))})),y=(r=e.autoSignIn)!==null&&r!==void 0?r:{enabled:!1},y.enabled&&(this._storage.setItem("amplify-auto-sign-in","true"),m=(s=y.validationData)!==null&&s!==void 0?s:{},_=(u=y.clientMetaData)!==null&&u!==void 0?u:{})}else return this.rejectAuthError(K.SignUpError);return f?a?(C.debug("signUp attrs:",c),C.debug("signUp validation data:",d),new Promise(function(x,D){t.userPool.signUp(f,a,c,d,function(F,N){F?($("signUp_failure",F,f+" failed to signup"),D(F)):($("signUp",N,f+" has signed up successfully"),y.enabled&&t.handleAutoSignIn(f,a,m,_,N),x(N))},v)})):this.rejectAuthError(K.EmptyPassword):this.rejectAuthError(K.EmptyUsername)},n.prototype.handleAutoSignIn=function(e,t,i,o,r){this.autoSignInInitiated=!0;var s=new Gr({Username:e,Password:t,ValidationData:i,ClientMetadata:o});r.userConfirmed?this.signInAfterUserConfirmed(s):this._config.signUpVerificationMethod==="link"?this.handleLinkAutoSignIn(s):this.handleCodeAutoSignIn(s)},n.prototype.handleCodeAutoSignIn=function(e){var t=this,i=function(o){var r=o.payload;r.event==="confirmSignUp"&&t.signInAfterUserConfirmed(e,i)};De.listen("auth",i)},n.prototype.handleLinkAutoSignIn=function(e){var t=this;this._storage.setItem("amplify-polling-started","true");var i=Date.now(),o=setInterval(function(){Date.now()-i>tf?(clearInterval(o),$("autoSignIn_failure",null,"Please confirm your account and use your credentials to sign in."),t._storage.removeItem("amplify-auto-sign-in")):t.signInAfterUserConfirmed(e,null,o)},5e3)},n.prototype.signInAfterUserConfirmed=function(e,t,i){return L(this,void 0,void 0,function(){var o,r,s=this;return j(this,function(u){switch(u.label){case 0:o=this.createCognitoUser(e.getUsername()),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,o.authenticateUser(e,this.authCallbacks(o,function(f){$("autoSignIn",f,e.getUsername()+" has signed in successfully"),t&&De.remove("auth",t),i&&(clearInterval(i),s._storage.removeItem("amplify-polling-started")),s._storage.removeItem("amplify-auto-sign-in")},function(f){C.error(f),s._storage.removeItem("amplify-auto-sign-in")}))];case 2:return u.sent(),[3,4];case 3:return r=u.sent(),C.error(r),[3,4];case 4:return[2]}})})},n.prototype.confirmSignUp=function(e,t,i){var o=this;if(!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(K.EmptyUsername);if(!t)return this.rejectAuthError(K.EmptyCode);var r=this.createCognitoUser(e),s=i&&typeof i.forceAliasCreation=="boolean"?i.forceAliasCreation:!0,u;return i&&i.clientMetadata?u=i.clientMetadata:this._config.clientMetadata&&(u=this._config.clientMetadata),new Promise(function(f,a){r.confirmRegistration(t,s,function(c,d){if(c)a(c);else{$("confirmSignUp",d,e+" has been confirmed successfully");var v=o.isTrueStorageValue("amplify-auto-sign-in");v&&!o.autoSignInInitiated&&($("autoSignIn_failure",null,K.AutoSignInError),o._storage.removeItem("amplify-auto-sign-in")),f(d)}},u)})},n.prototype.isTrueStorageValue=function(e){var t=this._storage.getItem(e);return t?t==="true":!1},n.prototype.resendSignUp=function(e,t){if(t===void 0&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(K.EmptyUsername);var i=this.createCognitoUser(e);return new Promise(function(o,r){i.resendConfirmationCode(function(s,u){s?r(s):o(u)},t)})},n.prototype.signIn=function(e,t,i){if(i===void 0&&(i=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();var o=null,r=null,s={};if(typeof e=="string")o=e,r=t;else if(tu(e))typeof t<"u"&&C.warn("The password should be defined under the first parameter object!"),o=e.username,r=e.password,s=e.validationData;else return this.rejectAuthError(K.InvalidUsername);if(!o)return this.rejectAuthError(K.EmptyUsername);var u=new Gr({Username:o,Password:r,ValidationData:s,ClientMetadata:i});return r?this.signInWithPassword(u):this.signInWithoutPassword(u)},n.prototype.authCallbacks=function(e,t,i){var o=this,r=this;return{onSuccess:function(s){return L(o,void 0,void 0,function(){var u,f,a,c;return j(this,function(d){switch(d.label){case 0:C.debug(s),delete e.challengeName,delete e.challengeParam,d.label=1;case 1:return d.trys.push([1,4,5,9]),[4,this.Credentials.clear()];case 2:return d.sent(),[4,this.Credentials.set(s,"session")];case 3:return u=d.sent(),C.debug("succeed to get cognito credentials",u),[3,9];case 4:return f=d.sent(),C.debug("cannot get cognito credentials",f),[3,9];case 5:return d.trys.push([5,7,,8]),[4,this.currentUserPoolUser()];case 6:return a=d.sent(),r.user=a,$("signIn",a,"A user "+e.getUsername()+" has been signed in"),t(a),[3,8];case 7:return c=d.sent(),C.error("Failed to get the signed in user",c),i(c),[3,8];case 8:return[7];case 9:return[2]}})})},onFailure:function(s){C.debug("signIn failure",s),$("signIn_failure",s,e.getUsername()+" failed to signin"),i(s)},customChallenge:function(s){C.debug("signIn custom challenge answer required"),e.challengeName="CUSTOM_CHALLENGE",e.challengeParam=s,t(e)},mfaRequired:function(s,u){C.debug("signIn MFA required"),e.challengeName=s,e.challengeParam=u,t(e)},mfaSetup:function(s,u){C.debug("signIn mfa setup",s),e.challengeName=s,e.challengeParam=u,t(e)},newPasswordRequired:function(s,u){C.debug("signIn new password"),e.challengeName="NEW_PASSWORD_REQUIRED",e.challengeParam={userAttributes:s,requiredAttributes:u},t(e)},totpRequired:function(s,u){C.debug("signIn totpRequired"),e.challengeName=s,e.challengeParam=u,t(e)},selectMFAType:function(s,u){C.debug("signIn selectMFAType",s),e.challengeName=s,e.challengeParam=u,t(e)}}},n.prototype.signInWithPassword=function(e){var t=this;if(this.pendingSignIn)throw new Error("Pending sign-in attempt already in progress");var i=this.createCognitoUser(e.getUsername());return this.pendingSignIn=new Promise(function(o,r){i.authenticateUser(e,t.authCallbacks(i,function(s){t.pendingSignIn=null,o(s)},function(s){t.pendingSignIn=null,r(s)}))}),this.pendingSignIn},n.prototype.signInWithoutPassword=function(e){var t=this,i=this.createCognitoUser(e.getUsername());return i.setAuthenticationFlowType("CUSTOM_AUTH"),new Promise(function(o,r){i.initiateAuth(e,t.authCallbacks(i,o,r))})},n.prototype.getMFAOptions=function(e){return new Promise(function(t,i){e.getMFAOptions(function(o,r){if(o){C.debug("get MFA Options failed",o),i(o);return}C.debug("get MFA options success",r),t(r)})})},n.prototype.getPreferredMFA=function(e,t){var i=this,o=this;return new Promise(function(r,s){var u=i._config.clientMetadata,f=t?t.bypassCache:!1;e.getUserData(function(a,c){return L(i,void 0,void 0,function(){var d,v;return j(this,function(y){switch(y.label){case 0:if(!a)return[3,5];if(C.debug("getting preferred mfa failed",a),!this.isSessionInvalid(a))return[3,4];y.label=1;case 1:return y.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return y.sent(),[3,4];case 3:return d=y.sent(),s(new Error("Session is invalid due to: "+a.message+" and failed to clean up invalid session: "+d.message)),[2];case 4:return s(a),[2];case 5:return v=o._getMfaTypeFromUserData(c),v?(r(v),[2]):(s("invalid MFA Type"),[2])}})})},{bypassCache:f,clientMetadata:u})})},n.prototype._getMfaTypeFromUserData=function(e){var t=null,i=e.PreferredMfaSetting;if(i)t=i;else{var o=e.UserMFASettingList;if(o)o.length===0?t="NOMFA":C.debug("invalid case for getPreferredMFA",e);else{var r=e.MFAOptions;r?t="SMS_MFA":t="NOMFA"}}return t},n.prototype._getUserData=function(e,t){var i=this;return new Promise(function(o,r){e.getUserData(function(s,u){return L(i,void 0,void 0,function(){var f;return j(this,function(a){switch(a.label){case 0:if(!s)return[3,5];if(C.debug("getting user data failed",s),!this.isSessionInvalid(s))return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return a.sent(),[3,4];case 3:return f=a.sent(),r(new Error("Session is invalid due to: "+s.message+" and failed to clean up invalid session: "+f.message)),[2];case 4:return r(s),[2];case 5:o(u),a.label=6;case 6:return[2]}})})},t)})},n.prototype.setPreferredMFA=function(e,t){return L(this,void 0,void 0,function(){var i,o,r,s,u,f,a,c=this;return j(this,function(d){switch(d.label){case 0:return i=this._config.clientMetadata,[4,this._getUserData(e,{bypassCache:!0,clientMetadata:i})];case 1:switch(o=d.sent(),r=null,s=null,u=t,u){case"TOTP":return[3,2];case"SOFTWARE_TOKEN_MFA":return[3,2];case"SMS":return[3,3];case"SMS_MFA":return[3,3];case"NOMFA":return[3,4]}return[3,6];case 2:return s={PreferredMfa:!0,Enabled:!0},[3,7];case 3:return r={PreferredMfa:!0,Enabled:!0},[3,7];case 4:return f=o.UserMFASettingList,[4,this._getMfaTypeFromUserData(o)];case 5:if(a=d.sent(),a==="NOMFA")return[2,Promise.resolve("No change for mfa type")];if(a==="SMS_MFA")r={PreferredMfa:!1,Enabled:!1};else if(a==="SOFTWARE_TOKEN_MFA")s={PreferredMfa:!1,Enabled:!1};else return[2,this.rejectAuthError(K.InvalidMFA)];return f&&f.length!==0&&f.forEach(function(v){v==="SMS_MFA"?r={PreferredMfa:!1,Enabled:!1}:v==="SOFTWARE_TOKEN_MFA"&&(s={PreferredMfa:!1,Enabled:!1})}),[3,7];case 6:return C.debug("no validmfa method provided"),[2,this.rejectAuthError(K.NoMFA)];case 7:return[2,new Promise(function(v,y){e.setUserMfaPreference(r,s,function(m,_){if(m)return C.debug("Set user mfa preference error",m),y(m);C.debug("Set user mfa success",_),C.debug("Caching the latest user data into local"),e.getUserData(function(b,E){return L(c,void 0,void 0,function(){var S;return j(this,function(T){switch(T.label){case 0:if(!b)return[3,5];if(C.debug("getting user data failed",b),!this.isSessionInvalid(b))return[3,4];T.label=1;case 1:return T.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return T.sent(),[3,4];case 3:return S=T.sent(),y(new Error("Session is invalid due to: "+b.message+" and failed to clean up invalid session: "+S.message)),[2];case 4:return[2,y(b)];case 5:return[2,v(_)]}})})},{bypassCache:!0,clientMetadata:i})})})]}})})},n.prototype.disableSMS=function(e){return new Promise(function(t,i){e.disableMFA(function(o,r){if(o){C.debug("disable mfa failed",o),i(o);return}C.debug("disable mfa succeed",r),t(r)})})},n.prototype.enableSMS=function(e){return new Promise(function(t,i){e.enableMFA(function(o,r){if(o){C.debug("enable mfa failed",o),i(o);return}C.debug("enable mfa succeed",r),t(r)})})},n.prototype.setupTOTP=function(e){return new Promise(function(t,i){e.associateSoftwareToken({onFailure:function(o){C.debug("associateSoftwareToken failed",o),i(o)},associateSecretCode:function(o){C.debug("associateSoftwareToken success",o),t(o)}})})},n.prototype.verifyTotpToken=function(e,t){C.debug("verification totp token",e,t);var i;e&&typeof e.getSignInUserSession=="function"&&(i=e.getSignInUserSession());var o=i==null?void 0:i.isValid();return new Promise(function(r,s){e.verifySoftwareToken(t,"My TOTP device",{onFailure:function(u){C.debug("verifyTotpToken failed",u),s(u)},onSuccess:function(u){o||$("signIn",e,"A user "+e.getUsername()+" has been signed in"),$("verify",e,"A user "+e.getUsername()+" has been verified"),C.debug("verifyTotpToken success",u),r(u)}})})},n.prototype.confirmSignIn=function(e,t,i,o){var r=this;if(o===void 0&&(o=this._config.clientMetadata),!t)return this.rejectAuthError(K.EmptyCode);var s=this;return new Promise(function(u,f){e.sendMFACode(t,{onSuccess:function(a){return L(r,void 0,void 0,function(){var c,d,v,y;return j(this,function(m){switch(m.label){case 0:C.debug(a),m.label=1;case 1:return m.trys.push([1,4,5,10]),[4,this.Credentials.clear()];case 2:return m.sent(),[4,this.Credentials.set(a,"session")];case 3:return c=m.sent(),C.debug("succeed to get cognito credentials",c),[3,10];case 4:return d=m.sent(),C.debug("cannot get cognito credentials",d),[3,10];case 5:s.user=e,m.label=6;case 6:return m.trys.push([6,8,,9]),[4,this.currentUserPoolUser()];case 7:return v=m.sent(),e.attributes=v.attributes,[3,9];case 8:return y=m.sent(),C.debug("cannot get updated Cognito User",y),[3,9];case 9:return $("signIn",e,"A user "+e.getUsername()+" has been signed in"),u(e),[7];case 10:return[2]}})})},onFailure:function(a){C.debug("confirm signIn failure",a),f(a)}},i,o)})},n.prototype.completeNewPassword=function(e,t,i,o){var r=this;if(i===void 0&&(i={}),o===void 0&&(o=this._config.clientMetadata),!t)return this.rejectAuthError(K.EmptyPassword);var s=this;return new Promise(function(u,f){e.completeNewPasswordChallenge(t,i,{onSuccess:function(a){return L(r,void 0,void 0,function(){var c,d;return j(this,function(v){switch(v.label){case 0:C.debug(a),v.label=1;case 1:return v.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return v.sent(),[4,this.Credentials.set(a,"session")];case 3:return c=v.sent(),C.debug("succeed to get cognito credentials",c),[3,6];case 4:return d=v.sent(),C.debug("cannot get cognito credentials",d),[3,6];case 5:return s.user=e,$("signIn",e,"A user "+e.getUsername()+" has been signed in"),u(e),[7];case 6:return[2]}})})},onFailure:function(a){C.debug("completeNewPassword failure",a),$("completeNewPassword_failure",a,r.user+" failed to complete the new password flow"),f(a)},mfaRequired:function(a,c){C.debug("signIn MFA required"),e.challengeName=a,e.challengeParam=c,u(e)},mfaSetup:function(a,c){C.debug("signIn mfa setup",a),e.challengeName=a,e.challengeParam=c,u(e)},totpRequired:function(a,c){C.debug("signIn mfa setup",a),e.challengeName=a,e.challengeParam=c,u(e)}},o)})},n.prototype.sendCustomChallengeAnswer=function(e,t,i){var o=this;return i===void 0&&(i=this._config.clientMetadata),this.userPool?t?new Promise(function(r,s){e.sendCustomChallengeAnswer(t,o.authCallbacks(e,r,s),i)}):this.rejectAuthError(K.EmptyChallengeResponse):this.rejectNoUserPool()},n.prototype.deleteUserAttributes=function(e,t){var i=this;return new Promise(function(o,r){i.userSession(e).then(function(s){e.deleteAttributes(t,function(u,f){return u?r(u):o(f)})})})},n.prototype.deleteUser=function(){return L(this,void 0,void 0,function(){var e,t,i=this;return j(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this._storageSync];case 1:return o.sent(),[3,3];case 2:throw e=o.sent(),C.debug("Failed to sync cache info into memory",e),new Error(e);case 3:return t=this._oAuthHandler&&this._storage.getItem("amplify-signin-with-hostedUI")==="true",[2,new Promise(function(r,s){return L(i,void 0,void 0,function(){var u,f=this;return j(this,function(a){if(this.userPool)if(u=this.userPool.getCurrentUser(),u)u.getSession(function(c,d){return L(f,void 0,void 0,function(){var v,y=this;return j(this,function(m){switch(m.label){case 0:if(!c)return[3,5];if(C.debug("Failed to get the user session",c),!this.isSessionInvalid(c))return[3,4];m.label=1;case 1:return m.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(u)];case 2:return m.sent(),[3,4];case 3:return v=m.sent(),s(new Error("Session is invalid due to: "+c.message+" and failed to clean up invalid session: "+v.message)),[2];case 4:return[2,s(c)];case 5:u.deleteUser(function(_,b){if(_)s(_);else{$("userDeleted",b,"The authenticated user has been deleted."),u.signOut(),y.user=null;try{y.cleanCachedItems()}catch{C.debug("failed to clear cached items")}t?y.oAuthSignOutRedirect(r,s):($("signOut",y.user,"A user has been signed out"),r(b))}}),m.label=6;case 6:return[2]}})})});else return C.debug("Failed to get user from user pool"),[2,s(new Error("No current user."))];else C.debug("no Congito User pool"),s(new Error("Cognito User pool does not exist"));return[2]})})})]}})})},n.prototype.updateUserAttributes=function(e,t,i){var o=this;i===void 0&&(i=this._config.clientMetadata);var r=[],s=this;return new Promise(function(u,f){s.userSession(e).then(function(a){for(var c in t)if(c!=="sub"&&c.indexOf("_verified")<0){var d={Name:c,Value:t[c]};r.push(d)}e.updateAttributes(r,function(v,y,m){if(v)return $("updateUserAttributes_failure",v,"Failed to update attributes"),f(v);var _=o.createUpdateAttributesResultList(t,m==null?void 0:m.CodeDeliveryDetailsList);return $("updateUserAttributes",_,"Attributes successfully updated"),u(y)},i)})})},n.prototype.createUpdateAttributesResultList=function(e,t){var i={};return Object.keys(e).forEach(function(o){i[o]={isUpdated:!0};var r=t==null?void 0:t.find(function(s){return s.AttributeName===o});r&&(i[o].isUpdated=!1,i[o].codeDeliveryDetails=r)}),i},n.prototype.userAttributes=function(e){var t=this;return new Promise(function(i,o){t.userSession(e).then(function(r){e.getUserAttributes(function(s,u){s?o(s):i(u)})})})},n.prototype.verifiedContact=function(e){var t=this;return this.userAttributes(e).then(function(i){var o=t.attributesToObject(i),r={},s={};return o.email&&(o.email_verified?s.email=o.email:r.email=o.email),o.phone_number&&(o.phone_number_verified?s.phone_number=o.phone_number:r.phone_number=o.phone_number),{verified:s,unverified:r}})},n.prototype.isErrorWithMessage=function(e){return typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"message")},n.prototype.isTokenRevokedError=function(e){return this.isErrorWithMessage(e)&&e.message==="Access Token has been revoked"},n.prototype.isRefreshTokenRevokedError=function(e){return this.isErrorWithMessage(e)&&e.message==="Refresh Token has been revoked"},n.prototype.isUserDisabledError=function(e){return this.isErrorWithMessage(e)&&e.message==="User is disabled."},n.prototype.isUserDoesNotExistError=function(e){return this.isErrorWithMessage(e)&&e.message==="User does not exist."},n.prototype.isRefreshTokenExpiredError=function(e){return this.isErrorWithMessage(e)&&e.message==="Refresh Token has expired"},n.prototype.isPasswordResetRequiredError=function(e){return this.isErrorWithMessage(e)&&e.message==="Password reset required for the user"},n.prototype.isSignedInHostedUI=function(){return this._oAuthHandler&&this._storage.getItem("amplify-signin-with-hostedUI")==="true"},n.prototype.isSessionInvalid=function(e){return this.isUserDisabledError(e)||this.isUserDoesNotExistError(e)||this.isTokenRevokedError(e)||this.isRefreshTokenRevokedError(e)||this.isRefreshTokenExpiredError(e)||this.isPasswordResetRequiredError(e)},n.prototype.cleanUpInvalidSession=function(e){return L(this,void 0,void 0,function(){var t=this;return j(this,function(i){switch(i.label){case 0:e.signOut(),this.user=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.cleanCachedItems()];case 2:return i.sent(),[3,4];case 3:return i.sent(),C.debug("failed to clear cached items"),[3,4];case 4:return this.isSignedInHostedUI()?[2,new Promise(function(o,r){t.oAuthSignOutRedirect(o,r)})]:($("signOut",this.user,"A user has been signed out"),[2])}})})},n.prototype.currentUserPoolUser=function(e){var t=this;return this.userPool?new Promise(function(i,o){t._storageSync.then(function(){return L(t,void 0,void 0,function(){var r,s,u,f,a,c,d,v=this;return j(this,function(y){switch(y.label){case 0:return this.isOAuthInProgress()?(C.debug("OAuth signIn in progress, waiting for resolution..."),[4,new Promise(function(m){var _=setTimeout(function(){C.debug("OAuth signIn in progress timeout"),De.remove("auth",b),m()},Xc);De.listen("auth",b);function b(E){var S=E.payload,T=S.event;(T==="cognitoHostedUI"||T==="cognitoHostedUI_failure")&&(C.debug("OAuth signIn resolved: "+T),clearTimeout(_),De.remove("auth",b),m())}})]):[3,2];case 1:y.sent(),y.label=2;case 2:if(r=this.userPool.getCurrentUser(),!r)return C.debug("Failed to get user from user pool"),o("No current user"),[2];y.label=3;case 3:return y.trys.push([3,7,,8]),[4,this._userSession(r)];case 4:return s=y.sent(),u=e?e.bypassCache:!1,u?[4,this.Credentials.clear()]:[3,6];case 5:y.sent(),y.label=6;case 6:if(f=this._config.clientMetadata,a=s.getAccessToken().decodePayload().scope,c=a===void 0?"":a,c.split(" ").includes(ni))r.getUserData(function(m,_){return L(v,void 0,void 0,function(){var b,E,S,T,x,D,F;return j(this,function(N){switch(N.label){case 0:if(!m)return[3,7];if(C.debug("getting user data failed",m),!this.isSessionInvalid(m))return[3,5];N.label=1;case 1:return N.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(r)];case 2:return N.sent(),[3,4];case 3:return b=N.sent(),o(new Error("Session is invalid due to: "+m.message+" and failed to clean up invalid session: "+b.message)),[2];case 4:return o(m),[3,6];case 5:i(r),N.label=6;case 6:return[2];case 7:for(E=_.PreferredMfaSetting||"NOMFA",S=[],T=0;T<_.UserAttributes.length;T++)x={Name:_.UserAttributes[T].Name,Value:_.UserAttributes[T].Value},D=new st(x),S.push(D);return F=this.attributesToObject(S),Object.assign(r,{attributes:F,preferredMFA:E}),[2,i(r)]}})})},{bypassCache:u,clientMetadata:f});else return C.debug("Unable to get the user data because the "+ni+" is not in the scopes of the access token"),[2,i(r)];return[3,8];case 7:return d=y.sent(),o(d),[3,8];case 8:return[2]}})})}).catch(function(r){return C.debug("Failed to sync cache info into memory",r),o(r)})}):this.rejectNoUserPool()},n.prototype.isOAuthInProgress=function(){return this.oAuthFlowInProgress},n.prototype.currentAuthenticatedUser=function(e){return L(this,void 0,void 0,function(){var t,i,o,r,s;return j(this,function(u){switch(u.label){case 0:C.debug("getting current authenticated user"),t=null,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this._storageSync];case 2:return u.sent(),[3,4];case 3:throw i=u.sent(),C.debug("Failed to sync cache info into memory",i),i;case 4:try{o=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")),o&&(t=re(re({},o.user),{token:o.token}))}catch{C.debug("cannot load federated user from auth storage")}return t?(this.user=t,C.debug("get current authenticated federated user",this.user),[2,this.user]):[3,5];case 5:C.debug("get current authenticated userpool user"),r=null,u.label=6;case 6:return u.trys.push([6,8,,9]),[4,this.currentUserPoolUser(e)];case 7:return r=u.sent(),[3,9];case 8:return s=u.sent(),s==="No userPool"&&C.error("Cannot get the current user because the user pool is missing. Please make sure the Auth module is configured with a valid Cognito User Pool ID"),C.debug("The user is not authenticated by the error",s),[2,Promise.reject("The user is not authenticated")];case 9:return this.user=r,[2,this.user]}})})},n.prototype.currentSession=function(){var e=this;return C.debug("Getting current session"),this.userPool?new Promise(function(t,i){e.currentUserPoolUser().then(function(o){e.userSession(o).then(function(r){t(r)}).catch(function(r){C.debug("Failed to get the current session",r),i(r)})}).catch(function(o){C.debug("Failed to get the current user",o),i(o)})}):Promise.reject(new Error("No User Pool in the configuration."))},n.prototype._userSession=function(e){return L(this,void 0,void 0,function(){var t,i,o=this;return j(this,function(r){switch(r.label){case 0:if(!e)return C.debug("the user is null"),[2,this.rejectAuthError(K.NoUserSession)];t=this._config.clientMetadata,this.inflightSessionPromiseCounter===0&&(this.inflightSessionPromise=new Promise(function(s,u){e.getSession(function(f,a){return L(o,void 0,void 0,function(){var c;return j(this,function(d){switch(d.label){case 0:if(!f)return[3,5];if(C.debug("Failed to get the session from user",e),!this.isSessionInvalid(f))return[3,4];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return d.sent(),[3,4];case 3:return c=d.sent(),u(new Error("Session is invalid due to: "+f.message+" and failed to clean up invalid session: "+c.message)),[2];case 4:return u(f),[2];case 5:return C.debug("Succeed to get the user session",a),s(a),[2]}})})},{clientMetadata:t})})),this.inflightSessionPromiseCounter++,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.inflightSessionPromise];case 2:return i=r.sent(),e.signInUserSession=i,[2,i];case 3:return this.inflightSessionPromiseCounter--,[7];case 4:return[2]}})})},n.prototype.userSession=function(e){return this._userSession(e)},n.prototype.currentUserCredentials=function(){return L(this,void 0,void 0,function(){var e,t,i=this;return j(this,function(o){switch(o.label){case 0:C.debug("Getting current user credentials"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this._storageSync];case 2:return o.sent(),[3,4];case 3:throw e=o.sent(),C.debug("Failed to sync cache info into memory",e),e;case 4:t=null;try{t=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))}catch(r){C.debug("failed to get or parse item aws-amplify-federatedInfo",r)}return t?[2,this.Credentials.refreshFederatedToken(t)]:[2,this.currentSession().then(function(r){return C.debug("getting session success",r),i.Credentials.set(r,"session")}).catch(function(){return C.debug("getting guest credentials"),i.Credentials.set(null,"guest")})]}})})},n.prototype.currentCredentials=function(){return C.debug("getting current credentials"),this.Credentials.get()},n.prototype.verifyUserAttribute=function(e,t,i){return i===void 0&&(i=this._config.clientMetadata),new Promise(function(o,r){e.getAttributeVerificationCode(t,{onSuccess:function(s){return o(s)},onFailure:function(s){return r(s)}},i)})},n.prototype.verifyUserAttributeSubmit=function(e,t,i){return i?new Promise(function(o,r){e.verifyAttribute(t,i,{onSuccess:function(s){o(s)},onFailure:function(s){r(s)}})}):this.rejectAuthError(K.EmptyCode)},n.prototype.verifyCurrentUserAttribute=function(e){var t=this;return t.currentUserPoolUser().then(function(i){return t.verifyUserAttribute(i,e)})},n.prototype.verifyCurrentUserAttributeSubmit=function(e,t){var i=this;return i.currentUserPoolUser().then(function(o){return i.verifyUserAttributeSubmit(o,e,t)})},n.prototype.cognitoIdentitySignOut=function(e,t){return L(this,void 0,void 0,function(){var i,o,r=this;return j(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,this._storageSync];case 1:return s.sent(),[3,3];case 2:throw i=s.sent(),C.debug("Failed to sync cache info into memory",i),i;case 3:return o=this._oAuthHandler&&this._storage.getItem("amplify-signin-with-hostedUI")==="true",[2,new Promise(function(u,f){if(e&&e.global){C.debug("user global sign out",t);var a=r._config.clientMetadata;t.getSession(function(c,d){return L(r,void 0,void 0,function(){var v,y=this;return j(this,function(m){switch(m.label){case 0:if(!c)return[3,5];if(C.debug("failed to get the user session",c),!this.isSessionInvalid(c))return[3,4];m.label=1;case 1:return m.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(t)];case 2:return m.sent(),[3,4];case 3:return v=m.sent(),f(new Error("Session is invalid due to: "+c.message+" and failed to clean up invalid session: "+v.message)),[2];case 4:return[2,f(c)];case 5:return t.globalSignOut({onSuccess:function(_){if(C.debug("global sign out success"),o)y.oAuthSignOutRedirect(u,f);else return u()},onFailure:function(_){return C.debug("global sign out failed",_),f(_)}}),[2]}})})},{clientMetadata:a})}else C.debug("user sign out",t),t.signOut(function(){if(o)r.oAuthSignOutRedirect(u,f);else return u()})})]}})})},n.prototype.oAuthSignOutRedirect=function(e,t){var i=ke().isBrowser;i?this.oAuthSignOutRedirectOrReject(t):this.oAuthSignOutAndResolve(e)},n.prototype.oAuthSignOutAndResolve=function(e){this._oAuthHandler.signOut(),e()},n.prototype.oAuthSignOutRedirectOrReject=function(e){this._oAuthHandler.signOut(),setTimeout(function(){return e(Error("Signout timeout fail"))},3e3)},n.prototype.signOut=function(e){return L(this,void 0,void 0,function(){var t;return j(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.cleanCachedItems()];case 1:return i.sent(),[3,3];case 2:return i.sent(),C.debug("failed to clear cached items"),[3,3];case 3:return this.userPool?(t=this.userPool.getCurrentUser(),t?[4,this.cognitoIdentitySignOut(e,t)]:[3,5]):[3,7];case 4:return i.sent(),[3,6];case 5:C.debug("no current Cognito user"),i.label=6;case 6:return[3,8];case 7:C.debug("no Cognito User pool"),i.label=8;case 8:return $("signOut",this.user,"A user has been signed out"),this.user=null,[2]}})})},n.prototype.cleanCachedItems=function(){return L(this,void 0,void 0,function(){return j(this,function(e){switch(e.label){case 0:return[4,this.Credentials.clear()];case 1:return e.sent(),[2]}})})},n.prototype.changePassword=function(e,t,i,o){var r=this;return o===void 0&&(o=this._config.clientMetadata),new Promise(function(s,u){r.userSession(e).then(function(f){e.changePassword(t,i,function(a,c){return a?(C.debug("change password failure",a),u(a)):s(c)},o)})})},n.prototype.forgotPassword=function(e,t){if(t===void 0&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(K.EmptyUsername);var i=this.createCognitoUser(e);return new Promise(function(o,r){i.forgotPassword({onSuccess:function(){o()},onFailure:function(s){C.debug("forgot password failure",s),$("forgotPassword_failure",s,e+" forgotPassword failed"),r(s)},inputVerificationCode:function(s){$("forgotPassword",i,e+" has initiated forgot password flow"),o(s)}},t)})},n.prototype.forgotPasswordSubmit=function(e,t,i,o){if(o===void 0&&(o=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(K.EmptyUsername);if(!t)return this.rejectAuthError(K.EmptyCode);if(!i)return this.rejectAuthError(K.EmptyPassword);var r=this.createCognitoUser(e);return new Promise(function(s,u){r.confirmPassword(t,i,{onSuccess:function(f){$("forgotPasswordSubmit",r,e+" forgotPasswordSubmit successful"),s(f)},onFailure:function(f){$("forgotPasswordSubmit_failure",f,e+" forgotPasswordSubmit failed"),u(f)}},o)})},n.prototype.currentUserInfo=function(){return L(this,void 0,void 0,function(){var e,f,t,i,o,r,s,u,f;return j(this,function(a){switch(a.label){case 0:return e=this.Credentials.getCredSource(),!e||e==="aws"||e==="userPool"?[4,this.currentUserPoolUser().catch(function(c){return C.error(c)})]:[3,9];case 1:if(f=a.sent(),!f)return[2,null];a.label=2;case 2:return a.trys.push([2,8,,9]),[4,this.userAttributes(f)];case 3:t=a.sent(),i=this.attributesToObject(t),o=null,a.label=4;case 4:return a.trys.push([4,6,,7]),[4,this.currentCredentials()];case 5:return o=a.sent(),[3,7];case 6:return r=a.sent(),C.debug("Failed to retrieve credentials while getting current user info",r),[3,7];case 7:return s={id:o?o.identityId:void 0,username:f.getUsername(),attributes:i},[2,s];case 8:return u=a.sent(),C.error("currentUserInfo error",u),[2,{}];case 9:return e==="federated"?(f=this.user,[2,f||{}]):[2]}})})},n.prototype.federatedSignIn=function(e,t,i){return L(this,void 0,void 0,function(){var o,f,r,s,u,f,a,c,d,v,y,m;return j(this,function(_){switch(_.label){case 0:if(!this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation requires either a User Pool or Identity Pool in config");if(typeof e>"u"&&this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation with Identity Pools requires tokens passed as arguments");return Sn(e)||Qa(e)||eu(e)||typeof e>"u"?(o=e||{provider:Wt.Cognito},f=Sn(o)?o.provider:o.customProvider,r=(Sn(o),o.customState),this._config.userPoolId&&(s=Je(this._config.oauth)?this._config.userPoolWebClientId:this._config.oauth.clientID,u=Je(this._config.oauth)?this._config.oauth.redirectSignIn:this._config.oauth.redirectUri,this._oAuthHandler.oauthSignIn(this._config.oauth.responseType,this._config.oauth.domain,u,s,f,r)),[3,4]):[3,1];case 1:f=e;try{a=JSON.stringify(JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user),a&&C.warn("There is already a signed in user: "+a+` in your app.
																	You should not call Auth.federatedSignIn method again as it may cause unexpected behavior.`)}catch{}return c=t.token,d=t.identity_id,v=t.expires_at,[4,this.Credentials.set({provider:f,token:c,identity_id:d,user:i,expires_at:v},"federation")];case 2:return y=_.sent(),[4,this.currentAuthenticatedUser()];case 3:return m=_.sent(),$("signIn",m,"A user "+m.username+" has been signed in"),C.debug("federated sign in credentials",y),[2,y];case 4:return[2]}})})},n.prototype._handleAuthResponse=function(e){return L(this,void 0,void 0,function(){var t,i,o,r,s,u,f,a,c,d,v,y,m,_;return j(this,function(b){switch(b.label){case 0:if(this.oAuthFlowInProgress)return C.debug("Skipping URL "+e+" current flow in progress"),[2];b.label=1;case 1:if(b.trys.push([1,,8,9]),this.oAuthFlowInProgress=!0,!this._config.userPoolId)throw new Error("OAuth responses require a User Pool defined in config");if($("parsingCallbackUrl",{url:e},"The callback url is being parsed"),t=e||(ke().isBrowser?window.location.href:""),i=!!(Be(t).query||"").split("&").map(function(E){return E.split("=")}).find(function(E){var S=Re(E,1),T=S[0];return T==="code"||T==="error"}),o=!!(Be(t).hash||"#").substr(1).split("&").map(function(E){return E.split("=")}).find(function(E){var S=Re(E,1),T=S[0];return T==="access_token"||T==="error"}),!(i||o))return[3,7];this._storage.setItem("amplify-redirected-from-hosted-ui","true"),b.label=2;case 2:return b.trys.push([2,6,,7]),[4,this._oAuthHandler.handleAuthResponse(t)];case 3:return r=b.sent(),s=r.accessToken,u=r.idToken,f=r.refreshToken,a=r.state,c=new jn({IdToken:new Bn({IdToken:u}),RefreshToken:new Ln({RefreshToken:f}),AccessToken:new Nn({AccessToken:s})}),d=void 0,this._config.identityPoolId?[4,this.Credentials.set(c,"session")]:[3,5];case 4:d=b.sent(),C.debug("AWS credentials",d),b.label=5;case 5:return v=/-/.test(a),y=this.createCognitoUser(c.getIdToken().decodePayload()["cognito:username"]),y.setSignInUserSession(c),window&&typeof window.history<"u"&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),$("signIn",y,"A user "+y.getUsername()+" has been signed in"),$("cognitoHostedUI",y,"A user "+y.getUsername()+" has been signed in via Cognito Hosted UI"),v&&(m=a.split("-").splice(1).join("-"),$("customOAuthState",Go(m),"State for user "+y.getUsername())),[2,d];case 6:return _=b.sent(),C.debug("Error in cognito hosted auth response",_),window&&typeof window.history<"u"&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),$("signIn_failure",_,"The OAuth response flow failed"),$("cognitoHostedUI_failure",_,"A failure occurred when returning to the Cognito Hosted UI"),$("customState_failure",_,"A failure occurred when returning state"),[3,7];case 7:return[3,9];case 8:return this.oAuthFlowInProgress=!1,[7];case 9:return[2]}})})},n.prototype.essentialCredentials=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},n.prototype.attributesToObject=function(e){var t=this,i={};return e&&e.map(function(o){o.Name==="email_verified"||o.Name==="phone_number_verified"?i[o.Name]=t.isTruthyString(o.Value)||o.Value===!0:i[o.Name]=o.Value}),i},n.prototype.isTruthyString=function(e){return typeof e.toLowerCase=="function"&&e.toLowerCase()==="true"},n.prototype.createCognitoUser=function(e){var t={Username:e,Pool:this.userPool};t.Storage=this._storage;var i=this._config.authenticationFlowType,o=new Kn(t);return i&&o.setAuthenticationFlowType(i),o},n.prototype._isValidAuthStorage=function(e){return!!e&&typeof e.getItem=="function"&&typeof e.setItem=="function"&&typeof e.removeItem=="function"&&typeof e.clear=="function"},n.prototype.noUserPoolErrorHandler=function(e){return e&&(!e.userPoolId||!e.identityPoolId)?K.MissingAuthConfig:K.NoConfig},n.prototype.rejectAuthError=function(e){return Promise.reject(new Ne(e))},n.prototype.rejectNoUserPool=function(){var e=this.noUserPoolErrorHandler(this._config);return Promise.reject(new Jc(e))},n.prototype.rememberDevice=function(){return L(this,void 0,void 0,function(){var e,t;return j(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return e=i.sent(),[3,3];case 2:return t=i.sent(),C.debug("The user is not authenticated by the error",t),[2,Promise.reject("The user is not authenticated")];case 3:return e.getCachedDeviceKeyAndPassword(),[2,new Promise(function(o,r){e.setDeviceStatusRemembered({onSuccess:function(s){o(s)},onFailure:function(s){s.code==="InvalidParameterException"?r(new Ne(K.DeviceConfig)):s.code==="NetworkError"?r(new Ne(K.NetworkError)):r(s)}})})]}})})},n.prototype.forgetDevice=function(){return L(this,void 0,void 0,function(){var e,t;return j(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return e=i.sent(),[3,3];case 2:return t=i.sent(),C.debug("The user is not authenticated by the error",t),[2,Promise.reject("The user is not authenticated")];case 3:return e.getCachedDeviceKeyAndPassword(),[2,new Promise(function(o,r){e.forgetDevice({onSuccess:function(s){o(s)},onFailure:function(s){s.code==="InvalidParameterException"?r(new Ne(K.DeviceConfig)):s.code==="NetworkError"?r(new Ne(K.NetworkError)):r(s)}})})]}})})},n.prototype.fetchDevices=function(){return L(this,void 0,void 0,function(){var e,t;return j(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return e=i.sent(),[3,3];case 2:throw t=i.sent(),C.debug("The user is not authenticated by the error",t),new Error("The user is not authenticated");case 3:return e.getCachedDeviceKeyAndPassword(),[2,new Promise(function(o,r){var s={onSuccess:function(u){var f=u.Devices.map(function(a){var c=a.DeviceAttributes.find(function(v){var y=v.Name;return y==="device_name"})||{},d={id:a.DeviceKey,name:c.Value};return d});o(f)},onFailure:function(u){u.code==="InvalidParameterException"?r(new Ne(K.DeviceConfig)):u.code==="NetworkError"?r(new Ne(K.NetworkError)):r(u)}};e.listDevices(ef,null,s)})]}})})},n}(),Li=new nf(null);Jn.register(Li);const rf="/assets/lit-c8dae599.svg",of="/vite.svg",sf={userPoolId:"us-east-1_zknguzw3R",userPoolWebClientId:"62js8mr29t9kuf432lih20ffld"};class ji extends at{constructor(){super(),console.log(Li.configure(sf))}render(){return ui`
        <svg height="400" width="400">
          <circle cx="50" cy="50" r="40" stroke="black" stroke-width="3" fill="red" />
          <ellipse cx="200" cy="80" rx="70" ry="10"
          style="fill:yellow;stroke:purple;stroke-width:2" />
        </svg>
        `}}fr(ji,"properties",{header:{type:String}});customElements.define("aws-login",ji);class af extends at{static get properties(){return{docsHint:{type:String},count:{type:Number}}}constructor(){super(),this.docsHint="Click on the Vite and Lit logos to learn more",this.count=0}render(){return ui`
      <div>
        <aws-login></aws-login>
        <a href="https://vitejs.dev" target="_blank">
          <img src=${of} class="logo" alt="Vite logo" />
        </a>
        <a href="https://lit.dev" target="_blank">
          <img src=${rf} class="logo lit" alt="Lit logo" />
        </a>
      </div>
      <slot></slot>
      <div class="card">
        <button @click=${this._onClick} part="button">
          count is ${this.count}
        </button>
      </div>
      <p class="read-the-docs">${this.docsHint}</p>
    `}_onClick(){this.count++}static get styles(){return Gi`
      :host {
        max-width: 1280px;
        margin: 0 auto;
        padding: 2rem;
        text-align: center;
      }

      .logo {
        height: 6em;
        padding: 1.5em;
        will-change: filter;
        transition: filter 300ms;
      }
      .logo:hover {
        filter: drop-shadow(0 0 2em #646cffaa);
      }
      .logo.lit:hover {
        filter: drop-shadow(0 0 2em #325cffaa);
      }

      .card {
        padding: 2em;
      }

      .read-the-docs {
        color: #888;
      }

      a {
        font-weight: 500;
        color: #646cff;
        text-decoration: inherit;
      }
      a:hover {
        color: #535bf2;
      }

      ::slotted(h1) {
        font-size: 3.2em;
        line-height: 1.1;
      }

      button {
        border-radius: 8px;
        border: 1px solid transparent;
        padding: 0.6em 1.2em;
        font-size: 1em;
        font-weight: 500;
        font-family: inherit;
        background-color: #1a1a1a;
        cursor: pointer;
        transition: border-color 0.25s;
      }
      button:hover {
        border-color: #646cff;
      }
      button:focus,
      button:focus-visible {
        outline: 4px auto -webkit-focus-ring-color;
      }

      @media (prefers-color-scheme: light) {
        a:hover {
          color: #747bff;
        }
        button {
          background-color: #f9f9f9;
        }
      }
    `}}window.customElements.define("my-element",af);
